(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1093:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(2),i=n(49),o=n(3),s=n.n(o),u=n(5),c=n(28),l=n(31),p=n(30),d=n(29),f=n(32),m=n(26),h=n(7),v=n.n(h),b=n(53),g=n.n(b),w=n(1),y=n.n(w),x=n(92),O=n(52),k=n(184),j=n(10),I=n.n(j),S=n(12),E=n(77),C=n(14),T=n(765),P=n.n(T),F=n(284),_=n(191),D=n(205),N=I()({loader:function(){return Promise.all([n.e(0),n.e(95),n.e(8),n.e(10),n.e(53)]).then(n.bind(null,656))},loading:function(){return null},modules:["StepProgressBarNew"]}),L=I()({loader:function(){return Promise.all([n.e(0),n.e(14),n.e(6),n.e(8),n.e(18)]).then(n.bind(null,1047))},loading:function(){return null},modules:["BusinessLanding"]}),q=I()({loader:function(){return Promise.all([n.e(0),n.e(6),n.e(8),n.e(12),n.e(17)]).then(n.bind(null,1076))},loading:function(){return null},modules:["BusinessForm"]}),B=I()({loader:function(){return Promise.all([n.e(0),n.e(9),n.e(6),n.e(8),n.e(16)]).then(n.bind(null,1048))},loading:function(){return null},modules:["BusinessCheckout"]}),U=I()({loader:function(){return Promise.all([n.e(9),n.e(33)]).then(n.bind(null,399))},loading:function(){return null},modules:["LoadingScreenV2"]}),A={slug:"email",placeholderString:"Enter company email address",type:"email",is_required:!0,size:12},M=[{title:"Contact Details",forms:[{size:12,title:"Email",slug:"email",placeholderString:"Enter company email address",type:"email",readOnly:!0,is_required:!0},{size:12,title:"Company",slug:"company",placeholder:"E.g Singtel",type:"text",is_required:!0},{size:12,title:"First name",slug:"first_name",placeholder:"E.g John",type:"text",is_required:!0},{size:12,title:"Last name",slug:"last_name",placeholder:"E.g Doe",type:"text",is_required:!0},{size:12,title:"Mobile no",slug:"mobile_number",placeholder:"E.g 8888 8888",type:"number",is_required:!0}]},{title:"Plan Details",forms:[{size:12,title:"No of employees",slug:"no_of_employees",placeholder:"No of employees",type:"text",readOnly:!0},{size:12,title:"Expected start date",slug:"start_date",placeholder:"DD/MM/YYYY",type:"date",min_date:g()().startOf("day").add(1,"days").toDate(),is_required:!0}]}],V="customize",R="review",W="checkout",$="pending_payment",Q=function(e){function t(e){var n;Object(c.a)(this,t);var a=(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).props,r=a.history,i=a.doSetQuoteData;return n.state={formIndex:0,values:{},errors:{},pageForms:null,currPage:null,allFields:null,transitionClass:"flow-visible",showLoading:!1,showLoadingError:!1,token:null,paymentIntent:null,quoteData:null,promoCode:null,isFromSession:r&&r.location&&"/business/review"===r.location.pathname,partialFlowStatus:null,formStatesToUse:E.a},i(null),r.replace("/business".concat(r.location.search)),n.renderStepProgress=n.renderStepProgress.bind(Object(m.a)(Object(m.a)(n))),n.renderFlow=n.renderFlow.bind(Object(m.a)(Object(m.a)(n))),n.onChangeValue=n.onChangeValue.bind(Object(m.a)(Object(m.a)(n))),n.onInitalSetup=n.onInitalSetup.bind(Object(m.a)(Object(m.a)(n))),n.validateForm=n.validateForm.bind(Object(m.a)(Object(m.a)(n))),n.setFormIndex=n.setFormIndex.bind(Object(m.a)(Object(m.a)(n))),n.showLoading=n.showLoading.bind(Object(m.a)(Object(m.a)(n))),n.showLoadingError=n.showLoadingError.bind(Object(m.a)(Object(m.a)(n))),n.handleTransition=n.handleTransition.bind(Object(m.a)(Object(m.a)(n))),n.getCurrentFormIndex=n.getCurrentFormIndex.bind(Object(m.a)(Object(m.a)(n))),n.getNewQuote=n.getNewQuote.bind(Object(m.a)(Object(m.a)(n))),n.handleAPI=n.handleAPI.bind(Object(m.a)(Object(m.a)(n))),n.checkOtp=n.checkOtp.bind(Object(m.a)(Object(m.a)(n))),n.quoteButtonCallback=n.quoteButtonCallback.bind(Object(m.a)(Object(m.a)(n))),n}return Object(f.a)(t,e),Object(d.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.formIndex,a=t.isMounted,r=e.formState,i=e.match,o=e.history,s=e.doSetCategoryNavBar,u=e.partialFlowStatus;if(a){var c=Object(_.j)("business",r.index,n,i,o,u?E.b:E.a);if(c&&null!==c.formIndex)return s(0!==c.formIndex,!0),{formIndex:c.formIndex}}return null}}]),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,a,r,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.doSetCategoryNavBar,a=t.setFormState,r=t.doSetGetQuoteNavbar,a(E.a.MAIN),this.setState({isMounted:!0}),n(!1,!0),r(function(){return i.quoteButtonCallback(!0)}),this.onInitalSetup();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.doSetCategoryNavBar,n=e.doSetQuoteData;t(!1,!1),n(null)}},{key:"onInitalSetup",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,a,o,u,c,l,p,d,f,m,h,b,g,w,y,x,O,k,j=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.isFromSession,n=this.props,a=n.history,o=n.setFormState,u=n.doSetQuoteData,c={};try{t&&(l=a.location.search.split("?")[1].split("&"),v.a.each(l,function(e){try{var t=e.split("=");c[t[0]]=t[1]}catch(n){}}))}catch(s){}if(p=null,d=null,f=null,m={},h=!1,b=E.a,e.prev=10,!c.session){e.next=17;break}return e.next=14,this.handleAPI(function(){return Object(E.f)(c.session)});case 14:e.t0=e.sent,e.next=18;break;case 17:e.t0=null;case 18:return g=e.t0,w=g&&g.status,b=(h="deposited"===w||"paid"===w?w:null)?E.b:E.a,e.next=24,this.handleAPI(E.e);case 24:if(!(y=e.sent)){e.next=54;break}if(f=[].concat(Object(i.a)(Object(_.f)(y)),[A],Object(i.a)(Object(_.f)(M))),(p=y)&&(d=p[0].slug,g&&g.page&&v.a.find(p,function(e){return e.slug===g.page})&&(d=g.page)),!g||!g.status){e.next=38;break}return x=!0,e.next=33,new Promise(function(e){return j.setState({token:c.session,paymentIntent:c.payment_intent},e)});case 33:o(b.CUSTOMIZE),a.push("/business".concat(b.CUSTOMIZE.path).concat(a.location.search)),g.status===V&&(x=!1),x&&(o(b.REVIEW),a.push("/business".concat(b.REVIEW.path).concat(a.location.search)),g.status===R&&(x=!1)),c.payment_intent&&(o(b.CHECKOUT),a.push("/business".concat(b.CHECKOUT.path).concat(a.location.search)));case 38:if(!g||!g.input_data){e.next=54;break}if(O=g.input_data,m=v.a.reduce(O,function(e,t,n){var a=Object(r.a)({},e),i=v.a.find(f,function(e){return e.slug===n});if(i){var o=t;"date"!==i.type&&"end_date"!==i.type||(o=new Date(t)),a[n]={type:i.type,value:o}}return a},{}),!h||!c.session){e.next=51;break}return e.next=44,Object(E.g)(c.session);case 44:if(!(k=e.sent)||!k.quote){e.next=49;break}return e.next=48,new Promise(function(e){j.setState({quoteData:k.quote},e)});case 48:u({quote:{info:k.info,quote:k.quote},isBalance:k.quote&&k.quote.outstanding_premium&&k.quote.amount_paid});case 49:e.next=54;break;case 51:if(v.a.isEmpty(m)){e.next=54;break}return e.next=54,this.getNewQuote(f,m,c.session,1);case 54:e.next=58;break;case 56:e.prev=56,e.t1=e.catch(10);case 58:this.setState({pageForms:p,currPage:d,values:m,allFields:f,partialFlowStatus:h,formStatesToUse:b,isFromSession:!1});case 59:case"end":return e.stop()}},e,this,[[10,56]])}));return function(){return e.apply(this,arguments)}}()},{key:"onChangeValue",value:function(){var e=Object(u.a)(s.a.mark(function e(t,n,i){var o,c,l,p,d,f,m,h,b,g,w=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.state,c=o.values,l=o.errors,p=o.allFields,d=o.token,f=o.formIndex,m=o.promoCode,h=o.formStatesToUse,e.prev=1,b=l&&l[n],g={},!b){e.next=12;break}return e.t0=a.a,e.t1={},e.t2=n,e.next=10,Object(D.b)(n,{type:t,value:i},c,p);case 10:e.t3=e.sent,g=(0,e.t0)(e.t1,e.t2,e.t3);case 12:return e.abrupt("return",new Promise(function(e){w.setState({values:Object(r.a)({},c,Object(a.a)({},n,{type:t,value:i})),errors:Object(r.a)({},l,g)},Object(u.a)(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=w.state.values,f!==h.CUSTOMIZE.index){t.next=10;break}if(!v.a.isEmpty(g)){t.next=10;break}if("age_group"===n){t.next=10;break}if(!(a&&a.age_group&&a.age_group.value)){t.next=10;break}if(!(a&&a.no_of_employees&&a.no_of_employees.value>=0)){t.next=10;break}return t.next=10,w.getNewQuote(p,a,d,1,m);case 10:e();case 11:case"end":return t.stop()}},t)})))}));case 15:e.prev=15,e.t4=e.catch(1);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"setFormIndex",value:function(e){if(e){var t=this.props,n=t.doSetCategoryNavBar,a=t.history,r=t.setFormState;n(0!==e.index,!0),r(e),a.push("/".concat("business").concat(e.path))}}},{key:"getNewQuote",value:function(){var e=Object(u.a)(s.a.mark(function e(t,n,a,r,i){var o,u,c,l=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=this.props.doSetQuoteData,u=Object(_.b)(t,n),c=null,!(u.no_of_employees&&u.no_of_employees>0)){e.next=8;break}return e.next=7,Object(E.k)(u,a,r,i);case 7:c=e.sent;case 8:return e.next=10,new Promise(function(e){l.setState({quoteData:c},e)});case 10:return o({quote:c,isDeposit:!1}),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,n,a,r,i){return e.apply(this,arguments)}}()},{key:"getCurrentFormIndex",value:function(){var e=this.state,t=e.pageForms,n=e.currPage,a=-1;try{a=v.a.findIndex(t,function(e){return e.slug===n})}catch(r){}return a}},{key:"checkOtp",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,a,r,i=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.paymentIntent,a=t.token,e.prev=1,e.next=4,this.handleAPI(function(){return new Promise(function(e){var t=5,r=!1,o=!1;i.checkOtpInterval=setInterval(Object(u.a)(s.a.mark(function u(){var c;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o){s.next=12;break}return o=!0,s.next=4,Object(E.p)(a,n);case 4:if(c=s.sent,t-=1,r=c&&"succeeded"===c.status,0!==t&&!r){s.next=11;break}return clearInterval(i.checkOtpInterval),e(r),s.abrupt("return");case 11:o=!1;case 12:case"end":return s.stop()}},u)})),1e3)})});case 4:return r=e.sent,this.setState({paymentIntent:null}),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleAPI",value:function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a,r,i=this,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],a=this.state.isFromSession,e.prev=2,clearInterval(this.showLoadigInterval),a||(this.showLoadigInterval=setInterval(function(){return i.setState({showLoading:!0})},300)),e.next=7,t();case 7:return r=e.sent,clearInterval(this.showLoadigInterval),this.setState({showLoadingError:!n&&!r,showLoading:!n&&!r}),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(2);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[2,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"showLoading",value:function(){var e=Object(u.a)(s.a.mark(function e(t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){n.setState({showLoading:t},e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"showLoadingError",value:function(){var e=Object(u.a)(s.a.mark(function e(t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){n.setState({showLoadingError:t},e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleTransition",value:function(){var e=Object(u.a)(s.a.mark(function e(t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({transitionClass:"flow-invisible"},Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){setTimeout(function(){e()},200)});case 2:return t(),e.next=5,new Promise(function(e){setTimeout(function(){e()},100)});case 5:n.setState({transitionClass:"flow-visible"});case 6:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"quoteButtonCallback",value:function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a,r,i,o,c=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state,a=n.values,r=n.pageForms,i=n.formStatesToUse,e.prev=1,e.next=4,this.validateForm([A.slug],Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.l)(Object(_.b)([A],a));case 2:return t=e.sent,e.next=5,c.handleAPI(function(){return Object(E.m)(Object(_.b)([A],a),t,V,r[0].slug)});case 5:if(!e.sent){e.next=7;break}c.setState({token:t},function(){c.handleTransition(function(){window.scrollTo(0,0),c.setFormIndex(i.CUSTOMIZE)})});case 7:case"end":return e.stop()}},e)})));case 4:o=e.sent,t&&!o&&window.scrollTo({top:0,left:0,behavior:"smooth"}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"validateForm",value:function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,a,i,o,u,c,l,p,d=this,f=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:null,n=f.length>1&&void 0!==f[1]?f[1]:null,a=f.length>2&&void 0!==f[2]?f[2]:null,i=this.state,o=i.values,u=i.errors,c=i.allFields,l=a||c,p=Object(r.a)({},u),e.prev=6,e.next=9,Object(D.a)(o,t,l);case 9:p=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:return e.abrupt("return",new Promise(function(e){d.setState({errors:p},function(){v.a.isEmpty(p)&&(n&&n(),e(!0)),e(!1)})}));case 15:case"end":return e.stop()}},e,this,[[6,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderStepProgress",value:function(){var e=this.state,t=e.formIndex,n=e.partialFlowStatus,a=e.formStatesToUse,r=n?["Review","Checkout"]:["Customize","Review","Checkout"],i=n?[a.REVIEW,a.CHECKOUT]:[a.CUSTOMIZE,a.REVIEW,a.CHECKOUT],o=n?[{main:""},{main:""}]:[{main:""},{main:""},{main:""}];return y.a.createElement(N,{className:"business-step-progress",maxWidth:"244px",formState:t>a.CHECKOUT.index?a.CHECKOUT.index:t,inputList:r,formStates:a,stateList:i,stateDescriptions:o,charged:!1,v3Slider:!0})}},{key:"renderFlow",value:function(){var e=this,t=this.state,n=t.formIndex,a=t.values,i=t.errors,o=t.pageForms,c=t.currPage,l=t.transitionClass,p=t.allFields,d=t.token,f=t.promoCode,m=t.paymentIntent,h=t.isFromSession,b=t.partialFlowStatus,g=t.formStatesToUse,w=this.props,x=w.userDetails,O=w.doSetQuoteData,k=w.quoteDataFromState,j=w.setFormState,I=w.history,S=!v.a.isEmpty(x),C=this.getCurrentFormIndex();switch(n){case g.CUSTOMIZE.index:return y.a.createElement(q,{handleAPI:this.handleAPI,isFromSession:h,stickyInfo:k,values:a,errors:i,onChangeValue:this.onChangeValue,validateForm:this.validateForm,pageForms:o,currPage:c,isLoggedIn:S,headerImage:0===C?P.a:null,onNext:Object(u.a)(s.a.mark(function t(){var n,r,i,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getCurrentFormIndex(),r=n+1<o.length,i=r?o[n+1].slug:c,u=r?V:R,t.next=6,e.handleAPI(function(){return Object(E.m)(Object(_.b)(p,a),d,u,i,1,b)});case 6:t.sent&&e.handleTransition(function(){window.scrollTo(0,0);try{r?e.setState({currPage:i}):e.setFormIndex(g.REVIEW)}catch(t){}});case 8:case"end":return t.stop()}},t)})),onBack:Object(u.a)(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getCurrentFormIndex(),r=o[n-1].slug,t.next=4,e.handleAPI(function(){return Object(E.m)(Object(_.b)(p,a),d,V,r,1,b)});case 4:t.sent&&e.handleTransition(function(){window.scrollTo(0,0);try{n-1>=0&&e.setState({currPage:r})}catch(t){}});case 6:case"end":return t.stop()}},t)})),transitionClass:l});case g.REVIEW.index:case g.CHECKOUT.index:case g.SUBMITTED.index:return y.a.createElement(B,{setStateToSubmitted:function(){j(g.SUBMITTED),I.push("/business".concat(g.SUBMITTED.path).concat(I.location.search))},partialFlowStatus:b,postComeBackLater:function(){var t=Object(u.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleAPI(function(){return Object(E.j)(n,d)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),doSetQuoteData:O,stickyInfo:k,isFromSession:h,checkOtp:this.checkOtp,paymentIntent:m,handleAPI:this.handleAPI,promoCode:f,token:d,postBankTransfer:function(){var t=Object(u.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleAPI(function(){return Object(E.h)(n,d)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getSummary:Object(u.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleAPI(function(){return Object(E.g)(d)}));case 1:case"end":return t.stop()}},t)})),postCheckout:Object(u.a)(s.a.mark(function t(){var n,i,o,u,l=arguments;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:null,i=l.length>1&&void 0!==l[1]&&l[1],t.next=4,e.handleAPI(function(){return Object(E.i)(d,n)},!i);case 4:if(!(o=t.sent)){t.next=9;break}return u=o.quote?{quoteData:Object(r.a)({},e.state.quoteData||{},{quote:Object(r.a)({},o.quote)})}:{},t.next=9,new Promise(function(t){e.setState(Object(r.a)({promoCode:n},u),t)});case 9:if(i){t.next=11;break}return t.abrupt("return",o);case 11:if(!i){t.next=16;break}return t.next=14,e.handleAPI(function(){return Object(E.m)(Object(_.b)(p,a),d,$,c,1,b)});case 14:if(!o||!o.payment_template_links){t.next=16;break}return t.abrupt("return",o);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}},t)})),checkoutFields:M,isCheckout:n===g.CHECKOUT.index,values:a,errors:i,onChangeValue:this.onChangeValue,validateForm:this.validateForm,isLoggedIn:S,onBack:Object(u.a)(s.a.mark(function t(){var r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n===g.REVIEW.index?V:R,i=n===g.REVIEW.index?g.CUSTOMIZE:g.REVIEW,t.next=4,e.handleAPI(function(){return Object(E.m)(Object(_.b)(p,a),d,r,c,1,b)});case 4:t.sent&&e.handleTransition(function(){window.scrollTo(0,0),e.setFormIndex(i)});case 6:case"end":return t.stop()}},t)})),onNext:n===g.REVIEW.index?Object(u.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleAPI(function(){return Object(E.m)(Object(_.b)(p,a),d,W,c,1,b)});case 2:t.sent&&e.handleTransition(function(){window.scrollTo(0,0),e.setFormIndex(g.CHECKOUT)});case 4:case"end":return t.stop()}},t)})):null,transitionClass:l,handleTransition:this.handleTransition});default:return y.a.createElement(L,{isFromSession:h,emailField:A,values:a,errors:i,onChangeValue:this.onChangeValue,isLoggedIn:S,quoteButtonCallback:this.quoteButtonCallback,transitionClass:l,handleAPI:this.handleAPI})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.formIndex,a=t.showLoading,r=t.showLoadingError;return y.a.createElement(w.Fragment,null,y.a.createElement(x.Helmet,null,y.a.createElement("title",null,"PolicyPal 2.0 - Business Insurance"),y.a.createElement("meta",{name:"title",content:"PolicyPal 2.0 - Business Insurance"}),y.a.createElement("meta",{name:"description",content:"PolicyPal Business can offer tailored quotations to protect your business. From corporate companies, to SMEs, startups, we\u2019ve got just the best benefits and coverage for you so you can gain full protection."})),0!==n&&this.renderStepProgress(),this.renderFlow(),y.a.createElement(F.a,{ref:function(t){e.refresher||t.invokeNewTimer(),e.refresher=t}}),y.a.createElement(U,{isLoading:a,isLoadingError:r,message:y.a.createElement("h5",null,"Please try again."),showLoading:this.showLoading,showLoadingError:this.showLoadingError,noLogos:!0}))}}]),t}(w.Component);Q.defaultProps={userDetails:null,quoteDataFromState:null};t.default=Object(k.a)(Object(O.b)(function(e){return{formState:e.insurance.formState,constants:e.insurance.constants,userDetails:e.userDetails.data,quoteDataFromState:e.business.quoteData}},function(e){return{setFormState:function(t){e(Object(S.H)(t))},doSetCategoryNavBar:function(t,n){e(Object(C.n)(t,!1,n))},doSetGetQuoteNavbar:function(t){e(Object(E.n)(t))},doSetQuoteData:function(t){e(Object(E.o)(t))}}})(Q))},191:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"k",function(){return h}),n.d(t,"l",function(){return v}),n.d(t,"i",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"j",function(){return w}),n.d(t,"f",function(){return y}),n.d(t,"b",function(){return x}),n.d(t,"h",function(){return O});var a=n(22),r=n(2),i=n(7),o=n.n(i),s=n(196),u=n(12),c=n(8),l=n(205),p=function(e){return o.a.reduce(e,function(e,t){return t.description&&!o.a.isEmpty(t.description)&&e.push(t),e},[])},d=function(e,t,n,a){var r={},i=null;try{e?(r.sessionParams=t.data,r.amountPayable=t.amount_payable,r.price=t.data.price):(r.sessionParams=a(),r.amountPayable=n.policyInfo[n.planType].net_price,r.price=n.policyInfo[n.planType].price,i=n.info.wording_url)}catch(o){console.log("Get params failed",o)}return{params:r,wording:i}},f=function(e,t,n,a,r){var i=t?n.insurer:a.info.insurer_slug,u=t?n.data.client_display_name:a.info.insurer_name,l=t?n.policy_name:a.info.product_name,p=t?Object(c.a)(n.created_at):Object(c.b)(new Date),d=o.a.startCase(t?n.data.session_params.policy_type:r.sessionParams.session_params.policy_type);return{headerData:{logo:s.a[i],logoName:"".concat(i,".svg"),insurerName:u,insurerDesc:l,data1:"Type",data1Value:e,data2:"Date",data2Value:p},coverage:d}},m=function(e){var t=e;return e.leftDetail&&e.leftDetail.attributes&&o.a.isEmpty(e.leftDetail.attributes)&&(t.leftDetail=t.rightDetail,delete t.rightDetail),e.rightDetail&&e.rightDetail.attributes&&o.a.isEmpty(e.rightDetail.attributes)&&delete t.rightDetail,t},h=function(e){try{for(var t=parseInt(e,10),n=t>1e3,a=0;n&&t>999;)t*=.001,a+=1;return"S$".concat(t).concat(["","k","m"][a])}catch(r){console.log("Parse cost failed")}return null},v=function(e){return o.a.reduce(e,function(e,t){var n=h(t);return n&&e.push(n),e},[])},b=function(e){return e?o.a.reduce(e,function(e,t){return Object(r.a)({},e,Object(a.a)({},t.name,Object(r.a)({},t)))},{}):{}},g=function(e){if(e&&e.pathname&&e.pathname.includes("mobile")){window.$(".navigation").css("cssText","display: none !important;"),window.$(".footer").css("cssText","display: none !important;");var t=setInterval(function(){return window.$("#intercom-container").css("cssText","display: none !important;")},1e3);setTimeout(function(){return clearInterval(t)},5e3)}},w=function(e,t,n,a,r){var i=t,s=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||u.b;try{if(a.params.page){var c=o.a.find(s,function(e){return o.a.includes(e.path,a.params.page)});if(t===s.SUBMITTED.index&&c.index!==s.SUBMITTED.index){var l="";r.params&&(r.params.insurer&&(l="".concat(l,"/").concat(r.params.insurer)),r.params.product&&(l="".concat(l,"/").concat(r.params.product))),r.push("/".concat(e).concat(s.SUBMITTED.path).concat(l)),i=s.SUBMITTED.index}else i<c.index?r.goBack():i=c.index}else i=0}catch(p){}return{formIndex:n!==i?i:null}},y=function(e){var t=[];try{t=o.a.reduce(e,function(e,t){return o.a.each(t.forms,function(t){e.push(t)}),e},[])}catch(n){}return t},x=function(e,t){var n=null;try{n={},o.a.each(e,function(a){var r=t[a.slug];if(r){if(Object(l.b)(a.slug,r,t,e))throw new Error("Request data is invalid");var i="date"===a.type||"end_date"===a.type?r.value.toISOString():r.value;i&&(n[a.slug]=i)}})}catch(a){}return n},O=function(e){try{var t=e.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n=t.toString().split(".");return 1===n.length?t="".concat(t,".00"):2===n.length&&1===n[1].length&&(t="".concat(t,"0")),t}catch(a){return e}}},205:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var a=n(7),r=n.n(a),i=n(91),o=[];o.multiples=[2,7,6,5,4,3,2],o.isNricValid=function(e){if(!e||""===e)return!1;if(9!==e.length)return!1;var t,n=0,a=0,i=e[0],s=e[e.length-1];if("S"!==i&&"T"!==i)return!1;if(t=e.substr(1,e.length-2),r.a.isNaN(t))return!1;for(;0!==t;)n+=t%10*o.multiples[o.multiples.length-(1+a)],a+=1,t/=10,t=Math.floor(t);return s===("S"===i?["J","Z","I","H","G","F","E","D","C","B","A"]:["G","F","E","D","C","B","A","J","Z","I","H"])[n%11]},o.isFinValid=function(e){if(!e||""===e)return!1;if(9!==e.length)return!1;var t,n=0,a=0,i=e[0],s=e[e.length-1];if("F"!==i&&"G"!==i)return!1;if(t=e.substr(1,e.length-2),r.a.isNaN(t))return!1;for(;0!==t;)n+=t%10*o.multiples[o.multiples.length-(1+a)],a+=1,t/=10,t=Math.floor(t);return s===("F"===i?["X","W","U","T","R","Q","P","N","M","L","K"]:["R","Q","P","N","M","L","K","X","W","U","T"])[n%11]};var s=function(e,t,n,a){var s=r.a.find(a,function(t){return t.slug===e});if((!s||s&&void 0===s.is_required||s&&s.is_required)&&(!t||t&&!t.value||t.value.constructor===String&&""===t.value.trim()||t.value.constructor===Array&&r.a.isEmpty(t.value)))return"Field cannot be empty!";switch(t.type){case"text":if(r.a.includes(e,"name")){if(!("name"===e?/^[^#&<>"~;$^%{}?\/|\\=:*\/[\]@]{2,60}$/:/^[^#&<>"~;$^%{}?\/|\\=:*\/[\]@]{2,30}$/).test(t.value))return"Invalid name"}if("address"===e){if(t.value&&t.value.length>30)return"Max character limit of 30 exceeded";if(n&&n.insurer_slug&&"msig"===n.insurer_slug.value){var u=r.a.split(t.value," ");if(u&&u[0]&&/^\d+$/.test(u[0]))return"First word in address cannot be a number"}if(!/^[^<>"~;$^{}?|\\=:[\]]{1,30}$/.test(t.value))return"Invalid characters in address"}if("blk_no"===e){var c="blk_no"===e?"block number":"unit number";if(!/^[^&<>"~;$^%{}?\/|\\=:*\/[\]@]{1,20}$/.test(t.value))return"Invalid ".concat(c);if("unit_no"===e&&/^\d+$/.test(t.value))return"Unit number cannot be fully numeric"}break;case"time":try{var l=t.value.split(":");if(2!==l.length)return"Time format (hh:mm) required";var p=parseInt(l[0],10),d=parseInt(l[1],10);if(!(0<=p&&p<=23&&0<=d&&d<=59))return"Invalid time"}catch(x){return"Time format (hh:mm) required"}break;case"number":if("contact"===e||"mobile_number"===e){if(!/^[89]\d{7}$/.test(t.value))return"Invalid mobile number"}if("postal"===e){if(6!==t.value.length||!/^\d+$/.test(t.value))return"Invalid postal"}break;case"select":if("marital_status"===e&&"SINGLE"!==t.value.toUpperCase()&&"MARRIED"!==t.value.toUpperCase())return"Invalid marital status";if("gender"===e&&"MALE"!==t.value.toUpperCase()&&"FEMALE"!==t.value.toUpperCase())return"Invalid gender";break;case"email":if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.value)||!Object(i.tldExists)(t.value)||t.value.length>60)return"Invalid email";break;case"image_selection":try{var f=r.a.find(s.options,function(e){return e.value===t.value});if(s.is_required&&!f)return"Invalid selection"}catch(x){}break;case"age_group":try{var m=0;if(r.a.each(t.value,function(e){m+=e.count}),m<2)return"Employee count cannot be less than 2"}catch(x){}break;case"checkbox":try{if(t.isRequired&&!t.value)return"Please agree to this field!"}catch(x){}break;case"nric":var h=n.id_type&&n.id_type.value&&n.id_type.value.includes("NRIC"),v=n.id_type&&n.id_type.value&&n.id_type.value.includes("NRIC (Singapore PR)"),b=n.id_type&&n.id_type.value&&!h;if(!(!(h&&!v&&n.nationality&&n.nationality.value)||"Singaporean"===n.nationality.value)||b&&"Singaporean"===n.nationality.value)return"Nationality & type of ID mismatch";var g=!1,w=t.value.toUpperCase();if(g=h?o.isNricValid(w):b?o.isFinValid(w):o.isNricValid(w)||o.isFinValid(w),!/^[s|g|f|t]\d{7}[a-z]$/i.test(w)||!g){var y=n.idType&&n.idType.value||"ID Number";return"Invalid ".concat(y)}}return null},u=function(e,t,n){var a={};try{var i=t||r.a.map(n,function(e){return e.slug})||[];n&&r.a.each(n,function(t){if(r.a.find(i,function(e){return e===t.slug})){var o=s(t.slug,(e||{})[t.slug],e||{},n);o&&(a[t.slug]=o)}})}catch(o){}return!r.a.isEmpty(a)&&a||{}}},262:function(e,t,n){"use strict";var a=n(28),r=n(29),i=n(31),o=n(30),s=n(32),u=n(26),c=n(1),l=n.n(c),p=n(187),d=n(86),f=(n(271),function(e){function t(e){var n;Object(a.a)(this,t);var r=(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).props.onConfirm;return n.state={text:"",jsx:null,useConfirm:!0,onConfirm:r},n.openPopupWithText=n.openPopupWithText.bind(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"openPopupWithText",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setState({text:e,useConfirm:t}),n&&this.setState({onConfirm:n}),setTimeout(this.popupRef.openPopup,10)}},{key:"openPopupWithJSX",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setState({jsx:e,useConfirm:t}),n&&this.setState({onConfirm:n}),setTimeout(this.popupRef.openPopup,10)}},{key:"render",value:function(){var e=this,t=this.state,n=t.text,a=t.jsx,r=t.useConfirm,i=t.onConfirm,o=this.props,s=o.showCancelButton,u=o.hideCloseButton;return l.a.createElement("div",{className:"popup-with-text"},l.a.createElement(d.a,{hideCloseButton:u,ref:function(t){e.popupRef=t}},l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"check-out-popup"},l.a.createElement("div",{className:"upper-container upper-margin-down"},a||l.a.createElement("p",null,l.a.createElement("span",{className:"focus-text"},n))),l.a.createElement("div",{className:"button-container"},s?l.a.createElement(p.a,{className:"checkout-button",variant:"medium-flat",width:166,height:72,onClick:function(){e.popupRef.closePopup()}},l.a.createElement("p",null,"Cancel")):null,l.a.createElement(p.a,{className:"checkout-button",variant:"medium-flat-green",width:166,height:72,onClick:function(){r&&i(),e.popupRef.closePopup()}},l.a.createElement("p",null,"Confirm")))))))}}]),t}(c.Component));f.defaultProps={onConfirm:function(){},showCancelButton:!1,hideCloseButton:!1},t.a=f},271:function(e,t,n){},284:function(e,t,n){"use strict";var a=n(28),r=n(29),i=n(31),o=n(30),s=n(32),u=n(26),c=n(1),l=n.n(c),p=n(262),d=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).oldTime=new Date,n.timeout=null,n.invokeNewTimer=n.invokeNewTimer.bind(Object(u.a)(Object(u.a)(n))),n.setTimer=n.setTimer.bind(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("mousemove",this.invokeNewTimer),window.addEventListener("keypress",this.invokeNewTimer)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),window.removeEventListener("mousemove",this.invokeNewTimer),window.removeEventListener("keypress",this.invokeNewTimer)}},{key:"setTimer",value:function(){var e=this,t=this.props,n=t.popupTimer,a=t.refreshTimer;this.timeout=setTimeout(function(){var t=window.confirm("Your session will expire due inactivity. Please click \u201cOK\u201d within ".concat(a/1e3/60," mins to continue, or \u201cCancel\u201d, if you wish to leave the page.")),r=new Date-e.oldTime;t&&r<n+a?e.invokeNewTimer():window.location.assign("/")},n),this.oldTime=new Date}},{key:"invokeNewTimer",value:function(){this.timeout&&clearTimeout(this.timeout),this.setTimer()}},{key:"render",value:function(){var e=this;return l.a.createElement(c.Fragment,null,l.a.createElement(p.a,{hideCloseButton:!0,ref:function(t){return e.popup=t}}))}}]),t}(c.Component);d.defaultProps={popupTimer:6e5,refreshTimer:12e4},t.a=d},765:function(e,t,n){e.exports=n.p+"static/media/Flow.c0acf2e8.svg"}}]);
//# sourceMappingURL=business.b28ae810.chunk.js.map