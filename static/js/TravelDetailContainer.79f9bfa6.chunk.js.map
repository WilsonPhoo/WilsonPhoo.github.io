{"version":3,"sources":["assets/images/forms/TickRounded.svg","components/FormsV3/SingleCheckBox/SingleCheckBox.js","components/Templates/DetailForm/DetailFormNew.js","components/Travel/TravelDetail.js","containers/Travel/TravelDetailContainer.js","assets/images/forms/arrow.svg","components/FormsV3/FormInputWrapper/FormInputWrapper.js","components/Forms/FormInputWrapper/FormInputWrapper.js","assets/images/forms/dateIn.svg","assets/images/forms/dateOut.svg","assets/images/forms/magnifyGlass.svg","components/Forms/Selection/Selection.js","assets/images/common/CheckIcon.svg","assets/images/forms/cross.svg","components/FormsV3/Checkbox/Checkbox.js","components/FormsV3/DropDown/DropDown.js","assets/images/forms/EditButton.svg","components/FormsV3/TextInput/TextInput.js","components/FormsV3/DatePicker/DatePicker.constants.js","components/FormsV3/DatePicker/MonthYearSelector/MonthYearSelector.js","components/FormsV3/DatePicker/DaysList/DaysList.js","components/FormsV3/DatePicker/Calender/Calender.js","components/FormsV3/DatePicker/DateInner/DateInner.js","components/FormsV3/DatePicker/DatePicker.js","components/FormsV3/DateRangePicker/DateRangePicker.js","components/FormsV3/ImageSelection/ImageSelection.js","components/FormsV3/AgeGroupV2/AgeGroupItem/AgeGroupItem.js","components/FormsV3/AgeGroupV2/AgeGroup.js","components/FormsV3/Persons/Persons.js","components/FormsV3/SelectionNew/Selection.js","components/FormsV3/FieldGenerator.js","components/Templates/Tooltip/Tooltip.js","components/Forms/TextInput/TextInput.js","assets/images/forms/triangle.svg","assets/images/common/tooltip.svg","assets/images/forms/PiggyBank.svg","components/Templates/TabView/TabViewNew.js","assets/images/forms/Label.svg","components/Templates/PiggySignUp/PiggySignUpNew.js","components/Templates/PiggySignUp/PiggyFillFormNew.js","components/Templates/RedirectPopup/RedirectPopupForm.js","components/Templates/RedirectPopup/RedirectPopup.js","components/Templates/ChangeInitialFormData/ChangeInitialFormDataNew.js"],"names":["module","exports","__webpack_require__","p","SingleCheckBox","_this$props","this","props","id","onChange","checked","checkedStyle","react_default","a","createElement","className","concat","onClick","tabIndex","onKeyDown","role","src","TickRounded","alt","children","Component","defaultProps","DetailFormNew","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","rightStickyStyle","isSignUp","handlePreSubmit","bind","assertThisInitialized","handleScroll","renderSignUp","renderSignUpButton","renderUpperRightContainer","renderBottomContainer","window","addEventListener","scrollTo","$","hide","show","removeEventListener","e","onSubmit","login","loginContainer","setSuccessCallback","setInitialIndex","popup","openPopup","upperMarker","stickyStyle","getBoundingClientRect","y","setState","_this$props2","isLoggedIn","piggyCallback","category","planDetails","PiggyFillFormNew","cashback","isPlanTotal","_this2","signUpStyle","FormsV3_SingleCheckBox_SingleCheckBox","_this3","_this$props3","checkoutButtonDesc","editForm","values","react","ref","node","upperRightContainer","logo","logoDesc","planName","planTotal","ChangeInitialFormDataNew","displayOnly","form","headerValue","valuesToListen","conditions","planSubTotal","discountPercentage","discountAmount","Button","variant","height","LabelImg","_this$props4","selectedPlanData","planType","_","startCase","_this4","errorArray","reactstrap_es","noGutters","xs","lg","connect","defaultFormName","TravelDetail","formName","generateTabs","handleSubmit","renderMain","renderFields","renderForm","tabView","isEmpty","planData","name","plan_type","value","result","num_adult","_loop","i","push","desc","numAdults","_loop2","numChildren","fields","isBlk","arguments","length","undefined","detailValues","detailErrors","onChangeDetailValue","handlePostCode","map","f","index","FieldGenerator","key","errors","fieldData","onChangeValue","type","extraInfo","extra_info","noInternalDesc","no_internal_desc","adult_0","getIndividualFields","adultFields","childFields","iFields","includes","TabViewNew","maxTabWidthPx","tabs","isDataFadeOnly","scrollTabs","Templates_DetailForm_DetailFormNew","constants","insurance","TravelDetailContainer","Logos","others","discountTripType","tripType","getFormValue","trip_type","premium","policy_info","discountData","info","discount","price","amount","insurer_slug","insurer_name","product_name","net_price","toFixed","display","error","num_children","travelRedirect","submitCallback","setFormState","doSetCategoryNavBar","FORMSTATES","DETAILFORM","fbTag","Product","gaTag","page_title","page_path","ampTag","document","body","style","backgroundColor","isNormalAddress","postcode","postal","getPostal","street","block","concatAddress","validateForm","validateRestrictionParams","toString","birth_dates","adults","adultName","errorPersons","errorTabIndex","validated","moment","birth_date","format","validateResult","reduce","person","isLast","restrictionValid","validateRestrictions","restrictionResult","valid","Click_Text","gaEvent","event_category","event_label","idtype","id_type","nationality","gender","marital","marital_status","race","occupation","wrappedInstance","goToIndex","scrollHeight","history","deep_link","integration_type","CHECKOUT","path","RedirectPop","openRedirectPopup","handleAPI","postToRedirect","location","url","redirectButton","firstChild","removeChild","range","createRange","appendChild","createContextualFragment","form_html","setTimeout","form_id","get","submit","_this$state","Travel_TravelDetail","assign","normalIndividualFields","etiqaMsigIndividualFields","getValuesToListen","RedirectPopup","noEmail","onConfirm","withRouter","dispatch","getAnonymousSession","params","setInsuranceFormState","isCategory","setCategoryNavBar","FormInputWrapper","errorString","smallMargin","isDateRange","react__WEBPACK_IMPORTED_MODULE_5___default","join","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__","setErrorString","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","clearErrorString","nextProps","prevState","refValue","message","react__WEBPACK_IMPORTED_MODULE_6___default","Selection","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","selections","formStore","storeValues","storeValuesArray","constructor","Array","resultState","forEach","v","getStoreSelection","noEmptyTextSelection","setInitialValue","prevProps","option","change","toggleResult","newSelections","noUpdate","mapValues","findKey","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","each","k","options","selectionState","CheckIcon","description","_this$props5","sizeInSM","onKeyPress","onToggleSelection","renderSelectionInsides","reactstrap__WEBPACK_IMPORTED_MODULE_10__","sm","_this$props6","_FormInputWrapper_FormInputWrapper__WEBPACK_IMPORTED_MODULE_13__","formParent","marginTop","redux_form__WEBPACK_IMPORTED_MODULE_8__","component","renderSelectionIcon","PureComponent","ownProps","getFormValues","Checkbox","_FormInputWrapper_FormInputWrapper__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_6__","maxItemsDisplay","defaultHeight","resultNullString","display_name","DropDown","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","dropList","numItemsDisplay","isMultiple","numItems","maxheight","min","isOpened","listItems","selectedString","listHeight","multipleSelectedElements","listElementsCounter","clientHeight","extraPadding","noTransition","updateDimensions","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__","handleClickOutside","renderListItems","renderTextInput","handleSelectClick","handleOnInputChange","handleSetMultipleSelectedItem","handleDestroySelected","handleInputKeyPress","handleItemKeyPress","handleChange","handleExit","handleBlur","handleFocus","isEqual","initialListItems","overrideValue","isElements","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","newHeight","selectedItemsContainer","childElementCount","bottom","top","inputValue","notForm","valueChangeCallback","inputField","event","wrapperRef","contains","target","isFromFocus","_this$state2","placeholderString","preventDefault","Math","max","listElements","focus","stopPropagation","isOpenOnly","_this$state3","item","_this$state4","_this$state5","newArr","find","selectedContainer","slice","indexOf","splice","filter","toUpperCase","relatedTarget","_this$state7","_this$props7","resultValue","isError","finalString","some","obj","toLowerCase","_this$state8","react__WEBPACK_IMPORTED_MODULE_12___default","handleSelectItemClick","onMouseUp","Cross","_this5","_this$props8","isDisableTyping","reactstrap__WEBPACK_IMPORTED_MODULE_13__","placeholder","autoComplete","disabled","_this6","_this$state9","_this$props9","maxWidth","actualListheight","dropDownOpenStyle","arrowStyle","transitionStyle","listStyle","multipleStyle","isErrorStyle","noInternalDescStyle","titleStyle","marginBottom","logoImg","MagnifyGlass","zIndexStyle","_FormInputWrapper_FormInputWrapper__WEBPACK_IMPORTED_MODULE_15__","onBlur","onFocus","minHeight","paddingTop","paddingBottom","renderMultipleSelectedElements","Arrow","react_custom_scrollbars__WEBPACK_IMPORTED_MODULE_14__","listContainer","TextInput","rows","toUpper","readOnly","inputType","errorStyle","textareaStyle","inputStyle","readOnlyStyle","dayTextList","monthTextMapping","deafultYearRange","MonthYearSelector","updateScrollPosition","currDisplayDate","dateRangeStart","isYear","getFullYear","getMonth","scrollInput","scrollTop","dateRangeEnd","setCalender","startYear","endYear","currYear","startMonth","endMonth","jsx","start","end","isSingle","dateToUse","Date","displayText","month","dateMonthInput","caret","outline","lib","autoHeight","renderYears","renderMonths","DaysList","day","renderDaysText","Calender","dateRangeEndOverwrite","isSelectingStartDate","startValue","endValue","setSelectedDate","isRange","hoverDate","setDateRangeEndOverwrite","setHoverDate","offsetDays","currFirstDay","setDate","currLastDay","currFirstDayTime","getTime","currLastDayTime","year","startIndex","getDay","endIndex","getDate","currHoverTime","startTime","endTime","startTimeToUse","endTimetoUse","fixedDateTime","nonfixedDateTime","currDay","currDayOfWeek","currTime","isSat","isSun","isStartDate","isEndDate","isWithin","isFirstDay","isLastDay","isSameDay","isDayActive","leftBlockStyle","rightBlockStyle","endBlockStyle","dayStyle","focusStyle","isBlocked","isSelectingStartDateCurr","onMouseEnter","onMouseLeave","DateInner","newEnd","maxEnd","add","toDate","setNewDisplayDate","date","isBack","isResp","setMonth","upperStyle","CloseIcon","renderMonthSelectorArrows","DatePicker_MonthYearSelector_MonthYearSelector","DatePicker_DaysList_DaysList","DatePicker_Calender_Calender","isArrowUp","inputWidth","openedStyle","dateOpenStyle","respStyle","isArrowUpToUse","transform","Triangle","listCont","renderDateInner","DatePicker","startDate","endDate","firstDay","lastDay","startDateString","endDateString","handleKeyPress","onMovement","renderInputs","renderInner","dateValidateAndUpdate","dateInnerDOM","ReactDOM","findDOMNode","dateInner","datePickerDOM","isDateEqual","updateData","innerWidth","newState","clientRect","currIsResp","left","right","isOverHeight","outerHeight","isOverFlow","width","newYear","newMonth","isStart","Promise","_ref","asyncToGenerator","regenerator_default","mark","_callee2","resolve","wrap","_context2","prev","next","currStartValue","isChooseEndDate","stop","_x3","apply","dateString","slashedStringDateToDate","charCode","openStartDateString","openEndDateString","dateToString","objectSpread","_this3$state","closeStartDateString","closeEndDateString","getDateFromDateString","newDate","endName","newStartValue","newEndValue","isNewStartInvalid","isNewEndInvalid","startValueToUse","endValueToUse","currEndValue","trueMaxEnd","currMaxEnd","onMouseDown","_this$state6","rangeStyle","selectingDateStyle","displayValue","nameToUse","defineProperty","DateIn","renderInputField","DateOut","renderDropDownArrow","DatePicker_DateInner_DateInner","renderPopup","DateRangePicker","startName","errorStringStart","errorStringEnd","FormsV3_DatePicker_DatePicker","ImageSelection","clickStyle","oldValue","inputData","newValue","is_required","title","tooltip","Tooltip","slug","itemData","isTooltip","isSelected","handleOnClick","icon_img","sub_title","renderItem","renderTitle","renderOptions","AgeGroupItem","isBlur","generateNewFormData","md","floor","AgeGroup","originalData","vo","count","getTotalCount","toConsumableArray","group","newData","size","order","AgeGroupV2_AgeGroupItem_AgeGroupItem","renderHeader","renderAgeGroupItems","Persons","setError","clearError","handleValue","wrapperRefControl","isAdd","nameAdult","nameChildren","namePlanType","nameTripType","oldNumAdult","oldNumChildren","numAdult","isSingleTrip","maxAdult","isPrex","People","selectedStyle","getOptions","doPrefill","options_constant_key","console","log","prevErrors","prevError","behavior","isRenderable","condition","isValid","FormsV3_TextInput_TextInput","FormsV3_ImageSelection_ImageSelection","FormsV3_AgeGroupV2_AgeGroup","slugs","err","FormsV3_DateRangePicker_DateRangePicker","min_date","max_date","offset_days","FormsV3_Persons_Persons","FormsV3_SelectionNew_Selection","tab_size","renderInput","isOpen","toggle","innerClassName","reactstrap__WEBPACK_IMPORTED_MODULE_7__","arrowClassName","placement","TooltipImg","mediumHeight","bigHeight","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","heightToUse","isFocus","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","renderTextArea","storeValue","addressFields","formChange","blkNo","address","input","react__WEBPACK_IMPORTED_MODULE_8___default","cols","zIndex","isPassword","isTextArea","isPostCode","passwordType","_FormInputWrapper_FormInputWrapper__WEBPACK_IMPORTED_MODULE_14__","redux_form__WEBPACK_IMPORTED_MODULE_10__","normalize","padding","initialIndex","isUsingMaxWidth","tabWidth","activeIndex","containerWidth","widthPercentage","paddingWidth","isControlVisible","fadeStyle","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__","handleResize","resizeTabHeight","renderTabs","renderTabContent","renderControls","renderSlides","renderScollableTabs","renderSelectableTabs","renderDropControls","currentTabSelection","newIndex","findIndex","tab","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","changeTab","carousel","setTriggerHeightUpdate","tabContainer","hideWidth","isVisibleNow","isForced","carouselIncoming","overrideNegation","isConstantHeight","carouselToUse","list","getElementsByTagName","sliderWrapper","parentNode","itemHeight","activeStyle","bigTextStyle","big","isWithImg","isString","img","react__WEBPACK_IMPORTED_MODULE_9___default","react__WEBPACK_IMPORTED_MODULE_9__","bigTabStyle","tabStyle","React","cloneElement","updateTabHeight","isDisableDropdown","displayStyle","react_custom_scrollbars__WEBPACK_IMPORTED_MODULE_10__","_this7","droplist","_FormsV3_DropDown_DropDown__WEBPACK_IMPORTED_MODULE_14__","_this8","charged","isOverContainer","selectedMargin","bigStyle","marginLeft","_this9","react_responsive_carousel__WEBPACK_IMPORTED_MODULE_13__","showThumbs","showIndicators","showArrows","showStatus","selectedItem","swipeable","tabName","setTabSelection","withRef","PiggySignUpNew","header","subHeader","PiggyBank","mainText","descText","mainTextToUse","descTextToUse","Templates_PiggySignUp_PiggySignUpNew","RedirectPopupForm","email","errorResult","disclaimer","reduxForm","popupRef","Popup","r","RedirectPopup_RedirectPopupForm","closPopup","closePopup","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","modal","revertFunc","isToolTip","renderDetailValues","renderEditButton","conditonValue","valuesArrayToListen","data","isArray","customFunc","extra","simplifyCost","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","aggregateDesc","comma","idx","onMouseMove","EditButton","components_FormsV3_Button_Button__WEBPACK_IMPORTED_MODULE_12__","backdropClassName","closePopUp","func","setCloseCallBack"],"mappings":"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","file":"static/js/TravelDetailContainer.79f9bfa6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/TickRounded.15656c53.svg\";","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport TickRounded from 'assets/images/forms/TickRounded.svg';\r\n\r\nimport './SingleCheckBox.scss';\r\n\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass SingleCheckBox extends Component {\r\n  render() {\r\n    const {\r\n      id,\r\n      onChange,\r\n      checked,\r\n    } = this.props;\r\n\r\n    const checkedStyle = checked ? 'single-check-box-checked' : 'single-check-box-non-checked';\r\n\r\n    return (\r\n      <div\r\n        className={`single-check-box-container ${checkedStyle}`}\r\n        id={id}\r\n        onClick={onChange}\r\n        checked={checked}\r\n        tabIndex={-1}\r\n        onKeyDown={null}\r\n        role=\"button\"\r\n      >\r\n        <div className=\"bg\" />\r\n        <div className=\"box\">\r\n          <img src={TickRounded} alt=\"Tick.svg\" />\r\n        </div>\r\n        <p className=\"desc\">\r\n          {this.props.children}\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSingleCheckBox.defaultProps = {\r\n  checked: false,\r\n};\r\n\r\n\r\nSingleCheckBox.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  checked: PropTypes.bool,\r\n};\r\n\r\nexport default SingleCheckBox;\r\n","/**\r\n * DetailForm.js\r\n * Wrapper that contains the piggy login and the\r\n * right container to checkout or choose plan\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport $ from 'jquery';\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { Row, Col } from 'reactstrap';\r\n\r\nimport LabelImg from 'assets/images/forms/Label.svg';\r\n\r\n// Import Insurer Logos\r\nimport PiggyFillForm from 'components/Templates/PiggySignUp/PiggyFillFormNew';\r\nimport ChangeInitialFormDataNew from 'components/Templates/ChangeInitialFormData/ChangeInitialFormDataNew';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport SingleCheckBox from 'components/FormsV3/SingleCheckBox/SingleCheckBox';\r\n\r\nimport './DetailFormNew.scss';\r\n\r\nclass DetailFormNew extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      rightStickyStyle: 'right-scroll',\r\n      isSignUp: false,\r\n    };\r\n\r\n    this.handlePreSubmit = this.handlePreSubmit.bind(this);\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n    this.renderSignUp = this.renderSignUp.bind(this);\r\n    this.renderSignUpButton = this.renderSignUpButton.bind(this);\r\n    this.renderUpperRightContainer = this.renderUpperRightContainer.bind(this);\r\n    this.renderBottomContainer = this.renderBottomContainer.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n    window.scrollTo(0, 0);\r\n    this.handleScroll();\r\n\r\n    if ($('#intercom-container')) {\r\n      $('#intercom-container').hide();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if ($('#intercom-container')) {\r\n      $('#intercom-container').show();\r\n    }\r\n\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  handlePreSubmit(e) {\r\n    const { isSignUp } = this.state;\r\n    const { onSubmit, login } = this.props;\r\n    if (isSignUp) {\r\n      login.loginContainer.setSuccessCallback(() => onSubmit(e));\r\n      login.loginContainer.setInitialIndex(2);\r\n      login.popup.openPopup();\r\n      return;\r\n    }\r\n    onSubmit(e);\r\n  }\r\n\r\n  handleScroll() {\r\n    if (this.upperMarker) {\r\n      const { rightStickyStyle } = this.state;\r\n      const stickyStyle = this.upperMarker.getBoundingClientRect().y < 84 ? 'right-sticky' : 'right-scroll';\r\n\r\n      if (rightStickyStyle !== stickyStyle) {\r\n        this.setState({\r\n          rightStickyStyle: stickyStyle,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  renderSignUp() {\r\n    const {\r\n      isLoggedIn,\r\n      login,\r\n      piggyCallback,\r\n      category,\r\n      planDetails,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className=\"piggy\">\r\n        <PiggyFillForm\r\n          isLoggedIn={isLoggedIn}\r\n          cashback={planDetails && planDetails.cashback}\r\n          category={category}\r\n          onClick={() => {\r\n            login.loginContainer.setSuccessCallback(piggyCallback);\r\n            login.loginContainer.setInitialIndex(1);\r\n            login.popup.openPopup();\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderSignUpButton(isPlanTotal) {\r\n    const { isSignUp } = this.state;\r\n    const { isLoggedIn } = this.props;\r\n    const signUpStyle = isPlanTotal ? '' : 'no-total';\r\n\r\n    if (!isLoggedIn) {\r\n      return (\r\n        <div className={`sign-up ${signUpStyle}`}>\r\n          <SingleCheckBox\r\n            id=\"checkbox-detail-form\"\r\n            onChange={() => this.setState({ isSignUp: !isSignUp })}\r\n            checked={!!isSignUp}\r\n          >\r\n            Sign Up\r\n          </SingleCheckBox>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  renderUpperRightContainer() {\r\n    const { rightStickyStyle } = this.state;\r\n\r\n    const {\r\n      planDetails,\r\n      checkoutButtonDesc,\r\n      editForm,\r\n      category,\r\n      values,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className=\"d-none d-lg-block\">\r\n          {this.renderSignUp()}\r\n        </div>\r\n        <div\r\n          className={`upper-right-container ${rightStickyStyle}`}\r\n        >\r\n          <div ref={node => this.upperRightContainer = node} />\r\n          <div className=\"logo-container\">\r\n            <div className=\"logo-inner-container\">\r\n              <img className=\"company-logo\" src={planDetails.logo} alt={`${planDetails.logoDesc}.png`} />\r\n            </div>\r\n            <p className=\"plan-name\">{planDetails.planName}</p>\r\n            {this.renderSignUpButton(planDetails.planTotal)}\r\n            <ChangeInitialFormDataNew\r\n              values={values}\r\n              displayOnly={editForm.displayOnly}\r\n              form={category}\r\n              headerValue={editForm.headerValue}\r\n              valuesToListen={editForm.valuesToListen}\r\n              conditions={editForm.conditions}\r\n            />\r\n          </div>\r\n          <div className=\"submit-container\">\r\n            <div className=\"sign-up-container\">\r\n              {\r\n                planDetails.planSubTotal ?\r\n                  <div className=\"cost-container\">\r\n                    <p>\r\n                      <span className=\"total-text\">SubTotal</span>\r\n                      <span className=\"cost-text\">{planDetails.planSubTotal}</span>\r\n                    </p>\r\n                    <p className=\"gst-text\">GST 7% included</p>\r\n                  </div>\r\n                :\r\n                  null\r\n              }\r\n              {\r\n                planDetails.discountPercentage && planDetails.discountAmount ?\r\n                  <div className=\"cost-container\">\r\n                    <p>\r\n                      <span className=\"total-text\">Discount {planDetails.discountPercentage}</span>\r\n                      <span className=\"cost-text\">{planDetails.discountAmount}</span>\r\n                    </p>\r\n                  </div>\r\n                :\r\n                  null\r\n              }\r\n            </div>\r\n            <div className=\"divider\" />\r\n            <div className=\"sign-up-container\">\r\n              {\r\n                planDetails.planTotal ?\r\n                  <div className=\"cost-container\">\r\n                    <p>\r\n                      <span className=\"total-text\">Total</span>\r\n                      <span className=\"final-cost-text\">{planDetails.planTotal}</span>\r\n                    </p>\r\n                  </div>\r\n                :\r\n                  null\r\n              }\r\n              <Button\r\n                variant=\"medium-flat-green\"\r\n                height={48}\r\n                onClick={this.handlePreSubmit}\r\n              >\r\n                <p>{checkoutButtonDesc}</p>\r\n              </Button>\r\n              {\r\n                planDetails.cashback ?\r\n                  <div className=\"cashback-earned-container\">\r\n                    <img src={LabelImg} alt=\"Label.svg\" />\r\n                    <span>Earn {planDetails.cashback} Cashback</span>\r\n                  </div>\r\n                :\r\n                  null\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderBottomContainer() {\r\n    const { rightStickyStyle } = this.state;\r\n\r\n    const {\r\n      planDetails,\r\n      checkoutButtonDesc,\r\n      selectedPlanData,\r\n      isLoggedIn,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <div\r\n          className={`bottom-container ${rightStickyStyle}`}\r\n        >\r\n          <div className=\"bottom-inner-container\">\r\n            {\r\n              planDetails.planTotal ?\r\n                <div className=\"price-container\">\r\n                  <h5>{planDetails.planName}</h5>\r\n                  {selectedPlanData && selectedPlanData.planType && <h6>{_.startCase(selectedPlanData.planType)}</h6>}\r\n                  <h4>\r\n                    <span>${planDetails.planTotal}</span>\r\n                    {\r\n                      planDetails.planSubTotal && <span className=\"price\">{planDetails.planSubTotal}</span>\r\n                    }\r\n                  </h4>\r\n                </div>\r\n              :\r\n                null\r\n            }\r\n            <div className={`resp-button-container ${isLoggedIn ? 'big' : 'small'}`}>\r\n              {this.renderSignUpButton(planDetails.planTotal)}\r\n              <Button\r\n                variant=\"medium-flat-green\"\r\n                height={48}\r\n                onClick={this.handlePreSubmit}\r\n              >\r\n                <p>{checkoutButtonDesc}</p>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { errorArray } = this.props;\r\n    return (\r\n      <Fragment>\r\n        <Row className=\"detail-main-container-new\" noGutters>\r\n          <div ref={node => this.upperMarker = node} />\r\n          <Col xs={12} lg={7}>\r\n            <div className=\"d-block d-lg-none\">\r\n              {this.renderSignUp()}\r\n            </div>\r\n            <div className=\"detail-left-container\">\r\n              {this.props.children}\r\n              {errorArray}\r\n            </div>\r\n          </Col>\r\n          <Col lg={5} className=\"d-none d-lg-block\">\r\n            {this.renderUpperRightContainer()}\r\n          </Col>\r\n          <Col xs={12} className=\"d-block d-lg-none\">\r\n            {this.renderBottomContainer()}\r\n          </Col>\r\n        </Row>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nDetailFormNew.defaultProps = {\r\n  errorArray: null,\r\n  checkoutButtonDesc: 'Checkout',\r\n  editForm: null,\r\n  selectedPlanData: null,\r\n  values: null,\r\n};\r\n\r\nDetailFormNew.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  piggyCallback: PropTypes.func.isRequired,\r\n  planDetails: PropTypes.object.isRequired,\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  errorArray: PropTypes.array,\r\n  login: PropTypes.object.isRequired,\r\n  checkoutButtonDesc: PropTypes.string,\r\n  category: PropTypes.string.isRequired,\r\n  editForm: PropTypes.object,\r\n  selectedPlanData: PropTypes.object,\r\n  values: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  login: state.login,\r\n});\r\n\r\nexport default connect(mapStateToProps)(DetailFormNew);\r\n","/**\r\n * TravelDetail.js\r\n * Detail View for travel\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Row } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport FieldGenerator from 'components/FormsV3/FieldGenerator';\r\nimport DetailForm from 'components/Templates/DetailForm/DetailFormNew';\r\nimport TabView from 'components/Templates/TabView/TabViewNew';\r\n\r\nconst defaultFormName = 'adult_0';\r\n\r\nclass TravelDetail extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      formName: defaultFormName,\r\n    };\r\n\r\n    this.generateTabs = this.generateTabs.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n    this.renderMain = this.renderMain.bind(this);\r\n    this.renderFields = this.renderFields.bind(this);\r\n    this.renderForm = this.renderForm.bind(this);\r\n  }\r\n\r\n  async handleSubmit() {\r\n    const { handleSubmit } = this.props;\r\n    const errorArray = await handleSubmit(this.tabView);\r\n\r\n    if (!_.isEmpty(errorArray)) {\r\n      this.setState({\r\n        errorArray,\r\n      });\r\n    }\r\n  }\r\n\r\n  generateTabs() {\r\n    const { planData, values } = this.props;\r\n    const name = values.plan_type.value === 'Group' ? 'Person' : 'Adult';\r\n\r\n    const result = [];\r\n    if (values.num_adult && values.num_adult.value) {\r\n      for (let i = 0; i < planData.numAdults; ++i) {\r\n        result.push({\r\n          desc: `${name} ${i + 1}`,\r\n          onClick: () => { this.setState({ formName: `adult_${i}` }); },\r\n        });\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < planData.numChildren; ++i) {\r\n      result.push({\r\n        desc: `Child ${i + 1}`,\r\n        onClick: () => { this.setState({ formName: `child_${i}` }); },\r\n      });\r\n    }\r\n    return result;\r\n  }\r\n\r\n  renderFields(fields, isBlk = false) {\r\n    const { formName } = this.state;\r\n\r\n    const {\r\n      detailValues,\r\n      detailErrors,\r\n      onChangeDetailValue,\r\n      handlePostCode,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        {\r\n          _.map(fields, (f, index) => (\r\n            <FieldGenerator\r\n              key={`business-form-${index}`}\r\n              values={detailValues[formName]}\r\n              errors={detailErrors[formName]}\r\n              fieldData={f}\r\n              onChangeValue={(type, name, value) => onChangeDetailValue(type, name, value, formName)}\r\n              extraInfo={f.extra_info && <p>{f.extra_info}</p>}\r\n              noInternalDesc={f.no_internal_desc}\r\n              handlePostCode={() => handlePostCode(detailValues.adult_0, onChangeDetailValue, !isBlk, 'adult_0')}\r\n            />\r\n          ))\r\n        }\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderMain() {\r\n    const { formName } = this.state;\r\n    const {\r\n      getIndividualFields,\r\n      adultFields,\r\n      childFields,\r\n      selectedPlanData,\r\n    } = this.props;\r\n\r\n    if (formName === defaultFormName) {\r\n      const iFields = getIndividualFields(selectedPlanData);\r\n      return this.renderFields(iFields.fields, iFields.isBlk);\r\n    }\r\n\r\n    if (_.includes(formName, 'child_')) {\r\n      return this.renderFields(childFields);\r\n    }\r\n\r\n    return this.renderFields(adultFields);\r\n  }\r\n\r\n  renderForm() {\r\n    const { values } = this.props;\r\n    if (values.plan_type && values.plan_type.value === 'Individual') {\r\n      return (\r\n        <Row className=\"main-form\" noGutters>\r\n          {this.renderMain()}\r\n        </Row>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <TabView\r\n        ref={node => this.tabView = node}\r\n        maxTabWidthPx={128}\r\n        className=\"tabview-margin-top\"\r\n        tabs={this.generateTabs()}\r\n        isDataFadeOnly\r\n        name=\"travel-detail-tab\"\r\n        scrollTabs\r\n      >\r\n        <Row className=\"main-form\" noGutters>\r\n          {this.renderMain()}\r\n        </Row>\r\n      </TabView>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { errorArray } = this.state;\r\n    const {\r\n      isLoggedIn,\r\n      planDetails,\r\n      piggyCallback,\r\n      selectedPlanData,\r\n      values,\r\n      valuesToListen,\r\n      conditions,\r\n    } = this.props;\r\n\r\n    return (\r\n      <DetailForm\r\n        category=\"travel\"\r\n        values={values}\r\n        // planChange={() => {}}\r\n        onSubmit={this.handleSubmit}\r\n        planDetails={planDetails}\r\n        selectedPlanData={selectedPlanData}\r\n        isLoggedIn={isLoggedIn}\r\n        piggyCallback={piggyCallback}\r\n        errorArray={errorArray}\r\n        editForm={{\r\n          displayOnly: true,\r\n          valuesToListen: valuesToListen(values),\r\n          conditions,\r\n        }}\r\n      >\r\n        {this.renderForm()}\r\n      </DetailForm>\r\n    );\r\n  }\r\n}\r\n\r\nTravelDetail.defaultProps = {\r\n  detailValues: null,\r\n  detailErrors: null,\r\n  values: null,\r\n};\r\n\r\nTravelDetail.propTypes = {\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  planDetails: PropTypes.object.isRequired,\r\n  piggyCallback: PropTypes.func.isRequired,\r\n  planData: PropTypes.object.isRequired,\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  getIndividualFields: PropTypes.func.isRequired,\r\n  selectedPlanData: PropTypes.object.isRequired,\r\n  childFields: PropTypes.array.isRequired,\r\n  adultFields: PropTypes.array.isRequired,\r\n  valuesToListen: PropTypes.func.isRequired,\r\n  conditions: PropTypes.object.isRequired,\r\n  handlePostCode: PropTypes.func.isRequired,\r\n  values: PropTypes.object,\r\n  detailValues: PropTypes.object,\r\n  detailErrors: PropTypes.object,\r\n  onChangeDetailValue: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  constants: state.insurance.constants,\r\n});\r\n\r\nexport default connect(mapStateToProps)(TravelDetail);\r\n","/**\r\n * TravelDetailContainer.js\r\n * The detail container for travel\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport $ from 'jquery';\r\nimport document from 'global/document';\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Import Insurer Logos\r\nimport Logos from 'assets/images/InsurerLogos';\r\n\r\nimport RedirectPopup from 'components/Templates/RedirectPopup/RedirectPopup';\r\nimport TravelDetail from 'components/Travel/TravelDetail';\r\n\r\nimport { setCategoryNavBar } from 'actions/navActions';\r\nimport { postToRedirect, validateRestrictions } from 'actions/travelActions';\r\nimport { setInsuranceFormState, getAnonymousSession, getPostal, FORMSTATES } from 'actions/insuranceActions';\r\n\r\nimport { fbTag, gaTag, gaEvent, ampTag } from 'lib/tagFunctions';\r\nimport { getFormValue } from 'lib/helperFunctions';\r\n\r\nimport {\r\n  normalIndividualFields,\r\n  etiqaMsigIndividualFields,\r\n  adultFields,\r\n  childFields,\r\n  getValuesToListen,\r\n  conditions,\r\n  getIndividualFields,\r\n} from './Travel.constants';\r\n\r\nclass TravelDetailContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { values, selectedPlanData, planType } = this.props;\r\n\r\n    let planDetails = {\r\n      logo: Logos.others,\r\n      logoDesc: '',\r\n      planName: '',\r\n      planTotal: null,\r\n    };\r\n\r\n    try {\r\n      let discountTripType = 'default';\r\n      const tripType = getFormValue(values.trip_type);\r\n      if (tripType) {\r\n        discountTripType = tripType === 'Single Trip' ? 'single' : 'annual';\r\n      }\r\n\r\n      const { premium } = selectedPlanData.policy_info[planType];\r\n      const discountData = selectedPlanData.info.discount ? selectedPlanData.info.discount[discountTripType] : null;\r\n      const discount = discountData ? premium.price * discountData.amount : null;\r\n\r\n      planDetails = {\r\n        logo: Logos[selectedPlanData.info.insurer_slug],\r\n        logoDesc: `${selectedPlanData.info.insurer_name}.svg`,\r\n        planName: selectedPlanData.info.product_name,\r\n        planTotal: `$${premium.net_price.toFixed(2)}`,\r\n        planSubTotal: `$${premium.price.toFixed(2)}`,\r\n        discountPercentage: discountData ? discountData.display : null,\r\n        discountAmount: discount && discount !== 0 ? `$${(premium.price * discountData.amount).toFixed(2)}` : null,\r\n        cashback: selectedPlanData.info.cashback ? `$${(selectedPlanData.info.cashback * premium.net_price).toFixed(2)}` : null,\r\n      };\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    if (values) {\r\n      this.state = {\r\n        planData: {\r\n          planType,\r\n          numAdults: getFormValue(values.num_adult),\r\n          numChildren: getFormValue(values.num_children),\r\n        },\r\n        planDetails,\r\n      };\r\n    }\r\n\r\n    this.travelRedirect = this.travelRedirect.bind(this);\r\n    this.submitCallback = this.submitCallback.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handlePostCode = this.handlePostCode.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { setFormState, doSetCategoryNavBar } = this.props;\r\n    setFormState(FORMSTATES.DETAILFORM.index);\r\n    fbTag('PPS2 - Pageview - Travel - DetailForm', { Product: 'Travel' });\r\n    gaTag({\r\n      page_title: 'Travel - Detail Form',\r\n      page_path: '/travel/detailform',\r\n    });\r\n    ampTag('TravelDetailsS');\r\n    document.body.style.backgroundColor = '#F9FAFF';\r\n    doSetCategoryNavBar(true);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { doSetCategoryNavBar } = this.props;\r\n    document.body.style.backgroundColor = '#FFFFFF';\r\n    doSetCategoryNavBar(false);\r\n  }\r\n\r\n  async handlePostCode(values, onChangeDetailValue, isNormalAddress, formName = null) {\r\n    try {\r\n      if (values) {\r\n        const postcode = values.postal.value;\r\n        const result = await getPostal(postcode);\r\n        if (result) {\r\n          // const streetName = result.name === '' ? '' : `${result.name} `;\r\n          const street = result.street === '' ? '' : `${result.street} `;\r\n          const block = result.block === '' ? '' : `${result.block} `;\r\n          // let concatAddress = `${block}${streetName}${street}`;\r\n          let concatAddress = `${block}${street}`;\r\n\r\n          if (!isNormalAddress) {\r\n            onChangeDetailValue('text', 'blk_no', result.block, formName);\r\n            concatAddress = street;\r\n          }\r\n\r\n          onChangeDetailValue('text', 'address', concatAddress, formName);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  async handleSubmit(tabView) {\r\n    const {\r\n      values,\r\n      detailValues,\r\n      selectedPlanData,\r\n      validateForm,\r\n    } = this.props;\r\n\r\n    try {\r\n      const numAdults = getFormValue(values.num_adult);\r\n      const numChildren = getFormValue(values.num_children);\r\n\r\n      const iFields = getIndividualFields(selectedPlanData);\r\n\r\n      const validateRestrictionParams = {\r\n        plan_type: getFormValue(values.plan_type),\r\n        trip_type: getFormValue(values.trip_type),\r\n        num_adult: numAdults.toString(),\r\n        num_children: numChildren.toString(),\r\n        insurer_slug: selectedPlanData.info.insurer_slug,\r\n        product_name: selectedPlanData.info.product_name,\r\n        birth_dates: {\r\n          adults: [],\r\n          children: [],\r\n        },\r\n      };\r\n\r\n      const adultName = getFormValue(values.plan_type) === 'Group' ? 'Person' : 'Adult';\r\n\r\n      let errorArray = null;\r\n      const errorPersons = [];\r\n      let errorTabIndex = null;\r\n\r\n      let validated = await validateForm('adult_0', null, iFields.fields, { insurer_slug: selectedPlanData.info.insurer_slug });\r\n      if (!validated) {\r\n        errorPersons.push(`${adultName} 1`);\r\n        errorTabIndex = 0;\r\n      } else {\r\n        validateRestrictionParams.birth_dates.adults.push(moment(getFormValue(detailValues.adult_0.birth_date)).format('DD/MM/YYYY'));\r\n      }\r\n\r\n      for (let i = 1; i < numAdults; ++i) {\r\n        const name = `adult_${i}`;\r\n        // eslint-disable-next-line\r\n        const validateResult = await validateForm(name, null, adultFields);\r\n        validated = validated ? validateResult : false;\r\n\r\n        if (!validateResult) {\r\n          errorPersons.push(`${adultName} ${i + 1}`);\r\n          errorTabIndex = i;\r\n        } else {\r\n          validateRestrictionParams.birth_dates.adults.push(moment(getFormValue(detailValues[name].birth_date)).format('DD/MM/YYYY'));\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < numChildren; ++i) {\r\n        const name = `child_${i}`;\r\n        // eslint-disable-next-line\r\n        const validateResult = await validateForm(name, null, childFields);\r\n        validated = validated ? validateResult : false;\r\n\r\n        if (!validateResult) {\r\n          errorPersons.push(`Child ${i + 1}`);\r\n          errorTabIndex = numAdults + i;\r\n        } else {\r\n          validateRestrictionParams.birth_dates.children.push(moment(getFormValue(detailValues[name].birth_date)).format('DD/MM/YYYY'));\r\n        }\r\n      }\r\n\r\n      if (!validated && errorPersons.length > 0) {\r\n        errorArray = _.reduce(errorPersons, (result, person, index) => {\r\n          const isLast = index === errorPersons.length - 1;\r\n          return `${result} ${person}${isLast ? '' : ','}`;\r\n        }, 'Forms not filled for: ');\r\n        errorArray = [<p className=\"error-string\" key=\"error-1\">{errorArray}</p>];\r\n      }\r\n\r\n      let restrictionValid = false;\r\n      if (validated) {\r\n        const restrictionResult = await validateRestrictions(validateRestrictionParams);\r\n        restrictionValid = restrictionResult && restrictionResult.valid;\r\n\r\n        if (!restrictionResult) {\r\n          errorArray = [<p className=\"error-string\" key=\"error-1\">Birth date validation failed! Please try again.</p>];\r\n        } else if (!restrictionResult.valid) {\r\n          errorArray = _.map(restrictionResult.errors, (error, index) => (\r\n            <p className=\"error-string\" key={`error-${index}`}>{error}</p>\r\n          ));\r\n        }\r\n\r\n        if (restrictionValid) {\r\n          fbTag('PPS2 - ButtonClick - Travel - DetailForm_Checkout', { Product: 'Travel', Click_Text: 'Checkout' });\r\n          gaEvent('Travel - DetailForm - Checkout', {\r\n            event_category: 'Travel',\r\n            event_label: 'Travel - DetailForm - Checkout',\r\n          });\r\n          ampTag('TravelCheckoutA', {\r\n            idtype: getFormValue(detailValues.adult_0.id_type),\r\n            nationality: getFormValue(detailValues.adult_0.nationality),\r\n            gender: getFormValue(detailValues.adult_0.gender),\r\n            marital: getFormValue(detailValues.adult_0.marital_status),\r\n            race: getFormValue(detailValues.adult_0.race),\r\n            occupation: getFormValue(detailValues.adult_0.occupation),\r\n          });\r\n\r\n          this.submitCallback();\r\n          return [];\r\n        }\r\n      }\r\n\r\n      if (tabView && errorTabIndex !== null) {\r\n        tabView.wrappedInstance.goToIndex(errorTabIndex);\r\n      }\r\n\r\n      if (!restrictionValid) {\r\n        window.scrollTo(0, document.body.scrollHeight);\r\n      }\r\n\r\n      return errorArray;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  submitCallback() {\r\n    const { selectedPlanData, history } = this.props;\r\n    // console.log(selectedPlanData);\r\n    if (selectedPlanData.info.deep_link.integration_type === 'webview') {\r\n      this.RedirectPop.openRedirectPopup();\r\n\r\n      return;\r\n    }\r\n\r\n    this.props.setFormState(FORMSTATES.CHECKOUT.index);\r\n    history.push(`/travel${FORMSTATES.CHECKOUT.path}`);\r\n  }\r\n\r\n  async travelRedirect() {\r\n    const {\r\n      values,\r\n      detailValues,\r\n      planType,\r\n      selectedPlanData,\r\n      handleAPI,\r\n    } = this.props;\r\n\r\n\r\n    const result = await handleAPI(() => postToRedirect(values, detailValues, selectedPlanData, planType));\r\n    if (result) {\r\n      if (selectedPlanData.info.insurer_slug === 'fwd') {\r\n        window.location = result.url;\r\n      } else if (selectedPlanData.info.insurer_slug === 'etiqa' || selectedPlanData.info.insurer_slug === 'tiq') {\r\n        while (this.redirectButton.firstChild) {\r\n          this.redirectButton.removeChild(this.redirectButton.firstChild);\r\n        }\r\n        const range = document.createRange();\r\n        this.redirectButton.appendChild(range.createContextualFragment(result.form_html));\r\n\r\n        setTimeout(() => $(`#${result.form_id}`).get(0).submit(), 300);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { planData, planDetails } = this.state;\r\n    // const { history } = this.props;\r\n\r\n    return (\r\n      <div className=\"travel-detail-container\">\r\n        <TravelDetail\r\n          {...this.props}\r\n          planData={planData}\r\n          planDetails={planDetails}\r\n          // changePlan={() => {\r\n          //   history.goBack();\r\n          //   fbTag('PPS2 - ButtonClick - Travel - DetailForm_ChangePlan', { Product: 'Travel', Click_Text: 'ChangePlan' });\r\n          //   gaEvent('Travel - DetailForm - ChangePlan', {\r\n          //     event_category: 'Travel',\r\n          //     event_label: 'Travel - DetailForm - ChangePlan',\r\n          //   });\r\n          // }}\r\n          normalIndividualFields={normalIndividualFields}\r\n          etiqaMsigIndividualFields={etiqaMsigIndividualFields}\r\n          adultFields={adultFields}\r\n          childFields={childFields}\r\n          valuesToListen={getValuesToListen}\r\n          conditions={conditions}\r\n          getIndividualFields={getIndividualFields}\r\n          handlePostCode={this.handlePostCode}\r\n          handleSubmit={this.handleSubmit}\r\n        />\r\n        <RedirectPopup\r\n          ref={node => this.RedirectPop = node}\r\n          noEmail\r\n          onConfirm={this.travelRedirect}\r\n        />\r\n        <div className=\"redirect-button\" ref={node => this.redirectButton = node} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTravelDetailContainer.defaultProps = {\r\n};\r\n\r\nTravelDetailContainer.propTypes = {\r\n  setFormState: PropTypes.func.isRequired,\r\n  isLoggedIn: PropTypes.bool.isRequired,\r\n  piggyCallback: PropTypes.func.isRequired,\r\n  selectedPlanData: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  doSetCategoryNavBar: PropTypes.func.isRequired,\r\n};\r\n\r\n// const mapStateToProps = state => ({\r\n// });\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getAnonymousSession: (params) => {\r\n    dispatch(getAnonymousSession(params, true));\r\n  },\r\n  setFormState: (state) => {\r\n    dispatch(setInsuranceFormState(state));\r\n  },\r\n  doSetCategoryNavBar: (isCategory) => {\r\n    dispatch(setCategoryNavBar(isCategory));\r\n  },\r\n});\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(TravelDetailContainer));\r\n","module.exports = __webpack_public_path__ + \"static/media/arrow.6b6008ba.svg\";","/**\r\n * FormInputWrapper.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './FormInputWrapper.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass FormInputWrapper extends Component {\r\n  render() {\r\n    const {\r\n      extraInfo,\r\n      desc,\r\n      errorString,\r\n      smallMargin,\r\n      className,\r\n      isDateRange,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div\r\n        className={['input-wrapper-main-v3 input-wrapper-error', smallMargin && 'my-1', className].join(' ')}\r\n      >\r\n        {\r\n          // eslint-disable-next-line\r\n          isDateRange ?\r\n            <div className=\"d-flex\">\r\n              <p className=\"input-wrapper-desc w-50\">Start Date</p>\r\n              <p className=\"input-wrapper-desc w-50\">End Date</p>\r\n            </div>\r\n          :\r\n          desc !== null ?\r\n            <p className=\"input-wrapper-desc\">{desc}</p>\r\n          :\r\n            null\r\n        }\r\n        {this.props.children}\r\n        {\r\n          extraInfo !== null ?\r\n            <div className=\"extra-info-container\">\r\n              {extraInfo}\r\n            </div>\r\n          :\r\n            null\r\n        }\r\n        {\r\n          errorString !== null ?\r\n            <div className=\"input-wrapper-error-text\">\r\n              <p>{errorString}</p>\r\n            </div>\r\n          :\r\n            null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFormInputWrapper.defaultProps = {\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  smallMargin: false,\r\n  className: '',\r\n  isDateRange: false,\r\n};\r\n\r\n\r\nFormInputWrapper.propTypes = {\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  smallMargin: PropTypes.bool,\r\n  className: PropTypes.string,\r\n  isDateRange: PropTypes.bool,\r\n};\r\n\r\nexport default FormInputWrapper;\r\n","/**\r\n * FormInputWrapper.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './FormInputWrapper.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass FormInputWrapper extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (prevState.errorString !== nextProps.errorString) {\r\n      return {\r\n        errorString: nextProps.errorString,\r\n        refValue: nextProps.refValue,\r\n      };\r\n    }\r\n\r\n    if (nextProps.validateForm && prevState.errorString && prevState.refValue !== nextProps.refValue) {\r\n      nextProps.validateForm();\r\n      return {\r\n        errorString: null,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      errorString: null,\r\n    };\r\n\r\n    this.setErrorString = this.setErrorString.bind(this);\r\n    this.clearErrorString = this.clearErrorString.bind(this);\r\n  }\r\n\r\n  setErrorString(message) {\r\n    this.setState({\r\n      errorString: message,\r\n    });\r\n  }\r\n\r\n  clearErrorString() {\r\n    this.setState({\r\n      errorString: null,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      errorString,\r\n    } = this.state;\r\n\r\n    const {\r\n      desc,\r\n      extraInfo,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className=\"input-wrapper-main input-wrapper-error\">\r\n        {\r\n          desc !== null ?\r\n            <p className=\"input-wrapper-desc\">{desc}</p>\r\n          :\r\n            null\r\n        }\r\n        {this.props.children}\r\n        {\r\n          extraInfo !== null ?\r\n            <div className=\"extra-info-container\">\r\n              {extraInfo}\r\n            </div>\r\n          :\r\n            null\r\n        }\r\n        {\r\n          errorString !== null ?\r\n            <p className=\"input-wrapper-error-text\">\r\n              {errorString}\r\n            </p>\r\n          :\r\n            null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFormInputWrapper.defaultProps = {\r\n  desc: null,\r\n  extraInfo: null,\r\n};\r\n\r\n\r\nFormInputWrapper.propTypes = {\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n};\r\n\r\nexport default FormInputWrapper;\r\n","module.exports = __webpack_public_path__ + \"static/media/dateIn.1b60a0c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/dateOut.98be354a.svg\";","module.exports = __webpack_public_path__ + \"static/media/magnifyGlass.4cd15637.svg\";","/**\r\n * Selection.js\r\n * Selection with dynamic content\r\n *\r\n * @version 0.0.1\r\n * @author [Jia Hao](jiahao@policypal.com)\r\n */\r\nimport React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { Field, getFormValues } from 'redux-form';\r\nimport { Row, Col } from 'reactstrap';\r\nimport _ from 'lodash';\r\n\r\nimport CheckIcon from 'assets/images/common/CheckIcon.svg';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './Selection.scss';\r\n\r\nconst marginTopOffset = 10;\r\n\r\n/**\r\n * Custom Selection Class\r\n */\r\nclass Selection extends PureComponent {\r\n  static getStoreSelection(formStore, name) {\r\n    const storeValues = formStore[name];\r\n    if (!storeValues) {\r\n      return null;\r\n    }\r\n\r\n    const storeValuesArray = storeValues.constructor === Array ? storeValues : [storeValues];\r\n    const resultState = {};\r\n    _.forEach(storeValuesArray, (v) => {\r\n      if (v) { resultState[v] = true; }\r\n    });\r\n    return resultState;\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { resultState, selections } = prevState;\r\n    const { formStore, name } = nextProps;\r\n    if (formStore && formStore[name] !== resultState) {\r\n      return {\r\n        resultState: formStore[name],\r\n        selections: Selection.getStoreSelection(formStore, name) || selections,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selections: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {\r\n      name,\r\n      formStore,\r\n      noEmptyTextSelection,\r\n    } = this.props;\r\n\r\n    if (formStore && formStore[name]) {\r\n      this.setState({\r\n        selections: Selection.getStoreSelection(formStore, name),\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    if (noEmptyTextSelection) {\r\n      this.setInitialValue();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { name, formStore } = this.props;\r\n    if (name !== prevProps.name) {\r\n      const value = formStore[name];\r\n      if (!value) {\r\n        this.setInitialValue();\r\n      }\r\n    }\r\n  }\r\n\r\n  onToggleSelection(option) {\r\n    const { selections } = this.state;\r\n    const {\r\n      name,\r\n      type,\r\n      change,\r\n      noEmptyTextSelection,\r\n    } = this.props;\r\n\r\n    const { key } = option;\r\n\r\n    const toggleResult = !this.state.selections[key];\r\n\r\n    let newSelections = {};\r\n    let resultState = null;\r\n    let noUpdate = false;\r\n    switch (type) {\r\n      case 'text-selection':\r\n      case 'radio':\r\n        if (!noEmptyTextSelection || (noEmptyTextSelection && !selections[key])) {\r\n          newSelections = _.mapValues(selections, () => false);\r\n          newSelections[key] = toggleResult;\r\n          resultState = _.findKey(newSelections, v => v);\r\n        } else {\r\n          noUpdate = true;\r\n        }\r\n        break;\r\n      case 'checkbox':\r\n        newSelections = Object.assign({}, selections, { [key]: toggleResult });\r\n        resultState = [];\r\n        _.each(newSelections, (v, k) => {\r\n          if (v) { resultState.push(k); }\r\n        });\r\n        break;\r\n      default: break;\r\n    }\r\n\r\n    if (!noUpdate) {\r\n      this.setState({ selections: newSelections });\r\n      change(name, resultState);\r\n    }\r\n  }\r\n\r\n  setInitialValue() {\r\n    const {\r\n      options,\r\n      change,\r\n      name,\r\n    } = this.props;\r\n\r\n    const newSelections = { [options[0].key]: true };\r\n    this.setState({\r\n      selections: newSelections,\r\n    });\r\n    change(name, _.findKey(newSelections, v => v));\r\n  }\r\n\r\n  renderSelectionInsides(option, selectionState) {\r\n    const { type } = this.props;\r\n\r\n    switch (type) {\r\n      case 'radio':\r\n        return <div className={`${type}-inner-${selectionState}`} />;\r\n      case 'checkbox':\r\n        return <img src={CheckIcon} className={`checkbox-inner-${selectionState}`} alt=\"check\" />;\r\n      case 'text-selection':\r\n        return <div className=\"description py-3\">{option.description}</div>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  renderSelectionIcon(option) {\r\n    const { selections } = this.state;\r\n    const { type, sizeInSM } = this.props;\r\n    const { key, description } = option;\r\n    const isSelected = (selections[key] || false);\r\n    const selectionState = (isSelected) ? 'highlighted' : 'default';\r\n\r\n    const children = (\r\n      <div\r\n        role=\"button\"\r\n        onKeyPress={() => {}}\r\n        onClick={() => this.onToggleSelection(option)}\r\n        tabIndex={0}\r\n        className={`${type}-outer-${selectionState}`}\r\n      >\r\n        {this.renderSelectionInsides(option, selectionState)}\r\n      </div>\r\n    );\r\n\r\n    if (type === 'text-selection') {\r\n      return (\r\n        <Col sm={sizeInSM} key={key} className=\"text-sel-col\">\r\n          <div className=\"single-selection\" key={key}>\r\n            {children}\r\n          </div>\r\n        </Col>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Col sm={sizeInSM} key={key}>\r\n        <div className=\"single-selection\">\r\n          {children}\r\n          <div className=\"description\">{description}</div>\r\n        </div>\r\n      </Col>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      name,\r\n      options,\r\n      type,\r\n      desc,\r\n      extraInfo,\r\n      errorString,\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        ref={node => (this.formParent = node)}\r\n        extraInfo={\r\n          <div style={{ marginTop: -marginTopOffset }}>\r\n            {extraInfo}\r\n          </div>\r\n        }\r\n        errorString={errorString}\r\n      >\r\n        <Field name={name} component={() => <div />} />\r\n        <div className=\"selection\">\r\n          <Row className={(type === 'text-selection') ? 'text-sel-container' : ''}>\r\n            {\r\n              _.map(options, option => this.renderSelectionIcon(option))\r\n            }\r\n          </Row>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nSelection.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  options: PropTypes.array.isRequired, // each option is { key, description }\r\n  change: PropTypes.func.isRequired,\r\n  sizeInSM: PropTypes.number,\r\n  desc: PropTypes.string,\r\n  formStore: PropTypes.object,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  noEmptyTextSelection: PropTypes.bool,\r\n};\r\n\r\nSelection.defaultProps = {\r\n  sizeInSM: 12,\r\n  desc: null,\r\n  formStore: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  noEmptyTextSelection: false,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  formStore: (getFormValues(ownProps.form)(state)),\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Selection);\r\n","module.exports = __webpack_public_path__ + \"static/media/CheckIcon.02ce5aca.svg\";","module.exports = __webpack_public_path__ + \"static/media/cross.8df9f59e.svg\";","import React, { Component } from 'react';\r\nimport { CustomInput } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './Checkbox.scss';\r\n\r\nexport default class Checkbox extends Component {\r\n  render() {\r\n    const {\r\n      name,\r\n      value,\r\n      desc,\r\n      onChange,\r\n      errorString,\r\n      extraInfo,\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        errorString={errorString}\r\n        extraInfo={extraInfo}\r\n        smallMargin\r\n      >\r\n        <div className=\"checkbox-container-v3\">\r\n          <CustomInput\r\n            id={name}\r\n            className=\"checkbox-input\"\r\n            type=\"checkbox\"\r\n            onChange={() => onChange('checkbox', name, !value)}\r\n            checked={!!value}\r\n          />\r\n          {/* eslint-disable-next-line */}\r\n          <p\r\n            className=\"checkbox-input-desc\"\r\n            // onClick={() => onChange('checkbox', name, !value)}\r\n          >\r\n            {desc}\r\n          </p>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nCheckbox.defaultProps = {\r\n  value: null,\r\n  errorString: null,\r\n  extraInfo: null,\r\n};\r\n\r\nCheckbox.propTypes = {\r\n  value: PropTypes.bool,\r\n  name: PropTypes.string.isRequired,\r\n  desc: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  errorString: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n};\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport document from 'global/document';\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { Input } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport Arrow from '../../../assets/images/forms/arrow.svg';\r\nimport Cross from '../../../assets/images/forms/cross.svg';\r\nimport MagnifyGlass from '../../../assets/images/forms/magnifyGlass.svg';\r\n\r\nimport './DropDown.scss';\r\nimport './MultipleSelectDropDown.scss';\r\n\r\n// How many items to display\r\nconst maxItemsDisplay = 5;\r\n// Height for dropdown\r\nconst defaultHeight = 48;\r\n// Padding for when multiple items overflow\r\nconst extraPaddingForMultiple = 5;\r\n// Error text to display when error\r\nconst resultNullString = {\r\n  display_name: 'No results found',\r\n  value: null,\r\n};\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DropDown extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const {\r\n      dropList,\r\n      numItemsDisplay,\r\n    } = nextProps;\r\n\r\n    if (!_.isEqual(dropList, prevState.initialListItems)) {\r\n      const height = defaultHeight;\r\n      const numItems = numItemsDisplay || maxItemsDisplay;\r\n      const maxheight = (_.min([dropList ? dropList.length : 0, numItems]) + 1) * height;\r\n\r\n      return {\r\n        initialListItems: dropList,\r\n        listItems: dropList,\r\n        maxheight,\r\n        listHeight: maxheight,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // dropList - The passed down dropdown list items\r\n    // placeholderString - Placeholder string for input\r\n    // size - Size of this control\r\n    // numItemsDisplay - Max items to display on view\r\n    const {\r\n      dropList,\r\n      numItemsDisplay,\r\n      value,\r\n      isMultiple,\r\n    } = this.props;\r\n\r\n    // Get the control height\r\n    const height = defaultHeight;\r\n    // Get number of items to display\r\n    const numItems = numItemsDisplay || maxItemsDisplay;\r\n    // Get the max height of list\r\n    const maxheight = (_.min([dropList ? dropList.length : 0, numItems]) + 1) * height;\r\n    // isOpened - Whether dropdown is opened\r\n    // isError - Whether there is input error\r\n    // listItems - The actual dropdown list\r\n    // selectedString - The selected item string\r\n    // height - Preferred Control height\r\n    // numItemsDisplay - How many items to display\r\n    // maxheight - Max height of the list\r\n    // listHeight - Height of the list. (Items count + control)\r\n    // multipleSelectedElements - Array of multiple selected items\r\n    // listElementsCounter - Up down selection position\r\n    // clientHeight - Actual height of the control\r\n    this.state = {\r\n      isOpened: false,\r\n      listItems: dropList,\r\n      selectedString: (!isMultiple && value && value.display_name) || '',\r\n      height,\r\n      numItemsDisplay: numItems,\r\n      maxheight,\r\n      listHeight: maxheight,\r\n      multipleSelectedElements: null,\r\n      listElementsCounter: -1,\r\n      clientHeight: height,\r\n      extraPadding: 0,\r\n      noTransition: true,\r\n    };\r\n\r\n    this.updateDimensions = this.updateDimensions.bind(this);\r\n    this.handleClickOutside = this.handleClickOutside.bind(this);\r\n    this.renderListItems = this.renderListItems.bind(this);\r\n    this.renderTextInput = this.renderTextInput.bind(this);\r\n    this.handleSelectClick = this.handleSelectClick.bind(this);\r\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\r\n    this.handleSetMultipleSelectedItem = this.handleSetMultipleSelectedItem.bind(this);\r\n    this.handleDestroySelected = this.handleDestroySelected.bind(this);\r\n    this.handleInputKeyPress = this.handleInputKeyPress.bind(this);\r\n    this.handleItemKeyPress = this.handleItemKeyPress.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleExit = this.handleExit.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.handleFocus = this.handleFocus.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidMount\r\n   */\r\n  componentDidMount() {\r\n    const { value, isMultiple } = this.props;\r\n\r\n    // Add Handler to handle click outside of screen\r\n    document.addEventListener('mousedown', this.handleClickOutside);\r\n    // Update control height on resize in case it squeezes down\r\n    window.addEventListener('resize', this.updateDimensions);\r\n    // Update for the first time\r\n    this.updateDimensions();\r\n\r\n    const { overrideValue } = this.props;\r\n\r\n    if (value) {\r\n      if (isMultiple) {\r\n        this.setState({\r\n          multipleSelectedElements: value,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (overrideValue) {\r\n      this.handleChange(overrideValue);\r\n    }\r\n\r\n    this.setState({ noTransition: false });\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidUpdate\r\n   */\r\n  componentDidUpdate(prevProps) {\r\n    const { multipleSelectedElements } = this.state;\r\n    const { overrideValue, value, isMultiple } = this.props;\r\n\r\n    // Use override mode if not using form\r\n    if (!_.isEqual(overrideValue, prevProps.overrideValue)) {\r\n      this.handleChange(overrideValue);\r\n    }\r\n\r\n    const isElements = !_.isEmpty(multipleSelectedElements);\r\n\r\n    if (!_.isEqual(value, prevProps.value)) {\r\n      this.setState({\r\n        selectedString: (value && value.display_name) || '',\r\n      });\r\n    }\r\n\r\n    if (value) {\r\n      if (!isElements || (isElements && !_.isEqual(value, multipleSelectedElements))) {\r\n        if (isMultiple) {\r\n          this.setState({\r\n            multipleSelectedElements: [...value],\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    // For re-render fix where multiple changed to single\r\n    if (isElements && !value) {\r\n      this.setState({\r\n        multipleSelectedElements: null,\r\n      });\r\n    }\r\n    // Update control height if necessary, since the\r\n    // height may change after render\r\n    this.updateDimensions();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentWillUnmount\r\n   */\r\n  componentWillUnmount() {\r\n    // Remove Handler to handle click outside of screen\r\n    document.removeEventListener('mousedown', this.handleClickOutside);\r\n    window.removeEventListener('resize', this.updateDimensions);\r\n  }\r\n\r\n  /**\r\n   * Get client height of the selection container\r\n   * to determine the height of the whole control.\r\n   * (For multiple only)\r\n   *\r\n   * @param {object} event\r\n   */\r\n  updateDimensions() {\r\n    const { isMultiple } = this.props;\r\n\r\n    // Only multiple will expand\r\n    if (!isMultiple) {\r\n      return;\r\n    }\r\n\r\n    const {\r\n      clientHeight,\r\n      height,\r\n      extraPadding,\r\n    } = this.state;\r\n\r\n    let newHeight = defaultHeight;\r\n    try {\r\n      newHeight = this.selectedItemsContainer.children[this.selectedItemsContainer.childElementCount - 1].getBoundingClientRect().bottom - this.selectedItemsContainer.children[0].getBoundingClientRect().top;\r\n      newHeight = newHeight < defaultHeight ? defaultHeight : newHeight + 10;\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-empty\r\n    }\r\n\r\n    // if client height is not same as DOM, update with padding if expanded\r\n    if (clientHeight !== newHeight) {\r\n      this.setState({\r\n        clientHeight: newHeight,\r\n        extraPadding: newHeight - 2 * extraPadding > height ? extraPaddingForMultiple : 0,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange(inputValue) {\r\n    const {\r\n      name,\r\n      onChange,\r\n      notForm,\r\n      valueChangeCallback,\r\n      isMultiple,\r\n    } = this.props;\r\n\r\n    if (notForm) {\r\n      if (valueChangeCallback) {\r\n        valueChangeCallback(inputValue);\r\n      }\r\n      this.inputField.value = inputValue.display_name;\r\n      return;\r\n    }\r\n\r\n    onChange(isMultiple ? 'multiple_select' : 'select', name, inputValue);\r\n  }\r\n\r\n  /**\r\n   * End selection if click on outside\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleClickOutside(event) {\r\n    const { isOpened } = this.state;\r\n\r\n    // If clicked outside, go to exit\r\n    if (\r\n      isOpened &&\r\n      this.wrapperRef &&\r\n      !this.wrapperRef.contains(event.target)\r\n    ) {\r\n      // Close it\r\n      this.setState({\r\n        isOpened: false,\r\n      });\r\n\r\n      // Unset from focus\r\n      this.isFromFocus = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle on enter key\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleInputKeyPress(event) {\r\n    const {\r\n      isOpened,\r\n      listElementsCounter,\r\n      selectedString,\r\n      multipleSelectedElements,\r\n    } = this.state;\r\n\r\n    const { isMultiple, placeholderString } = this.props;\r\n\r\n    // If pressed on enter, go to exit\r\n    if (event.key === 'Enter') {\r\n      this.handleExit();\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    // Press down arrow from input\r\n    if (event.key === 'ArrowDown') {\r\n      if (isOpened) {\r\n        if (listElementsCounter === -1) {\r\n          event.preventDefault();\r\n        }\r\n        this.handleItemKeyPress(event);\r\n      } else {\r\n        this.setState({\r\n          isOpened: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (\r\n      isMultiple &&\r\n      event.key === 'Backspace' &&\r\n      (selectedString === '' || selectedString === placeholderString) &&\r\n      !_.isEmpty(multipleSelectedElements)\r\n    ) {\r\n      this.handleDestroySelected(multipleSelectedElements[multipleSelectedElements.length - 1]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Key press on list items\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleItemKeyPress(event, inputValue) {\r\n    const {\r\n      listElementsCounter,\r\n    } = this.state;\r\n\r\n    let index = listElementsCounter;\r\n\r\n    // If click enter on list item\r\n    if (event.key === 'Enter') {\r\n      // Focus input field\r\n      // this.inputField.focus();\r\n      // Handle exit with the item value\r\n      this.handleExit(inputValue);\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    // Navigate list with up down arrow\r\n    if (event.key === 'ArrowDown') {\r\n      index = listElementsCounter + 1;\r\n    } else if (event.key === 'ArrowUp') {\r\n      index = listElementsCounter - 1;\r\n    }\r\n\r\n    // Cap index within list\r\n    index = Math.max(0, Math.min(index, this.listElements.length - 1));\r\n    // Focus on the next item\r\n    this.listElements[index].focus();\r\n\r\n    // If index changed, update state\r\n    if (index !== listElementsCounter) {\r\n      this.setState({\r\n        listElementsCounter: index,\r\n      });\r\n    }\r\n\r\n    event.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Handle toggling of dropdown list\r\n   *\r\n   * @param {bool} isOpenOnly - Only can open\r\n   */\r\n  handleSelectClick(isOpenOnly = false) {\r\n    const {\r\n      isOpened,\r\n      selectedString,\r\n      maxheight,\r\n      multipleSelectedElements,\r\n    } = this.state;\r\n\r\n    const {\r\n      dropList,\r\n      isMultiple,\r\n    } = this.props;\r\n\r\n    // If this frame is not from focus\r\n    if (!this.isFromFocus) {\r\n      // Set open state\r\n      if (!isOpenOnly || (isOpenOnly && !isOpened)) {\r\n        this.setState({\r\n          isOpened: !isOpened,\r\n        });\r\n      }\r\n\r\n      // If previously invalid, reset list\r\n      if (!selectedString || selectedString === resultNullString.display_name) {\r\n        this.setState({\r\n          listItems: dropList,\r\n          listHeight: maxheight,\r\n          listElementsCounter: -1,\r\n        });\r\n\r\n        if (!isMultiple || (isMultiple && _.isEmpty(multipleSelectedElements))) {\r\n          this.handleChange(null);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Unlock from focus\r\n    this.isFromFocus = false;\r\n  }\r\n\r\n  /**\r\n   * Handles selection of dropdown item\r\n   *\r\n   * @param {object} event - Click event\r\n   * @param {string} item - Input string\r\n   */\r\n  handleSelectItemClick(event, item) {\r\n    // If click on null item return\r\n    if (item.value === resultNullString.value) {\r\n      return;\r\n    }\r\n\r\n    const { numItemsDisplay, height } = this.state;\r\n    const { dropList } = this.props;\r\n\r\n    const {\r\n      isMultiple,\r\n    } = this.props;\r\n\r\n    // Reset drop list items to all, set selected string,\r\n    // and reset any errors\r\n    this.setState({\r\n      listItems: dropList,\r\n      listHeight: (_.min([(dropList && dropList.length) || 0, numItemsDisplay]) + 1) * height,\r\n    });\r\n\r\n    // this.formParent.clearErrorString();\r\n\r\n    if (isMultiple) {\r\n      // If multiple dropdown, reset selected string\r\n      this.setState({\r\n        selectedString: '',\r\n      });\r\n\r\n      // Set input field text to empty\r\n      this.inputField.value = '';\r\n      // Refocus input bar\r\n      // this.inputField.focus();\r\n\r\n      // Set multiple selected item\r\n      this.handleSetMultipleSelectedItem(item);\r\n    } else {\r\n      this.setState({\r\n        selectedString: item.display_name,\r\n      }, () => {\r\n        // Toggle the dropdown menu\r\n        this.handleSelectClick();\r\n\r\n        // Update redux state\r\n        this.handleChange(item);\r\n\r\n        // Close dropdown\r\n        this.setState({\r\n          isOpened: false,\r\n        });\r\n      });\r\n    }\r\n\r\n    event.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Selection of multi select dropdown\r\n   *\r\n   * @param {string} item\r\n   */\r\n  handleSetMultipleSelectedItem(item) {\r\n    const { multipleSelectedElements, height } = this.state;\r\n\r\n    const newArr = multipleSelectedElements || [];\r\n\r\n    // If item does not exists in the selected list\r\n    if (!_.find(newArr, i => i.value === item.value)) {\r\n      // Add item to list\r\n      newArr.push(item);\r\n\r\n      // Change state\r\n      this.setState({\r\n        multipleSelectedElements: newArr,\r\n        clientHeight: this.selectedContainer ? this.selectedContainer.clientHeight : height,\r\n        isOpened: false,\r\n      });\r\n\r\n      // Update redux store\r\n      this.handleChange(newArr);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroys multi selected item\r\n   *\r\n   * @param {string} item\r\n   */\r\n  handleDestroySelected(item) {\r\n    const { height } = this.state;\r\n\r\n    const { multipleSelectedElements } = this.state;\r\n    // Duplicate clean copy\r\n    let newArr = multipleSelectedElements.slice();\r\n    // Delete chosen item\r\n    const index = newArr.indexOf(item);\r\n    newArr.splice(index, 1);\r\n    // Set null if empty\r\n    newArr = newArr.length === 0 ? null : newArr;\r\n\r\n    // Update state\r\n    this.setState({\r\n      multipleSelectedElements: newArr,\r\n      clientHeight: this.selectedContainer ? this.selectedContainer.clientHeight : height,\r\n    });\r\n\r\n    // Update redux state\r\n    this.handleChange(newArr);\r\n    this.isFromFocus = false;\r\n  }\r\n\r\n  /**\r\n   * Handles on input changes\r\n   *\r\n   * @param {object} event\r\n   */\r\n  async handleOnInputChange(event) {\r\n    // Get current input value\r\n    const { value } = event.target;\r\n\r\n    const { dropList } = this.props;\r\n    const { height, numItemsDisplay } = this.state;\r\n\r\n    // Attempt to match value to list\r\n    const result = _.filter(\r\n      dropList,\r\n      item => item.display_name.toString().toUpperCase().indexOf(value.toString().toUpperCase()) === 0,\r\n    );\r\n\r\n    // Get length of new list, min 1 which is error string\r\n    const length = result.length ? result.length : 1;\r\n\r\n    // Set new list items, height of dropdown list,\r\n    // Force open list on type, and set selected string to value\r\n    this.setState({\r\n      listItems: result.length ? result : [resultNullString],\r\n      listHeight: (_.min([length, numItemsDisplay]) + 1) * height,\r\n      isOpened: true,\r\n      selectedString: value,\r\n      listElementsCounter: -1,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle Blur event\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleBlur(event) {\r\n    // Check if focus event contains children\r\n    const isChildren = this.wrapperRef.contains(event.relatedTarget);\r\n\r\n    // If outside of children\r\n    if (!isChildren) {\r\n      // Close dropdown\r\n      this.setState({\r\n        isOpened: false,\r\n      });\r\n      // Handle exit case\r\n      this.handleExit();\r\n      this.isFromFocus = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle Focus event\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleFocus(event) {\r\n    const { isOpened } = this.state;\r\n\r\n    // Check if focus event contains children\r\n    const isChildren = this.wrapperRef.contains(event.relatedTarget);\r\n    // If not from children\r\n    if (!isChildren) {\r\n      // Open dropdown\r\n      if (!isOpened) {\r\n        this.handleSelectClick(true);\r\n        // Prevent double click\r\n        this.isFromFocus = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle exit selection of entered input\r\n   *\r\n   * @param {string} inputValue - From selection\r\n   */\r\n  handleExit(inputValue = null) {\r\n    const {\r\n      selectedString,\r\n      listItems,\r\n    } = this.state;\r\n\r\n    const {\r\n      placeholderString,\r\n      dropList,\r\n      isMultiple,\r\n    } = this.props;\r\n\r\n    // Result string if match original list\r\n    let resultValue = null;\r\n    // If input causes an error\r\n    let isError = false;\r\n    // The string to use\r\n    const finalString = inputValue !== null ? inputValue.display_name : selectedString;\r\n\r\n    // If possible valid input\r\n    if (\r\n      finalString &&\r\n      finalString !== placeholderString &&\r\n      finalString !== ''\r\n    ) {\r\n      // Attempt to match finalString to original list\r\n      listItems.some((obj) => {\r\n        const result = obj.display_name.toString().toLowerCase() === finalString.toString().toLowerCase();\r\n        if (result) {\r\n          resultValue = obj;\r\n        }\r\n\r\n        return result;\r\n      });\r\n\r\n      // Check error if no match\r\n      isError = !resultValue;\r\n      // Set result string to match value or error value\r\n      resultValue = isError ? null : resultValue;\r\n\r\n      if (isMultiple) {\r\n        if (!isError) {\r\n          this.handleSetMultipleSelectedItem(resultValue);\r\n        }\r\n\r\n        this.inputField.value = '';\r\n      } else {\r\n        // Update redux value\r\n        this.handleChange(resultValue);\r\n\r\n        this.setState({\r\n          isOpened: false,\r\n        });\r\n      }\r\n    }\r\n\r\n    // If not error, reset list to list all,\r\n    // Set selected string and error if possible\r\n    // and close the list\r\n    this.setState({\r\n      listItems: isError ? listItems : dropList,\r\n      selectedString: (resultValue && resultValue.display_name) || '',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Renders the dropdown list items\r\n   */\r\n  renderListItems() {\r\n    const { listItems, height } = this.state;\r\n    this.listElements = [];\r\n\r\n    const result = _.map(listItems, item => (\r\n      <li key={item.value}>\r\n        <div\r\n          className=\"list-item text-style\"\r\n          style={{ height }}\r\n          onClick={event => this.handleSelectItemClick(event, item)}\r\n          role=\"button\"\r\n          tabIndex={-1}\r\n          onKeyDown={(event) => { this.handleItemKeyPress(event, item); }}\r\n          ref={(node) => { if (node !== null) this.listElements.push(node); }}\r\n        >\r\n          <p>{item.display_name}</p>\r\n        </div>\r\n      </li>\r\n    ));\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Render the multiple selected elements in the input container\r\n   */\r\n  renderMultipleSelectedElements() {\r\n    const { multipleSelectedElements } = this.state;\r\n    const { isMultiple } = this.props;\r\n\r\n    if (!isMultiple) {\r\n      return null;\r\n    }\r\n\r\n    return _.map(multipleSelectedElements, item => (\r\n      <div className=\"selected-item-container\" key={item.value}>\r\n        <div className=\"selected-item\">\r\n          <p>{item.display_name}</p>\r\n          <button\r\n            type=\"button\"\r\n            className=\"selected-item-destroy\"\r\n            onMouseUp={() => this.handleDestroySelected(item)}\r\n            tabIndex={-1}\r\n          >\r\n            <img src={Cross} alt=\"cross.svg\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  renderTextInput() {\r\n    const { selectedString } = this.state;\r\n    const {\r\n      isMultiple,\r\n      isDisableTyping,\r\n      placeholderString,\r\n      name,\r\n      notForm,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Input\r\n        value={selectedString || ''}\r\n        name={name}\r\n        placeholder={((isMultiple || notForm) && placeholderString) || ''}\r\n        autoComplete=\"off\"\r\n        ref={node => (this.inputField = node)}\r\n        onChange={event => this.handleOnInputChange(event)}\r\n        onKeyDown={event => this.handleInputKeyPress(event)}\r\n        onClick={() => this.handleSelectClick(true)}\r\n        disabled={isDisableTyping}\r\n      />\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Render component\r\n   */\r\n  render() {\r\n    const {\r\n      isOpened,\r\n      listHeight,\r\n      height,\r\n      clientHeight,\r\n      extraPadding,\r\n      noTransition,\r\n    } = this.state;\r\n\r\n    // const isOpened = true;\r\n\r\n    if (height && listHeight) {\r\n      const {\r\n        maxWidth,\r\n        isMultiple,\r\n        desc,\r\n        extraInfo,\r\n        errorString,\r\n        noInternalDesc,\r\n        logo,\r\n        placeholderString,\r\n        value,\r\n      } = this.props;\r\n\r\n      // Actual height of the whole control\r\n      const actualheight = isOpened ? listHeight : height;\r\n      // Actual height of only the list\r\n      const actualListheight = actualheight - height;\r\n\r\n      // Dynamic styles\r\n      const dropDownOpenStyle = isOpened ? 'dropdown-container-opened' : 'dropdown-container-closed';\r\n      const arrowStyle = isOpened ? 'angle-up' : 'angle-down';\r\n      const transitionStyle = noTransition ? '' : 'do-transition';\r\n      const listStyle = isOpened ? `list-opened ${transitionStyle}` : `list-closed ${transitionStyle}`;\r\n      const multipleStyle = isMultiple || logo ? 'multi-drop-v3' : '';\r\n      const isErrorStyle = errorString ? 'error' : '';\r\n\r\n      const noInternalDescStyle = noInternalDesc ? 'no-internal-desc' : '';\r\n\r\n      const titleStyle = value ? 'focused-title' : '';\r\n      const marginTop = clientHeight > defaultHeight || isOpened ? clientHeight : 0;\r\n      const marginBottom = clientHeight > defaultHeight ? 6 : 0;\r\n\r\n      const logoImg = isMultiple ? MagnifyGlass : logo;\r\n      const zIndexStyle = isOpened ? 'drop-open' : 'drop-close';\r\n\r\n      return (\r\n        <FormInputWrapper\r\n          desc={desc}\r\n          extraInfo={extraInfo}\r\n          errorString={errorString}\r\n        >\r\n          <div\r\n            className={`dropdown-container-v3 ${zIndexStyle} ${multipleStyle} ${noInternalDescStyle}`}\r\n            style={{\r\n              height: clientHeight,\r\n              maxWidth,\r\n              marginBottom,\r\n            }}\r\n            ref={node => (this.wrapperRef = node)}\r\n            onBlur={event => this.handleBlur(event)}\r\n            onFocus={event => this.handleFocus(event)}\r\n          >\r\n            <div\r\n              className={`dropdown-container ${dropDownOpenStyle} ${isErrorStyle}`}\r\n            >\r\n              {\r\n                isMultiple || noInternalDesc ? null :\r\n                <div className={`title-header ${titleStyle}`}>\r\n                  {placeholderString}\r\n                </div>\r\n              }\r\n              <div\r\n                className=\"selected-container\"\r\n                onKeyDown={event => this.handleInputKeyPress(event)}\r\n                role=\"button\"\r\n                style={{ minHeight: height }}\r\n                tabIndex={-1}\r\n                ref={node => (this.selectedContainer = node)}\r\n              >\r\n                {\r\n                  logoImg ?\r\n                    <div className=\"icon-container\" style={{ minHeight: height }}>\r\n                      <img\r\n                        src={logoImg}\r\n                        alt=\"DropdownImage.svg\"\r\n                      />\r\n                    </div>\r\n                  :\r\n                    null\r\n                }\r\n                <div\r\n                  className=\"selected-items-container\"\r\n                  ref={node => this.selectedItemsContainer = node}\r\n                  style={{ paddingTop: extraPadding, paddingBottom: extraPadding }}\r\n                >\r\n                  {this.renderMultipleSelectedElements()}\r\n                  <div className=\"selected-text selected-text-multi\">\r\n                    {this.renderTextInput()}\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  className=\"selected-arrow\"\r\n                  onClick={() => this.handleSelectClick()}\r\n                  onKeyPress={() => {}}\r\n                  role=\"button\"\r\n                  tabIndex={-1}\r\n                >\r\n                  <img\r\n                    src={Arrow}\r\n                    alt=\"arrow.svg\"\r\n                    className={`selected-arrow-style ${arrowStyle}`}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <Scrollbars\r\n                className={`list-container ${listStyle}`}\r\n                style={{\r\n                  minHeight: actualListheight,\r\n                  marginTop,\r\n                }}\r\n                ref={node => this.listContainer = node}\r\n                tabIndex={-1}\r\n              >\r\n                {\r\n                  isOpened ?\r\n                    this.renderListItems()\r\n                  :\r\n                    null\r\n                }\r\n              </Scrollbars>\r\n            </div>\r\n          </div>\r\n        </FormInputWrapper>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nDropDown.defaultProps = {\r\n  maxWidth: '100%',\r\n  numItemsDisplay: maxItemsDisplay,\r\n  isMultiple: false,\r\n  desc: null,\r\n  isDisableTyping: false,\r\n  extraInfo: null,\r\n  notForm: false,\r\n  overrideValue: null,\r\n  errorString: null,\r\n  dropList: null,\r\n  valueChangeCallback: null,\r\n  name: null,\r\n  noInternalDesc: false,\r\n  logo: null,\r\n  value: null,\r\n};\r\n\r\nDropDown.propTypes = {\r\n  dropList: PropTypes.array,\r\n  placeholderString: PropTypes.string.isRequired,\r\n  maxWidth: PropTypes.string,\r\n  name: PropTypes.string,\r\n  numItemsDisplay: PropTypes.number,\r\n  isMultiple: PropTypes.bool,\r\n  desc: PropTypes.string,\r\n  isDisableTyping: PropTypes.bool,\r\n  extraInfo: PropTypes.object,\r\n  notForm: PropTypes.bool,\r\n  overrideValue: PropTypes.string,\r\n  errorString: PropTypes.string,\r\n  valueChangeCallback: PropTypes.func,\r\n  noInternalDesc: PropTypes.bool,\r\n  logo: PropTypes.string,\r\n  onChange: PropTypes.func.isRequired,\r\n  value: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n};\r\n\r\nexport default DropDown;\r\n","module.exports = __webpack_public_path__ + \"static/media/EditButton.cbb0b06a.svg\";","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Input } from 'reactstrap';\r\nimport MagnifyGlass from 'assets/images/forms/magnifyGlass.svg';\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './TextInput.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass TextInput extends Component {\r\n  render() {\r\n    const {\r\n      name,\r\n      desc,\r\n      placeholderString,\r\n      extraInfo,\r\n      errorString,\r\n      value,\r\n      onChange,\r\n      handlePostCode,\r\n      rows,\r\n      noInternalDesc,\r\n      type,\r\n      toUpper,\r\n      readOnly,\r\n    } = this.props;\r\n\r\n    // eslint-disable-next-line\r\n    const inputType = type === 'password' ? 'password' : type === 'textarea' ? 'textarea' : type === 'number' ? 'number' : '';\r\n\r\n    const errorStyle = errorString ? 'error' : '';\r\n    const titleStyle = value ? 'focused-title' : '';\r\n    const textareaStyle = inputType === 'textarea' ? 'textarea-padding' : '';\r\n    const inputStyle = inputType === 'textarea' ? '' : 'absolute-input';\r\n    const noInternalDescStyle = noInternalDesc ? 'no-internal-desc' : '';\r\n    const readOnlyStyle = readOnly ? 'read-only' : '';\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        extraInfo={extraInfo}\r\n        errorString={errorString}\r\n      >\r\n        <div className=\"position-relative\">\r\n          <div\r\n            className={`text-input-container-v3 ${textareaStyle} ${errorStyle} ${readOnlyStyle}`}\r\n          >\r\n            {\r\n              !noInternalDesc &&\r\n              <div className={`title-header ${titleStyle}`}>\r\n                {placeholderString}\r\n              </div>\r\n            }\r\n            <div className={['text-input', noInternalDescStyle, inputStyle].join(' ')}>\r\n              <Input\r\n                className=\"text\"\r\n                type={inputType}\r\n                placeholder={(noInternalDesc && placeholderString) || ''}\r\n                name={name}\r\n                value={value || ''}\r\n                onChange={e => onChange(type, name, e.target.value && toUpper ? e.target.value.toUpperCase() : e.target.value)}\r\n                rows={rows}\r\n                disabled={readOnly}\r\n              />\r\n            </div>\r\n            {\r\n              type === 'postal' && handlePostCode ?\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"postcode\"\r\n                  onClick={handlePostCode}\r\n                >\r\n                  <img src={MagnifyGlass} alt=\"magGlass.svg\" />\r\n                </button>\r\n              :\r\n                null\r\n            }\r\n          </div>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nTextInput.defaultProps = {\r\n  value: null,\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  handlePostCode: null,\r\n  rows: 4,\r\n  noInternalDesc: false,\r\n  toUpper: false,\r\n  readOnly: false,\r\n};\r\n\r\n\r\nTextInput.propTypes = {\r\n  placeholderString: PropTypes.string.isRequired,\r\n  value: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  onChange: PropTypes.func.isRequired,\r\n  handlePostCode: PropTypes.func,\r\n  rows: PropTypes.number,\r\n  noInternalDesc: PropTypes.bool,\r\n  type: PropTypes.string.isRequired,\r\n  toUpper: PropTypes.bool,\r\n  readOnly: PropTypes.bool,\r\n};\r\n\r\nexport default TextInput;\r\n","// Day Text for display\r\nexport const dayTextList = [\r\n  'SU',\r\n  'MO',\r\n  'TU',\r\n  'WE',\r\n  'TH',\r\n  'FR',\r\n  'SA',\r\n];\r\n\r\n// Month text for display\r\nexport const monthTextMapping = [\r\n  'January',\r\n  'Feburary',\r\n  'March',\r\n  'April',\r\n  'May',\r\n  'June',\r\n  'July',\r\n  'August',\r\n  'September',\r\n  'October',\r\n  'November',\r\n  'December',\r\n];\r\n\r\n// Height for medium dropdown\r\nexport const defaultHeight = 48;\r\n// Default year range if not user defined\r\nexport const deafultYearRange = 100;\r\n","/**\r\n * DateInner.js\r\n * DateView only for rendering\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport {\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n} from 'reactstrap';\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\n\r\nimport { monthTextMapping } from '../DatePicker.constants';\r\n\r\nimport './MonthYearSelector.scss';\r\n\r\n// Height for month and year dropdown items\r\nconst itemHeight = 32;\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass MonthYearSelector extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.updateScrollPosition = this.updateScrollPosition.bind(this);\r\n  }\r\n\r\n  updateScrollPosition() {\r\n    const {\r\n      currDisplayDate,\r\n      dateRangeStart,\r\n      isYear,\r\n    } = this.props;\r\n\r\n    try {\r\n      const height = itemHeight * (isYear ? currDisplayDate.getFullYear() - dateRangeStart.getFullYear() : currDisplayDate.getMonth());\r\n\r\n      // Update year scroll position to current year\r\n      if (this.scrollInput) {\r\n        setTimeout(() => this.scrollInput.scrollTop(height), 10);\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  /**\r\n   * renderMonths\r\n   *\r\n   * Render months dropdown\r\n   */\r\n  renderMonths() {\r\n    const {\r\n      currDisplayDate,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      setCalender,\r\n    } = this.props;\r\n\r\n    try {\r\n      const startYear = dateRangeStart.getFullYear();\r\n      const endYear = dateRangeEnd.getFullYear();\r\n      const currYear = currDisplayDate.getFullYear();\r\n\r\n      const startMonth = currYear === startYear ? dateRangeStart.getMonth() : 0;\r\n      const endMonth = currYear === endYear ? dateRangeEnd.getMonth() : 11;\r\n\r\n      return _.reduce(monthTextMapping, (result, item, index) => {\r\n        if (startMonth <= index && index <= endMonth) {\r\n          const jsx = (\r\n            <DropdownItem\r\n              onClick={() => {\r\n                setCalender(index, currYear);\r\n              }}\r\n              key={`month-${index.toString()}`}\r\n            >\r\n              {item}\r\n            </DropdownItem>\r\n          );\r\n          result.push(jsx);\r\n        }\r\n\r\n        return result;\r\n      }, []);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * renderYears\r\n   *\r\n   * Render years dropdown\r\n   */\r\n  renderYears() {\r\n    const {\r\n      currDisplayDate,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      setCalender,\r\n    } = this.props;\r\n\r\n    try {\r\n      const start = dateRangeStart.getFullYear();\r\n      const end = dateRangeEnd.getFullYear();\r\n\r\n      const result = [];\r\n      for (let i = start; i <= end; ++i) {\r\n        result.push((\r\n          <DropdownItem\r\n            onClick={() => {\r\n              setCalender(currDisplayDate.getMonth(), i);\r\n            }}\r\n            key={`year-${i.toString()}`}\r\n          >\r\n            {i}\r\n          </DropdownItem>\r\n        ));\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { isYear, currDisplayDate, isSingle } = this.props;\r\n\r\n    try {\r\n      const dateToUse = new Date(currDisplayDate.getFullYear(), currDisplayDate.getMonth(), 1);\r\n\r\n      let displayText = '';\r\n\r\n      if (isYear) {\r\n        displayText = dateToUse.getFullYear();\r\n      } else {\r\n        const month = dateToUse.getMonth();\r\n        displayText = monthTextMapping[month];\r\n      }\r\n\r\n      if (!isSingle) {\r\n        return <p>{displayText}</p>;\r\n      }\r\n\r\n      return (\r\n        <div className=\"month-year-selector\">\r\n          <UncontrolledDropdown>\r\n            <div ref={(dateMonthInput) => { this.dateMonthInput = dateMonthInput; }}>\r\n              <DropdownToggle\r\n                caret\r\n                outline\r\n                onClick={this.updateScrollPosition}\r\n              >\r\n                {displayText}\r\n              </DropdownToggle>\r\n            </div>\r\n            <DropdownMenu>\r\n              <Scrollbars\r\n                autoHeight\r\n                ref={(scrollInput) => { this.scrollInput = scrollInput; }}\r\n              >\r\n                {isYear ? this.renderYears() : this.renderMonths()}\r\n              </Scrollbars>\r\n            </DropdownMenu>\r\n          </UncontrolledDropdown>\r\n        </div>\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nMonthYearSelector.defaultProps = {\r\n  isYear: false,\r\n  isSingle: false,\r\n};\r\n\r\nMonthYearSelector.propTypes = {\r\n  isYear: PropTypes.bool,\r\n  setCalender: PropTypes.func.isRequired,\r\n  currDisplayDate: PropTypes.instanceOf(Date).isRequired,\r\n  dateRangeStart: PropTypes.instanceOf(Date).isRequired,\r\n  dateRangeEnd: PropTypes.instanceOf(Date).isRequired,\r\n  isSingle: PropTypes.bool,\r\n};\r\n\r\nexport default MonthYearSelector;\r\n","/**\r\n * DateInner.js\r\n * DateView only for rendering\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\n\r\nimport { dayTextList /* , deafultYearRange */ } from '../DatePicker.constants';\r\n\r\nimport './DaysList.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DaysList extends Component {\r\n  /**\r\n   * renderDaysText\r\n   *\r\n   * Render the days text\r\n   */\r\n  renderDaysText() {\r\n    return _.map(dayTextList, day => (\r\n      <Col\r\n        xs=\"auto\"\r\n        className=\"days\"\r\n        key={day}\r\n      >\r\n        <p>{day}</p>\r\n      </Col>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Row className=\"days-list-container\" noGutters>\r\n        <Col className=\"days-list-inner\" xs={12}>\r\n          <Row className=\"w-100\" noGutters>\r\n            {this.renderDaysText()}\r\n          </Row>\r\n        </Col>\r\n        <Col className=\"days-list-divider\" xs={12} />\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DaysList;\r\n","/**\r\n * DateInner.js\r\n * DateView only for rendering\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\n\r\nimport PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n} from 'reactstrap';\r\n\r\nimport './Calender.scss';\r\n\r\n/**\r\n * Calender\r\n *\r\n * Render calender days for range selection\r\n */\r\nclass Calender extends Component {\r\n  render() {\r\n    const {\r\n      dateRangeEndOverwrite,\r\n      isSelectingStartDate,\r\n      startValue,\r\n      endValue,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      setSelectedDate,\r\n      isRange,\r\n      currDisplayDate,\r\n      hoverDate,\r\n      setDateRangeEndOverwrite,\r\n      setHoverDate,\r\n      offsetDays,\r\n    } = this.props;\r\n\r\n    const currFirstDay = new Date(currDisplayDate);\r\n    currFirstDay.setDate(1);\r\n\r\n    const currLastDay = new Date(currFirstDay.getFullYear(), currFirstDay.getMonth() + 1, 0);\r\n\r\n    const currFirstDayTime = currFirstDay.getTime();\r\n    const currLastDayTime = currLastDay.getTime();\r\n\r\n    const month = currFirstDay.getMonth();\r\n    const year = currFirstDay.getFullYear();\r\n\r\n    // Get the starting blank days of the calender\r\n    const startIndex = currFirstDay.getDay();\r\n    // Get the end day\r\n    const endIndex = currLastDay.getDate();\r\n\r\n    // Get starting time\r\n    const currHoverTime = hoverDate && hoverDate.getTime();\r\n    const startTime = startValue && startValue.getTime();\r\n    const endTime = endValue && endValue.getTime();\r\n\r\n    let startTimeToUse = startTime;\r\n    let endTimetoUse = endTime;\r\n\r\n    const fixedDateTime = isSelectingStartDate ? endTime : startTime;\r\n    const nonfixedDateTime = !isSelectingStartDate ? endTime : startTime;\r\n\r\n    if (hoverDate) {\r\n      // eslint-disable-next-line\r\n      startTimeToUse = currHoverTime < fixedDateTime ? currHoverTime : fixedDateTime;\r\n      // eslint-disable-next-line\r\n      endTimetoUse = currHoverTime > fixedDateTime ? currHoverTime : fixedDateTime;\r\n    }\r\n\r\n    const result = [];\r\n\r\n    // These are blank elements to simulate last month dates\r\n    for (let i = 0; i < startIndex; ++i) {\r\n      result.push(<div className=\"date-col\" key={`blank${i.toString()}`} />);\r\n    }\r\n\r\n    for (let i = 1; i <= endIndex; ++i) {\r\n      const currDay = new Date(year, month, i);\r\n      const currDayOfWeek = currDay.getDay();\r\n      const currTime = currDay.getTime();\r\n\r\n      const isSat = currDayOfWeek === 6;\r\n      const isSun = currDayOfWeek === 0;\r\n      const isStartDate = startTimeToUse === currTime;\r\n      const isEndDate = endTimetoUse === currTime;\r\n      const isWithin = startTimeToUse && endTimetoUse && startTimeToUse < currTime && currTime < endTimetoUse;\r\n      const isFirstDay = currFirstDayTime === currTime;\r\n      const isLastDay = currLastDayTime === currTime;\r\n\r\n      const isSameDay = startTimeToUse === endTimetoUse || (hoverDate && fixedDateTime === currHoverTime);\r\n      const isLeftBlockActive = !isSameDay && (!isSun && !isFirstDay) && ((isEndDate && startTimeToUse)\r\n                                || isWithin);\r\n      const isRightBlockActive = !isSameDay && (!isSat && !isLastDay) && ((isStartDate && endTimetoUse)\r\n                                || isWithin);\r\n      const isDayActive = isStartDate || isEndDate;\r\n      const isEndActive = isDayActive || (isWithin && (isSat || isSun || isFirstDay || isLastDay));\r\n\r\n      // Left bock, right block, circle block and selected circle block\r\n      const leftBlockStyle = isLeftBlockActive ? 'left-active' : 'left-inactive';\r\n      const rightBlockStyle = isRightBlockActive ? 'right-active' : 'right-inactive';\r\n      const endBlockStyle = isEndActive ? 'end-active' : 'end-inactive';\r\n      const dayStyle = isDayActive ? 'day-active' : 'day-inactive';\r\n      const focusStyle = (currHoverTime && currHoverTime === currTime) || (!currHoverTime && nonfixedDateTime === currTime) ? 'day-focus' : '';\r\n\r\n      // Check if day is in within selected range\r\n      let isBlocked = false;\r\n      // if (isRange) {\r\n      //   if (isSelectingStartDate && endValue) {\r\n      //     // isBlocked = currDay > endValue;\r\n      //   } else if (!isSelectingStartDate && startValue) {\r\n      //     // isBlocked = currDay < startValue;\r\n      //   }\r\n      // }\r\n\r\n      // Check if day is out of calender range\r\n      if (!isBlocked) {\r\n        isBlocked = currDay < dateRangeStart || currDay > (dateRangeEndOverwrite || dateRangeEnd);\r\n      }\r\n\r\n      result.push((\r\n        <Col\r\n          key={`day${i.toString()}`}\r\n          className=\"date-col\"\r\n          xs=\"auto\"\r\n        >\r\n          <button\r\n            className=\"day-container\"\r\n            type=\"button\"\r\n            onClick={() => {\r\n              if (!isBlocked) {\r\n                const { isSelectingStartDate: isSelectingStartDateCurr } = this.props;\r\n                setSelectedDate(new Date(year, month, i), isSelectingStartDateCurr);\r\n                setHoverDate(null);\r\n\r\n                if (isRange && isSelectingStartDateCurr) {\r\n                  setDateRangeEndOverwrite(new Date(year, month, i + offsetDays));\r\n                }\r\n              }\r\n            }}\r\n            onMouseEnter={() => {\r\n                if (!isBlocked) {\r\n                  setHoverDate(new Date(year, month, i));\r\n                }\r\n            }}\r\n            onMouseLeave={() => {\r\n                // if (!isSelectingStartDate) {\r\n                  setHoverDate(null);\r\n                // }\r\n            }}\r\n          >\r\n            <div className={`day-range  ${leftBlockStyle}`} />\r\n            <div className={`day-range  ${rightBlockStyle}`} />\r\n            <div className={`${endBlockStyle}`} />\r\n            {\r\n              isBlocked ?\r\n                <div className=\"day-disabled\">\r\n                  <p className=\"blocked\">{i}</p>\r\n                </div>\r\n              :\r\n                <div className={`day ${dayStyle} ${focusStyle}`}>\r\n                  <p>{i}</p>\r\n                </div>\r\n            }\r\n          </button>\r\n        </Col>\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <Row className=\"calender-container\" noGutters>\r\n        {result}\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nCalender.defaultProps = {\r\n  startValue: null,\r\n  endValue: null,\r\n  dateRangeEndOverwrite: null,\r\n  currDisplayDate: null,\r\n  hoverDate: null,\r\n  offsetDays: 0,\r\n};\r\n\r\nCalender.propTypes = {\r\n  isRange: PropTypes.bool.isRequired,\r\n  startValue: PropTypes.instanceOf(Date),\r\n  endValue: PropTypes.instanceOf(Date),\r\n  dateRangeStart: PropTypes.instanceOf(Date).isRequired,\r\n  dateRangeEnd: PropTypes.instanceOf(Date).isRequired,\r\n  dateRangeEndOverwrite: PropTypes.instanceOf(Date),\r\n  currDisplayDate: PropTypes.instanceOf(Date),\r\n  hoverDate: PropTypes.instanceOf(Date),\r\n  setSelectedDate: PropTypes.func.isRequired,\r\n  isSelectingStartDate: PropTypes.bool.isRequired,\r\n  setDateRangeEndOverwrite: PropTypes.func.isRequired,\r\n  setHoverDate: PropTypes.func.isRequired,\r\n  offsetDays: PropTypes.number,\r\n};\r\n\r\nexport default Calender;\r\n","/**\r\n * DateInner.js\r\n * DateView only for rendering\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport PropTypes from 'prop-types';\r\nimport React, { Component, Fragment } from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n} from 'reactstrap';\r\nimport moment from 'moment';\r\n\r\nimport CloseIcon from 'assets/images/common/CloseIcon.svg';\r\nimport Arrow from 'assets/images/forms/arrow.svg';\r\nimport Triangle from 'assets/images/forms/triangle.svg';\r\n\r\nimport MonthYearSelector from '../MonthYearSelector/MonthYearSelector';\r\nimport DaysList from '../DaysList/DaysList';\r\nimport Calender from '../Calender/Calender';\r\n\r\nimport './DateInner.scss';\r\n\r\nconst SINGLE = 0;\r\nconst MULTIPLELEFT = 1;\r\nconst MULTIPLERIGHT = 2;\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DateInner extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hoverDate: null,\r\n      dateRangeEndOverwrite: null,\r\n    };\r\n\r\n    this.setCalender = this.setCalender.bind(this);\r\n    this.setDateRangeEndOverwrite = this.setDateRangeEndOverwrite.bind(this);\r\n  }\r\n\r\n  // componentDidUpdate(prevProps) {\r\n  //   const { startValue } = this.props;\r\n\r\n  //   if (!isDateEqual(startValue, prevProps.startValue)) {\r\n  //     this.setDateRangeEndOverwrite(startValue);\r\n  //   }\r\n  // }\r\n\r\n  setDateRangeEndOverwrite(value) {\r\n    const {\r\n      dateRangeEnd,\r\n      offsetDays,\r\n    } = this.props;\r\n\r\n    let newEnd = value;\r\n\r\n    if (dateRangeEnd) {\r\n      const maxEnd = moment(dateRangeEnd).add(offsetDays, 'days').toDate();\r\n      newEnd = newEnd > maxEnd ? maxEnd : newEnd;\r\n    }\r\n\r\n    this.setState({ dateRangeEndOverwrite: newEnd });\r\n  }\r\n\r\n  /**\r\n   * setCalender\r\n   *\r\n   * Set visible calender\r\n   *\r\n   * @param {number} month\r\n   * @param {number} year\r\n   */\r\n  setCalender(month, year) {\r\n    const {\r\n      dateRangeEndOverwrite,\r\n    } = this.state;\r\n\r\n    const {\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      setNewDisplayDate,\r\n    } = this.props;\r\n\r\n    let date = new Date(year, month);\r\n\r\n    // Cap date range\r\n    if (date < dateRangeStart) {\r\n      date = dateRangeStart;\r\n    } else if (date > (dateRangeEndOverwrite || dateRangeEnd)) {\r\n      date = dateRangeEndOverwrite && dateRangeEndOverwrite > dateRangeEnd ? dateRangeEndOverwrite : dateRangeEnd;\r\n    }\r\n\r\n    setNewDisplayDate(date);\r\n  }\r\n\r\n  renderMonthSelectorArrows(isBack, month, year) {\r\n    const { isRange, isResp } = this.props;\r\n\r\n    return (\r\n      <Col\r\n        xs={1}\r\n        className=\"date-arrow-style\"\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            // eslint-disable-next-line\r\n            this.setCalender(isBack ? month - 1 : (isRange && !isResp ? month : month + 1), year);\r\n          }}\r\n        >\r\n          <img\r\n            src={Arrow}\r\n            alt=\"arrow.svg\"\r\n            className={isBack ? 'angle-left' : 'angle-right'}\r\n          />\r\n        </button>\r\n      </Col>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * renderDateInner\r\n   *\r\n   * Render the popup od the datepicker\r\n   */\r\n  renderDateInner(type) {\r\n    const { dateRangeEndOverwrite, hoverDate } = this.state;\r\n\r\n    const {\r\n      currDisplayDate,\r\n      isRange,\r\n      setSelectedDate,\r\n      startValue,\r\n      endValue,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      isSelectingStartDate,\r\n      isResp,\r\n      offsetDays,\r\n    } = this.props;\r\n\r\n    const dateToUse = new Date(currDisplayDate.getFullYear(), currDisplayDate.getMonth(), 1);\r\n    if (type === MULTIPLERIGHT) {\r\n      dateToUse.setMonth(dateToUse.getMonth() + 1);\r\n    }\r\n\r\n    const month = dateToUse.getMonth();\r\n    const year = dateToUse.getFullYear();\r\n\r\n    let upperStyle = '';\r\n    if (isRange && !isResp) {\r\n      upperStyle = type === MULTIPLERIGHT ? 'range-right' : 'range-left';\r\n    }\r\n\r\n    return (\r\n      <div className=\"date-inner-container\">\r\n        {\r\n          type !== MULTIPLERIGHT ?\r\n            <div\r\n              role=\"button\"\r\n              className=\"close-button-container\"\r\n              onKeyPress={() => {}}\r\n              onClick={() => {\r\n                setSelectedDate(startValue, true);\r\n                setSelectedDate(endValue, false);\r\n              }}\r\n              tabIndex={-1}\r\n            >\r\n              <img src={CloseIcon} className=\"close-icon\" alt=\"close\" />\r\n            </div>\r\n            : null\r\n        }\r\n        <Row className={upperStyle} noGutters>\r\n          {type !== MULTIPLERIGHT && this.renderMonthSelectorArrows(true, month, year)}\r\n          <Col xs={6} className=\"selector-left\">\r\n            <MonthYearSelector\r\n              setCalender={this.setCalender}\r\n              currDisplayDate={dateToUse}\r\n              dateRangeStart={dateRangeStart}\r\n              dateRangeEnd={dateRangeEnd}\r\n              isSingle={type === SINGLE}\r\n            />\r\n          </Col>\r\n          <Col xs={4} className=\"selector-right\">\r\n            <MonthYearSelector\r\n              isYear\r\n              setCalender={this.setCalender}\r\n              currDisplayDate={dateToUse}\r\n              dateRangeStart={dateRangeStart}\r\n              dateRangeEnd={dateRangeEnd}\r\n              isSingle={type === SINGLE}\r\n            />\r\n          </Col>\r\n          {type !== MULTIPLELEFT && this.renderMonthSelectorArrows(false, month, year)}\r\n        </Row>\r\n        <DaysList />\r\n        <Calender\r\n          isRange={isRange}\r\n          startValue={startValue}\r\n          endValue={endValue}\r\n          dateRangeStart={dateRangeStart}\r\n          dateRangeEnd={dateRangeEnd}\r\n          dateRangeEndOverwrite={dateRangeEndOverwrite}\r\n          currDisplayDate={dateToUse}\r\n          hoverDate={hoverDate}\r\n          setSelectedDate={setSelectedDate}\r\n          isSelectingStartDate={isSelectingStartDate}\r\n          setDateRangeEndOverwrite={this.setDateRangeEndOverwrite}\r\n          setHoverDate={value => this.setState({ hoverDate: value })}\r\n          offsetDays={offsetDays}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isOpened,\r\n      isRange,\r\n      isArrowUp,\r\n      inputWidth,\r\n      isSelectingStartDate,\r\n      isResp,\r\n    } = this.props;\r\n\r\n    const openedStyle = isOpened ? 'dateinner-opened' : '';\r\n    const dateOpenStyle = isOpened ? 'date-container-opened' : 'date-container-closed';\r\n\r\n\r\n    const respStyle = isResp ? 'inner-absolute' : '';\r\n    const isArrowUpToUse = isResp || isArrowUp;\r\n    const arrowStyle = isArrowUpToUse ? 'arrow-up' : 'arrow-down';\r\n    const rangeBorders = isRange ? '' : '';\r\n\r\n    let transform = `translateX(20px) ${isArrowUpToUse ? '' : 'rotate(180deg)'}`;\r\n    if (isRange && inputWidth !== null) {\r\n      transform = `translateX(${(isSelectingStartDate ? 0 : inputWidth * 0.5) + 20}px) ${isArrowUpToUse ? '' : 'rotate(180deg)'}`;\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className={`${openedStyle} ${respStyle} dateinner-v3`}>\r\n          <div className={dateOpenStyle}>\r\n            <img\r\n              className={['arrow-range', arrowStyle, respStyle].join(' ')}\r\n              src={Triangle}\r\n              alt=\"triangle.svg\"\r\n              style={{ transform }}\r\n            />\r\n            <div\r\n              className={`list-container list-opened ${rangeBorders}`}\r\n              ref={node => this.listCont = node}\r\n            >\r\n              {this.renderDateInner(isRange && !isResp ? MULTIPLELEFT : SINGLE)}\r\n              {isRange && !isResp && this.renderDateInner(MULTIPLERIGHT)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nDateInner.defaultProps = {\r\n  startValue: null,\r\n  endValue: null,\r\n  inputWidth: 0,\r\n  offsetDays: 0,\r\n};\r\n\r\nDateInner.propTypes = {\r\n  isOpened: PropTypes.bool.isRequired,\r\n  isRange: PropTypes.bool.isRequired,\r\n  currDisplayDate: PropTypes.instanceOf(Date).isRequired,\r\n  startValue: PropTypes.instanceOf(Date),\r\n  endValue: PropTypes.instanceOf(Date),\r\n  dateRangeStart: PropTypes.instanceOf(Date).isRequired,\r\n  dateRangeEnd: PropTypes.instanceOf(Date).isRequired,\r\n  setSelectedDate: PropTypes.func.isRequired,\r\n  setNewDisplayDate: PropTypes.func.isRequired,\r\n  isArrowUp: PropTypes.bool.isRequired,\r\n  isSelectingStartDate: PropTypes.bool.isRequired,\r\n  inputWidth: PropTypes.number,\r\n  isResp: PropTypes.bool.isRequired,\r\n  offsetDays: PropTypes.number,\r\n};\r\n\r\nexport default DateInner;\r\n","/**\r\n * DatePickerV2.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport document from 'global/document';\r\nimport window from 'global/window';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { Input } from 'reactstrap';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\n\r\nimport Arrow from 'assets/images/forms/arrow.svg';\r\nimport DateIn from 'assets/images/forms/dateIn.svg';\r\nimport DateOut from 'assets/images/forms/dateOut.svg';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\nimport DateInner from './DateInner/DateInner';\r\n\r\nimport { deafultYearRange } from './DatePicker.constants';\r\n\r\nimport {\r\n  isDateEqual,\r\n  // storeStringToDate,\r\n  slashedStringDateToDate,\r\n  dateToString,\r\n  // dateToStoreString,\r\n} from '../../../lib/dateFunctions';\r\n\r\nimport '../DropDown/DropDown.scss';\r\nimport './DatePicker.scss';\r\n\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DatePicker extends Component {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // size - Size of this control\r\n    // startDate - Start range of date\r\n    // endDate - End range of date\r\n    // currDisplayDate - Day to set current view in calender (Default to today)\r\n    const {\r\n      startDate,\r\n      endDate,\r\n      startValue,\r\n    } = this.props;\r\n\r\n    // Get current date\r\n    const date = startValue || new Date();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    // Get first and last day of the month to display\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    // Get the calender range\r\n    const dateRangeStart = startDate != null ? startDate : new Date(year - deafultYearRange, month);\r\n    const dateRangeEnd = endDate != null ? endDate : new Date(year + deafultYearRange, month);\r\n\r\n    // isOpened - Whether dropdown is opened\r\n    // isError - Whether there is input error\r\n    // selectedString - The selected date string\r\n    // currDisplayDate - Current selected date in view\r\n    // currFirstDay - Current first day of the month in view\r\n    // currLastDay - Current last day of the month in view\r\n    // monthDropdownOpen - Whether month selector is opened\r\n    // yearDropdownOpen - Whether year selector is opened\r\n    // dateRangeStart - The actual calender start range\r\n    // dateRangeEnd - The actual calender end range\r\n    this.state = {\r\n      isOpened: false,\r\n      currDisplayDate: date,\r\n      currFirstDay: firstDay,\r\n      currLastDay: lastDay,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      isArrowUp: false,\r\n      startDateString: '',\r\n      endDateString: '',\r\n      isSelectingStartDate: true,\r\n      inputWidth: 0,\r\n      isResp: false,\r\n    };\r\n\r\n    this.handleSelectClick = this.handleSelectClick.bind(this);\r\n    this.handleClickOutside = this.handleClickOutside.bind(this);\r\n\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    this.handleExit = this.handleExit.bind(this);\r\n\r\n    this.setSelectedDate = this.setSelectedDate.bind(this);\r\n    this.setNewDisplayDate = this.setNewDisplayDate.bind(this);\r\n    this.onMovement = this.onMovement.bind(this);\r\n\r\n    this.renderInputs = this.renderInputs.bind(this);\r\n    this.renderInner = this.renderInner.bind(this);\r\n\r\n    this.dateValidateAndUpdate = this.dateValidateAndUpdate.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidMount\r\n   */\r\n  componentDidMount() {\r\n    // Add Handler to handle click outside of screen\r\n    document.addEventListener('mousedown', this.handleClickOutside);\r\n    window.addEventListener('scroll', this.onMovement);\r\n    window.addEventListener('resize', this.onMovement);\r\n\r\n    const {\r\n      startValue,\r\n      endValue,\r\n    } = this.props;\r\n\r\n    if (startValue) {\r\n      this.setSelectedDate(startValue, true);\r\n    }\r\n\r\n    if (endValue) {\r\n      this.setSelectedDate(endValue < startValue ? startValue : endValue, false);\r\n    }\r\n\r\n    this.setState({\r\n      dateInnerDOM: ReactDOM.findDOMNode(this.dateInner),\r\n      datePickerDOM: ReactDOM.findDOMNode(this.wrapperRef),\r\n    });\r\n\r\n    this.onMovement();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidUpdate\r\n   *\r\n   * Used to update dropdown position\r\n   * of month and year selector\r\n   */\r\n  async componentDidUpdate(prevProps) {\r\n    const {\r\n      startValue,\r\n      endValue,\r\n    } = this.props;\r\n\r\n    if (\r\n      ((prevProps.startValue || startValue) && !isDateEqual(prevProps.startValue, startValue)) ||\r\n      ((prevProps.endValue || endValue) && !isDateEqual(prevProps.endValue, endValue))\r\n    ) {\r\n      const updateData = this.dateValidateAndUpdate();\r\n\r\n      this.setState({\r\n        startDateString: updateData.startDateString === 'Invalid Date' ? '' : updateData.startDateString,\r\n        endDateString: updateData.endDateString === 'Invalid Date' ? '' : updateData.endDateString,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentWillUnmount\r\n   */\r\n  componentWillUnmount() {\r\n    // Remove Handler to handle click outside of screen\r\n    document.removeEventListener('mousedown', this.handleClickOutside);\r\n    window.removeEventListener('scroll', this.onMovement);\r\n    window.removeEventListener('resize', this.onMovement);\r\n  }\r\n\r\n\r\n  // Make sure that the popup is always in the window\r\n  onMovement() {\r\n    const {\r\n      dateInnerDOM,\r\n      datePickerDOM,\r\n      isOpened,\r\n      isResp,\r\n    } = this.state;\r\n\r\n    const { innerWidth } = window;\r\n\r\n    if (isOpened) {\r\n      const newState = {};\r\n      let clientRect = null;\r\n      const currIsResp = innerWidth < 576;\r\n\r\n      if (dateInnerDOM && datePickerDOM) {\r\n        let top = 56;\r\n        let left = 0;\r\n        let right = 0;\r\n        if (!currIsResp) {\r\n          clientRect = datePickerDOM.getBoundingClientRect();\r\n          const isOverHeight = !currIsResp && clientRect.bottom + 540 > window.outerHeight;\r\n          newState.isArrowUp = !isOverHeight;\r\n\r\n          const isOverFlow = clientRect.left + 530 > window.innerWidth;\r\n          left = isOverFlow ? `${window.innerWidth - 530}px` : `${clientRect.left}px`;\r\n          top = !currIsResp && isOverHeight ? clientRect.top - 330 : clientRect.bottom + 10;\r\n          right = '';\r\n        }\r\n\r\n        dateInnerDOM.style.left = left;\r\n        dateInnerDOM.style.right = right;\r\n        dateInnerDOM.style.top = `${top}px`;\r\n        newState.inputWidth = this.wrapperRef.getBoundingClientRect().width;\r\n      }\r\n\r\n      if ((isResp && !currIsResp) || (!isResp && currIsResp)) {\r\n        newState.isResp = currIsResp;\r\n      }\r\n\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setNewDisplayDate\r\n   *\r\n   * Set new current date and\r\n   * start and end of calender\r\n   *\r\n   * @param {date} date\r\n   */\r\n  setNewDisplayDate(date) {\r\n    const dateToUse = date || new Date();\r\n    const newYear = dateToUse.getFullYear();\r\n    const newMonth = dateToUse.getMonth();\r\n\r\n    // Get first and last day of visible month\r\n    const firstDay = new Date(newYear, newMonth, 1);\r\n    const lastDay = new Date(newYear, newMonth + 1, 0);\r\n\r\n    // Set new calender values\r\n    this.setState({\r\n      currDisplayDate: dateToUse,\r\n      currFirstDay: firstDay,\r\n      currLastDay: lastDay,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setSelectedDate\r\n   *\r\n   * Updated selected date to store\r\n   *\r\n   * @param {date} date\r\n   */\r\n  async setSelectedDate(date, isStart = true) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        const updateData = this.dateValidateAndUpdate(isStart && date, !isStart && date);\r\n\r\n        if (updateData) {\r\n          if (isStart && updateData.currStartValue) {\r\n            this.setNewDisplayDate(updateData.currStartValue);\r\n          }\r\n        }\r\n\r\n        this.setState({\r\n          isOpened: !!(updateData && updateData.isChooseEndDate),\r\n          isSelectingStartDate: false,\r\n          startDateString: updateData.startDateString,\r\n          endDateString: updateData.endDateString,\r\n        }, resolve);\r\n      } catch (error) {\r\n        // eslint-disable-next-line\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  getDateFromDateString(dateString) {\r\n    try {\r\n      let date = slashedStringDateToDate(dateString);\r\n      if (date && date.toString() === 'Invalid Date') {\r\n        date = moment(dateString).toDate();\r\n      }\r\n\r\n      return date;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return 'Invalid Date';\r\n  }\r\n\r\n  /**\r\n   * End selection if click on outside\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleClickOutside(event) {\r\n    const { isOpened, dateInnerDOM } = this.state;\r\n\r\n    // If clicked outside of daterpicekr Inner or wrapper, go to exit\r\n    if (\r\n      isOpened &&\r\n      this.wrapperRef &&\r\n      !this.wrapperRef.contains(event.target) &&\r\n      dateInnerDOM &&\r\n      !dateInnerDOM.contains(event.target)\r\n    ) {\r\n      this.setState({\r\n        isOpened: false,\r\n      });\r\n\r\n      this.handleExit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handleKeyPress\r\n   *\r\n   * Handle on enter key\r\n   *\r\n   * @param {object} target\r\n   */\r\n  handleKeyPress(target) {\r\n    // If pressed on enter, go to exit\r\n    if (target.charCode === 13) {\r\n      target.preventDefault();\r\n      this.handleExit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handleSelectClick\r\n   *\r\n   * Handle toggling of datepicker\r\n   */\r\n  handleSelectClick(isStart = true) {\r\n    const {\r\n      isOpened,\r\n      isSelectingStartDate,\r\n    } = this.state;\r\n\r\n    const {\r\n      startValue,\r\n      endValue,\r\n      isRange,\r\n    } = this.props;\r\n\r\n    let openStartDateString = {};\r\n    let openEndDateString = {};\r\n\r\n    if (!isOpened) {\r\n      openStartDateString = { startDateString: startValue && dateToString(startValue) };\r\n      openEndDateString = { endDateString: endValue && dateToString(endValue) };\r\n    }\r\n\r\n    this.setState({\r\n      isOpened: ((isSelectingStartDate && !isStart) || (!isSelectingStartDate && isStart) || !isOpened),\r\n      isSelectingStartDate: isStart,\r\n      ...openStartDateString,\r\n      ...openEndDateString,\r\n    }, () => {\r\n      if (this.state.isOpened) {\r\n        this.onMovement();\r\n        this.setNewDisplayDate(this.state.isSelectingStartDate ? startValue : endValue);\r\n        return;\r\n      }\r\n\r\n      const {\r\n        startDateString: closeStartDateString,\r\n        endDateString: closeEndDateString,\r\n      } = this.state;\r\n\r\n      const startDate = this.getDateFromDateString(closeStartDateString);\r\n      const endDate = isRange && this.getDateFromDateString(closeEndDateString);\r\n\r\n      const updateData = this.dateValidateAndUpdate(startDate, endDate);\r\n\r\n      this.setState({\r\n        startDateString: updateData.startDateString,\r\n        endDateString: updateData.endDateString,\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handleExit\r\n   *\r\n   * Handle exit selection of entered input\r\n   */\r\n  handleExit(newDate, isStart) {\r\n    const {\r\n      startDateString,\r\n      endDateString,\r\n    } = this.state;\r\n\r\n    const {\r\n      endName,\r\n    } = this.props;\r\n\r\n    let startDate = isStart && newDate;\r\n    let endDate = !isStart && endName && newDate;\r\n\r\n    try {\r\n      if (!startDate) {\r\n        startDate = this.getDateFromDateString(startDateString);\r\n      }\r\n      if (endName && !endDate) {\r\n        endDate = this.getDateFromDateString(endDateString);\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    const updateData = this.dateValidateAndUpdate(startDate, endDate);\r\n\r\n    if (updateData) {\r\n      this.setState({\r\n        isOpened: false,\r\n        isSelectingStartDate: false,\r\n        startDateString: updateData.startDateString,\r\n        endDateString: updateData.endDateString,\r\n      });\r\n    }\r\n  }\r\n\r\n  dateValidateAndUpdate(newStartValue = null, newEndValue = null) {\r\n    const { dateRangeStart, dateRangeEnd } = this.state;\r\n    const {\r\n      startValue,\r\n      endValue,\r\n      offsetDays,\r\n      isRange,\r\n      onChange,\r\n      name,\r\n      endName,\r\n    } = this.props;\r\n\r\n    // Whether need user to choose new end date\r\n    let isChooseEndDate = false;\r\n\r\n    // Check if inputs are invalid dates\r\n    const isNewStartInvalid = newStartValue && newStartValue.toString() === 'Invalid Date';\r\n    const isNewEndInvalid = newEndValue && newEndValue.toString() === 'Invalid Date';\r\n\r\n    // Get new or existing dates\r\n    const startValueToUse = isNewStartInvalid ? null : ((!isNewStartInvalid && newStartValue) || startValue);\r\n    const endValueToUse = isNewEndInvalid ? null : ((!isNewEndInvalid && newEndValue) || endValue);\r\n\r\n    // Dates to be modified later\r\n    let currStartValue = startValueToUse;\r\n    let currEndValue = endValueToUse;\r\n\r\n    // The date string for the input field\r\n    let startDateString = 'Invalid Date';\r\n    let endDateString = 'Invalid Date';\r\n\r\n    try {\r\n      // Choose end date if is range picker and have new start but no end value\r\n      isChooseEndDate = isRange && newStartValue && !endValue;\r\n\r\n      // For range only\r\n      if (isRange) {\r\n        // The max date is end range + 181 days\r\n        const trueMaxEnd = dateRangeEnd && moment(dateRangeEnd).add(offsetDays, 'days').toDate();\r\n        // Max curr date is current start date + 181\r\n        const currMaxEnd = startValueToUse && moment(startValueToUse).add(offsetDays, 'days').toDate();\r\n        // Get the smallest end date\r\n        const maxEnd = currMaxEnd < trueMaxEnd ? currMaxEnd : trueMaxEnd;\r\n\r\n        // If selected new start date is greater than end date,\r\n        // make end date to be 1 day after new start date\r\n        // and let user choose end date again\r\n        if (newStartValue && startValueToUse > endValueToUse) {\r\n          currEndValue = moment(startValueToUse).add(1, 'days').toDate();\r\n          isChooseEndDate = true;\r\n        }\r\n\r\n        // If selected new end date is less than start date,\r\n        // swap both dates\r\n        // and let user choose end date again\r\n        if (newEndValue && startValueToUse > endValueToUse) {\r\n          currStartValue = endValueToUse;\r\n          currEndValue = startValueToUse;\r\n          isChooseEndDate = true;\r\n        }\r\n\r\n        // If end date is less than start range, make it to start range\r\n        if (currEndValue && currEndValue < dateRangeStart) {\r\n          currEndValue = dateRangeStart;\r\n        }\r\n\r\n        // If start date is greater than end range, make it to end range\r\n        if (currStartValue && currStartValue > maxEnd) {\r\n          currStartValue = maxEnd;\r\n        }\r\n\r\n        // If end date is more than end range, make it to end range\r\n        if (currEndValue && currEndValue > maxEnd) {\r\n          currEndValue = maxEnd;\r\n        }\r\n\r\n        // if new end date is diff from state, update it\r\n        if (!isDateEqual(endValue, currEndValue)) {\r\n          onChange('date', endName, currEndValue);\r\n        }\r\n      }\r\n\r\n      // If start date is less than start range, make it to start range\r\n      if (currStartValue && currStartValue < dateRangeStart) {\r\n        currStartValue = dateRangeStart;\r\n      }\r\n\r\n      // If start date is greater than end range, make it to end range\r\n      // No need max end as start date need to be within end range\r\n      if (currStartValue && currStartValue > dateRangeEnd) {\r\n        currStartValue = dateRangeEnd;\r\n      }\r\n\r\n      // if new start date is diff from state, update it\r\n      if (!isDateEqual(startValue, currStartValue)) {\r\n        onChange('date', name, currStartValue);\r\n      }\r\n\r\n      // Get new input strings\r\n      startDateString = currStartValue ? moment(currStartValue).format('DD MMM YYYY') : startDateString;\r\n      endDateString = currEndValue ? moment(currEndValue).format('DD MMM YYYY') : startDateString;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return {\r\n      isChooseEndDate,\r\n      currEndValue,\r\n      currStartValue,\r\n      startDateString,\r\n      endDateString,\r\n    };\r\n  }\r\n\r\n  renderDropDownArrow() {\r\n    const { isOpened } = this.state;\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className=\"selected-arrow\"\r\n        onMouseDown={this.handleSelectClick}\r\n      >\r\n        <img\r\n          src={Arrow}\r\n          alt=\"arrow.svg\"\r\n          className={`selected-arrow-style ${isOpened ? 'angle-up' : 'angle-down'}`}\r\n        />\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderInputField(isStart) {\r\n    const {\r\n      startDateString,\r\n      endDateString,\r\n      isSelectingStartDate,\r\n      isOpened,\r\n    } = this.state;\r\n\r\n    const {\r\n      name,\r\n      endName,\r\n      isDisableTyping,\r\n      placeholderString,\r\n      noInternalDesc,\r\n      isRange,\r\n    } = this.props;\r\n\r\n    const rangeStyle = isRange ? 'range-style' : '';\r\n    let selectingDateStyle = '';\r\n    if (isOpened && isRange) {\r\n      selectingDateStyle = (isSelectingStartDate && isStart) || (!isSelectingStartDate && !isStart) ? 'faded-style' : '';\r\n    }\r\n\r\n    const displayValue = isStart ? startDateString : endDateString;\r\n    const nameToUse = isStart ? name : endName;\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={`selected-text text-style ${rangeStyle} ${selectingDateStyle}`}\r\n        onKeyPress={this.handleKeyPress}\r\n        onMouseDown={(e) => {\r\n          if (window.innerWidth <= 576) {\r\n            e.preventDefault();\r\n          }\r\n          this.handleSelectClick(isStart);\r\n        }}\r\n      >\r\n        <Input\r\n          value={displayValue || ''}\r\n          name={nameToUse}\r\n          onChange={e => this.setState({\r\n            [isStart ? 'startDateString' : 'endDateString']: e.target.value,\r\n          })}\r\n          placeholder={noInternalDesc ? placeholderString : ''}\r\n          autoComplete=\"off\"\r\n          disabled={isDisableTyping}\r\n        />\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderInputs() {\r\n    const {\r\n      isRange,\r\n    } = this.props;\r\n\r\n    if (!isRange) {\r\n      return (\r\n        <Fragment>\r\n          {this.renderInputField(true)}\r\n          {this.renderDropDownArrow()}\r\n        </Fragment>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className=\"date-input-container\">\r\n          <div className=\"img-container\">\r\n            <img\r\n              className=\"date-in\"\r\n              src={DateIn}\r\n              alt=\"Date Range Icon\"\r\n            />\r\n          </div>\r\n          {this.renderInputField(true)}\r\n        </div>\r\n        <div className=\"seperator\" />\r\n        <div className=\"date-input-container\">\r\n          <div className=\"img-container\">\r\n            <img\r\n              className=\"date-out\"\r\n              src={DateOut}\r\n              alt=\"Date Range Icon\"\r\n            />\r\n          </div>\r\n          {this.renderInputField(false)}\r\n        </div>\r\n        {this.renderDropDownArrow()}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderPopup() {\r\n    const {\r\n      isOpened,\r\n      currDisplayDate,\r\n      currFirstDay,\r\n      currLastDay,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      isArrowUp,\r\n      isSelectingStartDate,\r\n      inputWidth,\r\n      isResp,\r\n    } = this.state;\r\n\r\n    const {\r\n      isRange,\r\n      startValue,\r\n      endValue,\r\n      offsetDays,\r\n    } = this.props;\r\n\r\n\r\n    return (\r\n      <DateInner\r\n        ref={node => this.dateInner = node}\r\n        isOpened={!!isOpened}\r\n        isRange={isRange}\r\n        currDisplayDate={currDisplayDate}\r\n        currFirstDay={currFirstDay}\r\n        currLastDay={currLastDay}\r\n        startValue={startValue}\r\n        endValue={endValue}\r\n        dateRangeStart={dateRangeStart}\r\n        dateRangeEnd={dateRangeEnd}\r\n        setSelectedDate={this.setSelectedDate}\r\n        setNewDisplayDate={this.setNewDisplayDate}\r\n        isArrowUp={isArrowUp}\r\n        isSelectingStartDate={!!isSelectingStartDate}\r\n        inputWidth={inputWidth}\r\n        isResp={isResp}\r\n        offsetDays={offsetDays}\r\n      />\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Render component\r\n   */\r\n  renderInner() {\r\n    const { isOpened } = this.state;\r\n\r\n    const {\r\n      errorString,\r\n      placeholderString,\r\n      noInternalDesc,\r\n      startValue,\r\n    } = this.props;\r\n\r\n    const dropDownOpenStyle = isOpened ? 'dropdown-container-opened' : 'dropdown-container-closed';\r\n    const isErrorStyle = errorString ? 'error' : '';\r\n    const titleStyle = startValue ? 'focused-title' : '';\r\n    const noInternalDescStyle = noInternalDesc ? 'no-internal-desc' : '';\r\n\r\n    return (\r\n      <div\r\n        className={`dropdown-container-v3 datepicker-container-v3 ${noInternalDescStyle}`}\r\n        ref={node => (this.wrapperRef = node)}\r\n      >\r\n        <div className={`dropdown-container ${dropDownOpenStyle}  ${isErrorStyle}`}>\r\n          {\r\n            noInternalDesc ? null :\r\n            <div className={`title-header ${titleStyle}`}>\r\n              {placeholderString}\r\n            </div>\r\n          }\r\n          <div className=\"selected-container align-items-center\">\r\n            {this.renderInputs()}\r\n          </div>\r\n        </div>\r\n        {this.renderPopup()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Render component\r\n   */\r\n  render() {\r\n    const {\r\n      isRange,\r\n      desc,\r\n      extraInfo,\r\n      errorString,\r\n    } = this.props;\r\n\r\n    // Range picker will take over the wrapper\r\n    if (!isRange) {\r\n      return (\r\n        <FormInputWrapper\r\n          desc={desc}\r\n          extraInfo={extraInfo}\r\n          errorString={errorString}\r\n        >\r\n          {this.renderInner()}\r\n        </FormInputWrapper>\r\n      );\r\n    }\r\n\r\n    return this.renderInner();\r\n  }\r\n}\r\n\r\nDatePicker.defaultProps = {\r\n  isRange: false,\r\n  startDate: null,\r\n  endDate: null,\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  noInternalDesc: false,\r\n  isDisableTyping: false,\r\n  endName: null,\r\n  placeholderString: null,\r\n  startValue: null,\r\n  endValue: null,\r\n  offsetDays: 0,\r\n};\r\n\r\nDatePicker.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  endName: PropTypes.string,\r\n  isRange: PropTypes.bool,\r\n  startDate: PropTypes.instanceOf(Date),\r\n  endDate: PropTypes.instanceOf(Date),\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  isDisableTyping: PropTypes.bool,\r\n  noInternalDesc: PropTypes.bool,\r\n  onChange: PropTypes.func.isRequired,\r\n  placeholderString: PropTypes.string,\r\n  startValue: PropTypes.instanceOf(Date),\r\n  endValue: PropTypes.instanceOf(Date),\r\n  offsetDays: PropTypes.number,\r\n};\r\n\r\nexport default DatePicker;\r\n","/**\r\n * DatePicker.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport DatePicker from '../DatePicker/DatePicker';\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DateRangePicker extends Component {\r\n  render() {\r\n    const {\r\n      values,\r\n      onChange,\r\n      desc,\r\n      extraInfo,\r\n      startName,\r\n      endName,\r\n      startDate,\r\n      endDate,\r\n      errorStringStart,\r\n      errorStringEnd,\r\n      offsetDays,\r\n    } = this.props;\r\n\r\n    const errorString = (errorStringStart || errorStringEnd) && `${`${errorStringStart} ` || ''}${errorStringEnd || ''}`;\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        extraInfo={extraInfo}\r\n        errorString={errorString}\r\n        isDateRange\r\n      >\r\n        <div className=\"date-range-picker-new\">\r\n          <DatePicker\r\n            startValue={values && values[startName] && values[startName].value}\r\n            endValue={values && values[endName] && values[endName].value}\r\n            onChange={onChange}\r\n            name={startName}\r\n            endName={endName}\r\n            isRange\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            errorString={errorString}\r\n            offsetDays={offsetDays}\r\n          />\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nDateRangePicker.defaultProps = {\r\n  desc: null,\r\n  extraInfo: null,\r\n  startDate: null,\r\n  endDate: null,\r\n  errorStringStart: null,\r\n  errorStringEnd: null,\r\n  values: null,\r\n  offsetDays: 0,\r\n};\r\n\r\nDateRangePicker.propTypes = {\r\n  onChange: PropTypes.func.isRequired,\r\n  startName: PropTypes.string.isRequired,\r\n  endName: PropTypes.string.isRequired,\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  startDate: PropTypes.instanceOf(Date),\r\n  endDate: PropTypes.instanceOf(Date),\r\n  errorStringStart: PropTypes.string,\r\n  errorStringEnd: PropTypes.string,\r\n  values: PropTypes.object,\r\n  offsetDays: PropTypes.number,\r\n};\r\n\r\nexport default DateRangePicker;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Tooltip from 'components/Templates/Tooltip/Tooltip';\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './ImageSelection.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass ImageSelection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      clickStyle: 'click-right',\r\n    };\r\n  }\r\n\r\n  handleOnClick(value) {\r\n    try {\r\n      const {\r\n        onChange,\r\n        name,\r\n        value: oldValue,\r\n        inputData,\r\n      } = this.props;\r\n\r\n      const newValue = inputData.is_required === false && value === oldValue ? null : value;\r\n      onChange(inputData.type, name, newValue);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  renderTitle() {\r\n    const { inputData } = this.props;\r\n\r\n    if (!inputData.title && !inputData.tooltip) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      return (\r\n        <div className=\"title-container\">\r\n          <h3>{inputData.title}</h3>\r\n          {\r\n            inputData.tooltip &&\r\n            <Tooltip\r\n              id={inputData.slug}\r\n            >\r\n              <p>{inputData.tooltip}</p>\r\n            </Tooltip>\r\n          }\r\n        </div>\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  renderItem(itemData, index, isTooltip) {\r\n    const { clickStyle } = this.state;\r\n    const { inputData, value } = this.props;\r\n\r\n    try {\r\n      const isSelected = (inputData.is_required && !value && index === 0) || (value && value === itemData.value);\r\n      const key = `${inputData.slug}-option-${index}`;\r\n\r\n      return (\r\n        <Col\r\n          key={key}\r\n          xs={6}\r\n          className=\"item-container-wrapper\"\r\n        >\r\n          <div className=\"item-container-wrapper-inner\">\r\n            <button\r\n              type=\"button\"\r\n              className={`item-container ${isSelected && 'selected'} ${clickStyle}`}\r\n              onClick={() => {\r\n                this.setState({\r\n                  clickStyle: index % 2 === 0 ? 'click-left' : 'click-right',\r\n                }, () => this.handleOnClick(itemData.value));\r\n              }}\r\n            >\r\n              <div className={`bg ${isSelected && 'bg-active'}`} />\r\n              <div className=\"image\">\r\n                <img src={itemData.icon_img} alt={`${key}.svg`} />\r\n              </div>\r\n            </button>\r\n            <div className=\"item-container-bottom\">\r\n              {\r\n                isTooltip &&\r\n                <div className=\"inner-tooltip\">\r\n                  {\r\n                    itemData.tooltip &&\r\n                    <Tooltip\r\n                      id={key}\r\n                    >\r\n                      <p>{itemData.tooltip}</p>\r\n                    </Tooltip>\r\n                  }\r\n                </div>\r\n              }\r\n              <div className={['desc', isTooltip ? 'desc-padding' : ''].join(' ')}>\r\n                <p>{itemData.title}</p>\r\n                <p className=\"sub-title\">{itemData.sub_title}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  renderOptions() {\r\n    const { inputData } = this.props;\r\n\r\n    try {\r\n      const isTooltip = _.find(inputData.options, option => option && option.tooltip);\r\n\r\n      return _.map(inputData.options, (option, index) => this.renderItem(option, index, isTooltip));\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { inputData, errorString, extraInfo } = this.props;\r\n\r\n    if (!inputData) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        className=\"image-selection-margin\"\r\n        errorString={errorString}\r\n        extraInfo={extraInfo}\r\n      >\r\n        <div className=\"image-selection-container\">\r\n          {this.renderTitle()}\r\n          <Row className=\"options-container\" noGutters>\r\n            {this.renderOptions()}\r\n          </Row>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nImageSelection.defaultProps = {\r\n  value: null,\r\n  errorString: null,\r\n  extraInfo: null,\r\n};\r\n\r\n\r\nImageSelection.propTypes = {\r\n  value: PropTypes.string,\r\n  inputData: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  errorString: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n};\r\n\r\nexport default ImageSelection;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Row, Col, Input } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './AgeGroupItem.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass AgeGroupItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleExit = this.handleExit.bind(this);\r\n  }\r\n\r\n  handleExit(e, isBlur) {\r\n    const { generateNewFormData } = this.props;\r\n\r\n    if (isBlur || (!isBlur && e.charCode === 13)) {\r\n      generateNewFormData();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      name,\r\n      value,\r\n      title,\r\n      onChangeValue,\r\n    } = this.props;\r\n\r\n    if (!name) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Col className=\"mb-3\" xs={12} md={6} lg={6}>\r\n        <div className=\"age-group-item-container\">\r\n          <p className=\"title\">{title}</p>\r\n          <Row className=\"selector\" noGutters>\r\n            <Col className=\"d-flex justify-content-center align-items-center\" xs={12}>\r\n              <Input\r\n                className=\"age-group-input\"\r\n                type=\"number\"\r\n                value={value || ''}\r\n                onChange={e => onChangeValue(name, e.target.value && Math.max(0, Math.floor(e.target.value)))}\r\n                onBlur={e => this.handleExit(e, true)}\r\n                onKeyPress={e => this.handleExit(e, false)}\r\n                placeholder=\"Enter number\"\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nAgeGroupItem.defaultProps = {\r\n  value: null,\r\n};\r\n\r\n\r\nAgeGroupItem.propTypes = {\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.number,\r\n  ]),\r\n  name: PropTypes.string.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  generateNewFormData: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AgeGroupItem;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport AgeGroupItem from './AgeGroupItem/AgeGroupItem';\r\n\r\nimport './AgeGroup.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass AgeGroup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { inputData, value } = this.props;\r\n    let values = [];\r\n\r\n    try {\r\n      values = _.reduce(inputData.options, (result, v) => {\r\n        const originalData = _.find(value, vo => vo.value === v.value);\r\n\r\n        result.push({\r\n          key: v.value,\r\n          title: v.title,\r\n          value: (originalData && originalData.count) || null,\r\n        });\r\n        return result;\r\n      }, []);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    this.state = {\r\n      values,\r\n      count: 0,\r\n    };\r\n\r\n    this.onChangeValue = this.onChangeValue.bind(this);\r\n\r\n    this.getTotalCount = this.getTotalCount.bind(this);\r\n    this.generateNewFormData = this.generateNewFormData.bind(this);\r\n  }\r\n\r\n  // Update form values on change\r\n  onChangeValue(key, value) {\r\n    const { values } = this.state;\r\n\r\n    try {\r\n      const newValue = [...values];\r\n      const group = _.find(newValue, v => v.key === key);\r\n\r\n      if (group) {\r\n        group.value = value;\r\n        this.setState({\r\n          values: newValue,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  getTotalCount() {\r\n    const { values } = this.state;\r\n\r\n    try {\r\n      return _.reduce(values, (result, v) => {\r\n        if (v.value > 0) {\r\n          return result + v.value;\r\n        }\r\n\r\n        return result;\r\n      }, 0);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  async generateNewFormData() {\r\n    const { values } = this.state;\r\n    const { onChange, name } = this.props;\r\n\r\n    try {\r\n      let count = 0;\r\n      const newData = _.reduce(values, (result, v) => {\r\n        if (v.value > 0) {\r\n          count += v.value;\r\n          result.push({\r\n            value: v.key,\r\n            count: v.value,\r\n          });\r\n        }\r\n\r\n        return result;\r\n      }, []);\r\n\r\n      this.setState({\r\n        count: this.getTotalCount(),\r\n      });\r\n\r\n      await onChange('age_group', name, newData);\r\n      await onChange('number', 'no_of_employees', count);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  renderHeader() {\r\n    const { count } = this.state;\r\n    const { inputData } = this.props;\r\n\r\n    try {\r\n      return (\r\n        <Row className=\"title-container\" noGutters>\r\n          <Col className=\"d-none d-md-flex\" md={{ size: 4, order: 1 }} />\r\n          <Col md={{ size: 4, order: 2 }} xs={{ size: 12, order: 2 }}>\r\n            <h3>{inputData.title}</h3>\r\n          </Col>\r\n          <Col md={{ size: 4, order: 3 }} xs={{ size: 12, order: 4 }}>\r\n            <p className=\"employees\">{count} employees assigned</p>\r\n          </Col>\r\n          <Col md={{ size: 12, order: 4 }} xs={{ size: 12, order: 3 }}>\r\n            <h6>{'Employees age for upcoming birthday\\n(Current age + 1)'}</h6>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  renderAgeGroupItems() {\r\n    const { values } = this.state;\r\n    const { inputData } = this.props;\r\n\r\n    try {\r\n      return (_.reduce(values, (result, group, key) => {\r\n        result.push((\r\n          <AgeGroupItem\r\n            key={`age-group-${inputData.slug}-${key}`}\r\n            name={group.key}\r\n            value={group.value}\r\n            title={group.title}\r\n            onChangeValue={this.onChangeValue}\r\n            generateNewFormData={this.generateNewFormData}\r\n          />\r\n        ));\r\n\r\n        return result;\r\n      }, []));\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n  render() {\r\n    const { inputData, errorString, extraInfo } = this.props;\r\n\r\n    if (!inputData) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        errorString={errorString}\r\n        className=\"age-group-margin\"\r\n        extraInfo={extraInfo}\r\n      >\r\n        <div className=\"age-group-container\">\r\n          {this.renderHeader()}\r\n          <Row className=\"options-container\">\r\n            {this.renderAgeGroupItems()}\r\n          </Row>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nAgeGroup.defaultProps = {\r\n  value: null,\r\n  errorString: null,\r\n  extraInfo: null,\r\n};\r\n\r\n\r\nAgeGroup.propTypes = {\r\n  value: PropTypes.array,\r\n  inputData: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  errorString: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n};\r\n\r\nexport default AgeGroup;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport document from 'global/document';\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport People from 'assets/images/EditForm/People.svg';\r\nimport Arrow from '../../../assets/images/forms/arrow.svg';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './Persons.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass Persons extends Component {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // isOpened - Whether dropdown is opened\r\n    // listItems - The actual dropdown list\r\n    // selectedString - The selected item string\r\n    // height - Control height\r\n    // numItemsDisplay - How many items to display\r\n    // maxheight - Max height of the list\r\n    // listHeight - Height of the list. (Items count + control)\r\n    this.state = {\r\n      isOpened: null,\r\n    };\r\n\r\n    this.setError = this.setError.bind(this);\r\n    this.clearError = this.clearError.bind(this);\r\n    this.handleSelectClick = this.handleSelectClick.bind(this);\r\n    this.handleClickOutside = this.handleClickOutside.bind(this);\r\n\r\n    this.handleValue = this.handleValue.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Add Handler to handle click outside of screen\r\n    document.addEventListener('mousedown', this.handleClickOutside);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.handleClickOutside);\r\n  }\r\n\r\n  setError(message) {\r\n    this.formParent.setErrorString(message);\r\n  }\r\n\r\n  clearError() {\r\n    this.formParent.clearErrorString();\r\n  }\r\n\r\n  /**\r\n   * End selection if click on outside\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleClickOutside(event) {\r\n    const { isOpened } = this.state;\r\n\r\n    // If clicked outside, go to exit\r\n    if (\r\n      isOpened &&\r\n      this.wrapperRef &&\r\n      this.wrapperRefControl &&\r\n      (!this.wrapperRef.contains(event.target) && !this.wrapperRefControl.contains(event.target))\r\n    ) {\r\n      // Close it\r\n      this.setState({\r\n        isOpened: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSelectClick() {\r\n    const { isOpened } = this.state;\r\n    this.setState({ isOpened: !isOpened });\r\n  }\r\n\r\n  async handleValue(event, name, isAdd) {\r\n    event.preventDefault();\r\n    const {\r\n      nameAdult,\r\n      nameChildren,\r\n      namePlanType,\r\n      nameTripType,\r\n      values,\r\n      onChange,\r\n    } = this.props;\r\n\r\n    const oldNumAdult = (values[nameAdult] && values[nameAdult].value) || 0;\r\n    const oldNumChildren = (values[nameChildren] && values[nameChildren].value) || 0;\r\n\r\n    let numAdult = oldNumAdult;\r\n    let numChildren = oldNumChildren;\r\n    const isSingleTrip = values[nameTripType] && values[nameTripType].value === 'Single Trip';\r\n\r\n    const minAdult = 1;\r\n    const maxAdult = isSingleTrip ? 20 : 2;\r\n    const minChildren = 0;\r\n    const maxChildren = 8;\r\n\r\n    if (name === nameAdult) {\r\n      numAdult = Math.min(Math.max(minAdult, numAdult + (isAdd ? 1 : -1)), maxAdult);\r\n    } else {\r\n      numChildren = Math.min(Math.max(minChildren, numChildren + (isAdd ? 1 : -1)), maxChildren);\r\n    }\r\n\r\n    if (numChildren > 0) {\r\n      numAdult = Math.min(Math.max(1, numAdult), 2);\r\n    }\r\n\r\n    if (oldNumAdult !== numAdult) {\r\n      await onChange('number', nameAdult, numAdult);\r\n    }\r\n    if (oldNumChildren !== numChildren) {\r\n      await onChange('number', nameChildren, numChildren);\r\n    }\r\n\r\n    const planType = values && values[namePlanType] && values[namePlanType].value;\r\n\r\n    if (numChildren > 0) {\r\n      if (planType !== 'Family') {\r\n        await onChange('text', namePlanType, 'Family');\r\n      }\r\n    } else if (numAdult > 1) {\r\n      if (planType !== 'Group') {\r\n        await onChange('text', namePlanType, 'Group');\r\n      }\r\n    } else if (planType !== 'Individual') {\r\n      await onChange('text', namePlanType, 'Individual');\r\n    }\r\n\r\n    const tripType = values && values[nameTripType] && values[nameTripType].value;\r\n    if (numAdult > 1 && numChildren === 0) {\r\n      if (tripType !== 'Single Trip') {\r\n        await onChange('selection', nameTripType, 'Single Trip');\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isOpened } = this.state;\r\n\r\n    const {\r\n      desc,\r\n      extraInfo,\r\n      errorString,\r\n      nameAdult,\r\n      nameChildren,\r\n      values,\r\n      isPrex,\r\n    } = this.props;\r\n\r\n    const errorStyle = errorString ? 'error' : '';\r\n    const arrowStyle = isOpened ? 'angle-up' : 'angle-down';\r\n    let openedStyle = isOpened ? 'drop-container-opened' : 'drop-container-closed';\r\n    openedStyle = isOpened === null ? 'drop-container-closed-init' : openedStyle;\r\n\r\n    const numAdult = (values[nameAdult] && values[nameAdult].value) || 0;\r\n    const numChildren = (values[nameChildren] && values[nameChildren].value) || 0;\r\n\r\n    const zIndexStyle = isOpened ? 'drop-open' : 'drop-close';\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        extraInfo={extraInfo}\r\n        errorString={errorString}\r\n      >\r\n        <div className=\"position-relative\">\r\n          <div\r\n            className={`persons-container ${errorStyle} ${zIndexStyle}`}\r\n            ref={node => this.wrapperRefControl = node}\r\n          >\r\n            <div className=\"img-container\">\r\n              <img\r\n                src={People}\r\n                alt=\"People.svg\"\r\n              />\r\n            </div>\r\n            <div\r\n              className=\"text-input\"\r\n              onClick={() => this.handleSelectClick()}\r\n              onKeyPress={() => {}}\r\n              role=\"button\"\r\n              tabIndex={-1}\r\n            >\r\n              <p>{numAdult} adult, {numChildren} children</p>\r\n            </div>\r\n            <div\r\n              className=\"drop-arrow\"\r\n              onClick={() => this.handleSelectClick()}\r\n              onKeyPress={() => {}}\r\n              role=\"button\"\r\n              tabIndex={-1}\r\n            >\r\n              <img\r\n                src={Arrow}\r\n                alt=\"arrow.svg\"\r\n                className={arrowStyle}\r\n              />\r\n            </div>\r\n            <div\r\n              className={`drop-container ${openedStyle}`}\r\n              ref={node => this.wrapperRef = node}\r\n            >\r\n              <div className=\"value-container\">\r\n                <button onClick={e => this.handleValue(e, nameAdult, false)}><div className=\"minus fa fa-minus\" /></button>\r\n                <p>\r\n                  <span className=\"count\">{numAdult}</span>\r\n                  <span className=\"desc\">adults</span>\r\n                </p>\r\n                <button onClick={e => this.handleValue(e, nameAdult, true)}><div className=\"plus fa fa-plus\" /></button>\r\n              </div>\r\n              <div className=\"value-container\">\r\n                {!isPrex && <button onClick={e => this.handleValue(e, nameChildren, false)}><div className=\"minus fa fa-minus\" /></button>}\r\n                <p>\r\n                  <span className=\"count\">{numChildren}</span>\r\n                  <span className=\"desc\">children</span>\r\n                </p>\r\n                {!isPrex && <button onClick={e => this.handleValue(e, nameChildren, true)}><div className=\"plus fa fa-plus\" /></button>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nPersons.defaultProps = {\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  values: {},\r\n  isPrex: false,\r\n};\r\n\r\n\r\nPersons.propTypes = {\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  nameAdult: PropTypes.string.isRequired,\r\n  nameChildren: PropTypes.string.isRequired,\r\n  namePlanType: PropTypes.string.isRequired,\r\n  nameTripType: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  values: PropTypes.object,\r\n  isPrex: PropTypes.bool,\r\n};\r\n\r\nexport default Persons;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Row, Col } from 'reactstrap';\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport './Selection.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass Selection extends Component {\r\n  render() {\r\n    const {\r\n      name,\r\n      desc,\r\n      extraInfo,\r\n      errorString,\r\n      options,\r\n      onChange,\r\n      value,\r\n      size,\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        extraInfo={extraInfo}\r\n        errorString={errorString}\r\n      >\r\n        <div className=\"position-relative\">\r\n          <Row\r\n            className=\"selection-container-v3 w-100\"\r\n            noGutters\r\n          >\r\n            {\r\n              _.map(options, (option, index) => {\r\n                const selectedStyle = value === option.value ? 'selected' : '';\r\n\r\n                return (\r\n                  <Col\r\n                    xs={12}\r\n                    sm={size}\r\n                    key={`${option.value}-${index}`}\r\n                  >\r\n                    <button\r\n                      type=\"button\"\r\n                      className={selectedStyle}\r\n                      onClick={() => onChange('selection', name, option.value)}\r\n                    >\r\n                      {option.display_name}\r\n                    </button>\r\n                  </Col>\r\n                );\r\n              })\r\n            }\r\n          </Row>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nSelection.defaultProps = {\r\n  value: null,\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  size: 6,\r\n};\r\n\r\n\r\nSelection.propTypes = {\r\n  value: PropTypes.string,\r\n  name: PropTypes.string.isRequired,\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  onChange: PropTypes.func.isRequired,\r\n  options: PropTypes.array.isRequired,\r\n  size: PropTypes.number,\r\n};\r\n\r\nexport default Selection;\r\n","/**\r\n * TravelDetail.js\r\n * Detail View for travel\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport TextInput from './TextInput/TextInput';\r\nimport Dropdown from './DropDown/DropDown';\r\nimport Checkbox from './Checkbox/Checkbox';\r\nimport DatePicker from './DatePicker/DatePicker';\r\nimport DateRangePicker from './DateRangePicker/DateRangePicker';\r\nimport ImageSelection from './ImageSelection/ImageSelection';\r\nimport AgeGroup from './AgeGroupV2/AgeGroup';\r\nimport Persons from './Persons/Persons';\r\nimport Selection from './SelectionNew/Selection';\r\n\r\nclass FieldGenerator extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      options: null,\r\n    };\r\n\r\n    this.getOptions = this.getOptions.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getOptions();\r\n    this.doPrefill();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    this.getOptions(prevProps);\r\n    this.doPrefill(prevProps.errors);\r\n  }\r\n\r\n  getOptions(prevProps) {\r\n    try {\r\n      const { options } = this.state;\r\n      const { constants, fieldData } = this.props;\r\n      if (fieldData && fieldData.options_constant_key &&\r\n        (!prevProps || !options || (fieldData.options_constant_key !== prevProps.fieldData.options_constant_key))) {\r\n        this.setState({\r\n          options: _.map(constants[fieldData.options_constant_key], v => ({ display_name: v, value: v })),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  doPrefill(prevErrors) {\r\n    const {\r\n      values,\r\n      onChangeValue,\r\n      fieldData,\r\n      errors,\r\n    } = this.props;\r\n\r\n    try {\r\n      const name = fieldData && fieldData.slug;\r\n      if (values && values[name]) {\r\n        // Set field type to values if contains prefill data\r\n        if (!values[name].type) {\r\n          onChangeValue(fieldData.type, name, values[name].value);\r\n        }\r\n      }\r\n\r\n      // Set default selection for image selection\r\n      if (\r\n        fieldData.type === 'image_selection' &&\r\n        (fieldData.is_required !== false) &&\r\n        !values[name]\r\n      ) {\r\n        onChangeValue(fieldData.type, name, fieldData.options[0].value);\r\n      }\r\n\r\n      const error = errors && errors[name];\r\n      const prevError = prevErrors && prevErrors[name];\r\n\r\n      if (error && !prevError && this.node) {\r\n        // window.scrollTo(0, this.node.getBoundingClientRect().y);\r\n        window.scrollTo({\r\n          top: this.node.getBoundingClientRect().y,\r\n          left: 0,\r\n          behavior: 'smooth',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  renderInput() {\r\n    const { options } = this.state;\r\n\r\n    const {\r\n      fieldData,\r\n      values,\r\n      onChangeValue,\r\n      errors,\r\n      noInternalDesc,\r\n      extraInfo,\r\n      handlePostCode,\r\n      isPrex,\r\n    } = this.props;\r\n\r\n    const name = fieldData && fieldData.slug;\r\n    const value = values && values[name] && values[name].value;\r\n    const error = errors && errors[name];\r\n\r\n    if (fieldData) {\r\n      if (fieldData.type === 'padding') {\r\n        return null;\r\n      }\r\n\r\n      const { conditions } = fieldData;\r\n\r\n      let isRenderable = true;\r\n      try {\r\n        _.each(conditions || [], (condition, index) => {\r\n          const isValid = values[condition.key].value === condition.value;\r\n          if (index === 0) {\r\n            isRenderable = isValid;\r\n          } else {\r\n            isRenderable = condition.type === 'or' ? isValid || isRenderable : isValid && isRenderable;\r\n          }\r\n        });\r\n      } catch (e) {\r\n        isRenderable = false;\r\n      }\r\n\r\n      if (!isRenderable) {\r\n        return null;\r\n      }\r\n\r\n      switch (fieldData.type) {\r\n        case 'email':\r\n        case 'number':\r\n        case 'time':\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'password':\r\n        case 'postal': {\r\n          return (\r\n            <TextInput\r\n              type={fieldData.type}\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              errorString={error}\r\n              readOnly={fieldData.readOnly}\r\n              placeholderString={fieldData.title}\r\n              noInternalDesc={noInternalDesc}\r\n              extraInfo={extraInfo}\r\n              desc={fieldData.display_name}\r\n              handlePostCode={handlePostCode}\r\n            />\r\n          );\r\n        }\r\n        case 'select':\r\n        case 'multiple_select': {\r\n          return (\r\n            <Dropdown\r\n              isMultiple={fieldData.type === 'multiple_select'}\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              errorString={error}\r\n              placeholderString={fieldData.title}\r\n              dropList={fieldData.options || options}\r\n              noInternalDesc={noInternalDesc}\r\n              extraInfo={extraInfo}\r\n              desc={fieldData.display_name}\r\n            />\r\n          );\r\n        }\r\n        case 'checkbox': {\r\n          return (\r\n            <Checkbox\r\n              value={value}\r\n              name={name}\r\n              desc={fieldData.title}\r\n              onChange={onChangeValue}\r\n              errorString={error}\r\n              extraInfo={extraInfo}\r\n            />\r\n          );\r\n        }\r\n        case 'image_selection': {\r\n          return (\r\n            <ImageSelection\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              inputData={fieldData}\r\n              errorString={error}\r\n              extraInfo={extraInfo}\r\n              desc={fieldData.display_name}\r\n            />\r\n          );\r\n        }\r\n        case 'age_group': {\r\n          return (\r\n            <AgeGroup\r\n              inputData={fieldData}\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              errorString={error}\r\n              extraInfo={extraInfo}\r\n              desc={fieldData.display_name}\r\n            />\r\n          );\r\n        }\r\n        case 'date_range': {\r\n          let startName = 'start_date';\r\n          let endName = 'end_date';\r\n\r\n          try {\r\n            startName = fieldData.slugs && fieldData.slugs[0];\r\n            endName = fieldData.slugs && fieldData.slugs[1];\r\n          } catch (err) {\r\n            // eslint-disable-next-line\r\n          }\r\n\r\n          return (\r\n            <DateRangePicker\r\n              values={values}\r\n              onChange={onChangeValue}\r\n              startName={startName}\r\n              endName={endName}\r\n              errorString={errors}\r\n              startDate={fieldData.min_date}\r\n              endDate={fieldData.max_date}\r\n              errorStringStart={errors && errors[startName]}\r\n              errorStringEnd={errors && errors[endName]}\r\n              extraInfo={extraInfo}\r\n              noInternalDesc={noInternalDesc}\r\n              // desc={fieldData.display_name}\r\n              offsetDays={fieldData.offset_days}\r\n            />\r\n          );\r\n        }\r\n        case 'date': {\r\n          return (\r\n            <DatePicker\r\n              desc={fieldData.display_name}\r\n              startValue={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              placeholderString={fieldData.title}\r\n              errorString={error}\r\n              noInternalDesc={noInternalDesc}\r\n              extraInfo={extraInfo}\r\n              startDate={fieldData.min_date}\r\n              endDate={fieldData.max_date}\r\n            />\r\n          );\r\n        }\r\n        case 'persons': {\r\n          return (\r\n            <Persons\r\n              desc={fieldData.desc}\r\n              values={values}\r\n              onChange={onChangeValue}\r\n              nameAdult=\"num_adult\"\r\n              nameChildren=\"num_children\"\r\n              namePlanType=\"plan_type\"\r\n              nameTripType=\"trip_type\"\r\n              errorString={error}\r\n              extraInfo={extraInfo}\r\n              isPrex={isPrex}\r\n            />\r\n          );\r\n        }\r\n        case 'button_select':\r\n        case 'selection': {\r\n          return (\r\n            <Selection\r\n              desc={fieldData.display_name}\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              name={name}\r\n              options={fieldData.options}\r\n              errorString={error}\r\n              extraInfo={extraInfo}\r\n              size={fieldData.tab_size}\r\n            />\r\n          );\r\n        }\r\n        default: return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { fieldData } = this.props;\r\n\r\n    if (!fieldData) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Col xs={12} sm={fieldData.size || 12}>\r\n        <div ref={node => this.node = node}>\r\n          {this.renderInput()}\r\n        </div>\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nFieldGenerator.defaultProps = {\r\n  values: {},\r\n  errors: {},\r\n  noInternalDesc: false,\r\n  extraInfo: null,\r\n  constants: null,\r\n  handlePostCode: null,\r\n  isPrex: false,\r\n};\r\n\r\nFieldGenerator.propTypes = {\r\n  values: PropTypes.object,\r\n  errors: PropTypes.object,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  fieldData: PropTypes.object.isRequired,\r\n  noInternalDesc: PropTypes.bool,\r\n  extraInfo: PropTypes.object,\r\n  constants: PropTypes.object,\r\n  handlePostCode: PropTypes.func,\r\n  isPrex: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  constants: state.insurance.constants,\r\n});\r\n\r\nexport default connect(mapStateToProps)(FieldGenerator);\r\n","/**\r\n * SpeechScroll.js\r\n * The hovering dropdown that appears in the navbar and\r\n * the multi compare view insurer's row.\r\n *\r\n * It will auto close when out of the box.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Tooltip as TooltipStrap } from 'reactstrap';\r\n\r\nimport TooltipImg from 'assets/images/common/tooltip.svg';\r\n\r\nimport './Tooltip.scss';\r\n\r\nclass Tooltip extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isOpen: false,\r\n    };\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n  }\r\n\r\n  toggle() {\r\n\r\n  }\r\n\r\n  render() {\r\n    const { isOpen } = this.state;\r\n    const { id, innerClassName } = this.props;\r\n\r\n    return (\r\n      <div className=\"tooltip-container \">\r\n        <TooltipStrap\r\n          target={id}\r\n          isOpen={isOpen}\r\n          toggle={() => this.setState({ isOpen: false })}\r\n          className=\"animated fade\"\r\n          innerClassName={[innerClassName, 'tooltip-inner-custom'].join(' ')}\r\n          arrowClassName=\"tooltip-arrow-custom\"\r\n          placement=\"bottom-end\"\r\n        >\r\n          {this.props.children}\r\n        </TooltipStrap>\r\n        <img\r\n          id={id}\r\n          src={TooltipImg}\r\n          alt=\"Tooltip.svg\"\r\n          onMouseEnter={() => this.setState({ isOpen: true })}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTooltip.defaultProps = {\r\n  innerClassName: '',\r\n};\r\n\r\nTooltip.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  innerClassName: PropTypes.string,\r\n};\r\n\r\nexport default Tooltip;\r\n","/**\r\n * DropDown.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Field, change, getFormValues } from 'redux-form';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport MagnifyGlass from 'assets/images/forms/magnifyGlass.svg';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\n\r\nimport { getPostal } from '../../../actions/insuranceActions';\r\n\r\nimport './TextInput.scss';\r\n\r\n// Height for medium dropdown\r\nconst mediumHeight = 60;\r\n// Height for big dropdown\r\nconst bigHeight = 72;\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass TextInput extends Component {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // dropList - The passed down dropdown list items\r\n    // placeholderString - Placeholder string for input\r\n    // size - Size of this control\r\n    // numItemsDisplay - Max items to display on view\r\n    const {\r\n      size,\r\n      height,\r\n    } = this.props;\r\n\r\n    // Get the control height\r\n    let heightToUse = size === 'big' ? bigHeight : mediumHeight;\r\n    heightToUse = height || heightToUse;\r\n\r\n    // isOpened - Whether dropdown is opened\r\n    // listItems - The actual dropdown list\r\n    // selectedString - The selected item string\r\n    // height - Control height\r\n    // numItemsDisplay - How many items to display\r\n    // maxheight - Max height of the list\r\n    // listHeight - Height of the list. (Items count + control)\r\n    this.state = {\r\n      height: heightToUse,\r\n      isFocus: false,\r\n    };\r\n\r\n    this.handleFocus = this.handleFocus.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.setError = this.setError.bind(this);\r\n    this.clearError = this.clearError.bind(this);\r\n    this.renderTextArea = this.renderTextArea.bind(this);\r\n    this.handlePostCode = this.handlePostCode.bind(this);\r\n  }\r\n\r\n  setError(message) {\r\n    this.formParent.setErrorString(message);\r\n  }\r\n\r\n  clearError() {\r\n    this.formParent.clearErrorString();\r\n  }\r\n\r\n  handleFocus() {\r\n    this.setState({\r\n      isFocus: true,\r\n    });\r\n  }\r\n\r\n  handleBlur() {\r\n    this.setState({\r\n      isFocus: false,\r\n    });\r\n  }\r\n\r\n  async handlePostCode(e) {\r\n    e.preventDefault();\r\n    const {\r\n      storeValue,\r\n      name,\r\n      addressFields,\r\n      formChange,\r\n      form,\r\n    } = this.props;\r\n\r\n    if (storeValue) {\r\n      const postcode = storeValue[name];\r\n      const result = await getPostal(postcode);\r\n      if (result) {\r\n        // const streetName = result.name === '' ? '' : `${result.name} `;\r\n        const street = result.street === '' ? '' : `${result.street} `;\r\n        const block = result.block === '' ? '' : `${result.block} `;\r\n        // let concatAddress = `${block}${streetName}${street}`;\r\n        let concatAddress = `${block}${street}`;\r\n\r\n        if (addressFields.blkNo) {\r\n          formChange(form, addressFields.blkNo, result.block);\r\n          concatAddress = street;\r\n        }\r\n\r\n        if (addressFields.address) {\r\n          formChange(form, addressFields.address, concatAddress);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderTextArea({ input }) {\r\n    const { placeholderString } = this.props;\r\n    return (\r\n      <div className=\"text-area\">\r\n        <textarea {...input} placeholder={placeholderString} rows=\"10\" cols=\"40\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      height,\r\n      isFocus,\r\n    } = this.state;\r\n\r\n    const {\r\n      name,\r\n      desc,\r\n      placeholderString,\r\n      zIndex,\r\n      isPassword,\r\n      extraInfo,\r\n      errorString,\r\n      isTextArea,\r\n      storeValue,\r\n      validateForm,\r\n      isPostCode,\r\n      toUpper,\r\n    } = this.props;\r\n\r\n    const focusStyle = isFocus ? 'focus' : '';\r\n    const passwordType = isPassword ? 'password' : '';\r\n    const errorStyle = errorString ? 'error' : '';\r\n\r\n    const refValue = storeValue ? storeValue[name] : null;\r\n\r\n    return (\r\n      <FormInputWrapper\r\n        desc={desc}\r\n        ref={node => (this.formParent = node)}\r\n        extraInfo={extraInfo}\r\n        errorString={errorString}\r\n        refValue={refValue}\r\n        validateForm={validateForm}\r\n      >\r\n        <div\r\n          className={`text-input-container ${focusStyle} ${errorStyle}`}\r\n          style={{ height, zIndex }}\r\n          onFocus={() => this.handleFocus()}\r\n          onBlur={() => this.handleBlur()}\r\n        >\r\n          <div className=\"text-input\">\r\n            {\r\n              isTextArea ?\r\n                <Field\r\n                  className=\"text\"\r\n                  component={this.renderTextArea}\r\n                  name={name}\r\n                  normalize={value => (value && toUpper ? value.toUpperCase() : value)}\r\n                />\r\n                :\r\n                  <Field\r\n                    className=\"text\"\r\n                    component=\"input\"\r\n                    type={passwordType}\r\n                    placeholder={placeholderString}\r\n                    name={name}\r\n                    normalize={value => (value && toUpper ? value.toUpperCase() : value)}\r\n                  />\r\n            }\r\n            {\r\n              isPostCode ?\r\n                <button\r\n                  className=\"postcode\"\r\n                  onClick={e => this.handlePostCode(e)}\r\n                >\r\n                  <img src={MagnifyGlass} alt=\"magGlass.svg\" />\r\n                </button>\r\n              :\r\n                null\r\n            }\r\n          </div>\r\n        </div>\r\n      </FormInputWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nTextInput.defaultProps = {\r\n  desc: null,\r\n  isPassword: false,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  isTextArea: false,\r\n  height: null,\r\n  storeValue: null,\r\n  isPostCode: false,\r\n  addressFields: null,\r\n  validateForm: null,\r\n  toUpper: false,\r\n};\r\n\r\n\r\nTextInput.propTypes = {\r\n  placeholderString: PropTypes.string.isRequired,\r\n  size: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  zIndex: PropTypes.number.isRequired,\r\n  desc: PropTypes.string,\r\n  isPassword: PropTypes.bool,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  isTextArea: PropTypes.bool,\r\n  height: PropTypes.number,\r\n  validateForm: PropTypes.func,\r\n  storeValue: PropTypes.object,\r\n  isPostCode: PropTypes.bool,\r\n  addressFields: PropTypes.object,\r\n  toUpper: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  storeValue: (getFormValues(ownProps.form)(state)),\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  formChange: (form, key, value) => {\r\n    dispatch(change(form, key, value));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TextInput);\r\n","module.exports = __webpack_public_path__ + \"static/media/triangle.64c3289a.svg\";","module.exports = __webpack_public_path__ + \"static/media/tooltip.d8150eb9.svg\";","module.exports = __webpack_public_path__ + \"static/media/PiggyBank.9fc90d27.svg\";","/**\r\n * TabView.js\r\n * TabView that uses a carousel or fading.\r\n *\r\n * For carousel, it will take in multiple elements in\r\n * an array to swap when changed tabs.\r\n *\r\n * For fading view, it will only take the 1st element in the array,\r\n * but it does a fading to simulate and give time for the change of state\r\n * to happen in that element.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport ReactDOM from 'react-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Carousel } from 'react-responsive-carousel';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport DropDown from '../../FormsV3/DropDown/DropDown';\r\n\r\nimport { setTabSelection } from '../../../actions/tabActions';\r\n\r\nimport './TabViewNew.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass TabViewNew extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const {\r\n      currentTabSelection,\r\n      tabs,\r\n      maxTabWidthPx,\r\n      isDataFadeOnly,\r\n      padding,\r\n      children,\r\n    } = nextProps;\r\n\r\n    const { activeIndex } = prevState;\r\n\r\n    let result = null;\r\n\r\n    if (tabs && currentTabSelection) {\r\n      const newIndex = _.findIndex(tabs, tab => tab.desc === currentTabSelection);\r\n      if (newIndex >= 0 && newIndex !== activeIndex) {\r\n        result = {\r\n          activeIndex: newIndex,\r\n        };\r\n      }\r\n    }\r\n\r\n    if (tabs !== prevState.tabs && children) {\r\n      const isUsingMaxWidth = maxTabWidthPx > 0;\r\n      const maxWidth = (100 - padding) / (isDataFadeOnly ? tabs.length : children.length);\r\n      const tabWidth = isUsingMaxWidth ? maxTabWidthPx : maxWidth;\r\n\r\n      result = {\r\n        ...result,\r\n        tabs,\r\n        width: tabWidth,\r\n        widthPercentage: isUsingMaxWidth ? `${maxTabWidthPx}px` : `${tabWidth}%`,\r\n        maxWidth: `${maxWidth}%`,\r\n      };\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {\r\n      padding,\r\n      children,\r\n      maxTabWidthPx,\r\n      isDataFadeOnly,\r\n      tabs,\r\n      initialIndex,\r\n    } = this.props;\r\n\r\n    const isUsingMaxWidth = maxTabWidthPx > 0;\r\n    const maxWidth = (100 - padding) / (isDataFadeOnly ? tabs.length : children.length);\r\n    const tabWidth = isUsingMaxWidth ? maxTabWidthPx : maxWidth;\r\n\r\n    this.state = {\r\n      activeIndex: initialIndex,\r\n      containerWidth: 0,\r\n      width: tabWidth,\r\n      widthPercentage: isUsingMaxWidth ? `${maxTabWidthPx}px` : `${tabWidth}%`,\r\n      maxWidth: `${maxWidth}%`,\r\n      paddingWidth: maxTabWidthPx ? '100%' : `${padding}%`,\r\n      isControlVisible: true,\r\n      isUsingMaxWidth,\r\n      // isDropDownControl: tabs && tabs.length > 10,\r\n      fadeStyle: '',\r\n      tabs,\r\n    };\r\n\r\n    this.goToIndex = this.goToIndex.bind(this);\r\n\r\n    this.handleResize = this.handleResize.bind(this);\r\n    this.resizeTabHeight = this.resizeTabHeight.bind(this);\r\n    this.renderTabs = this.renderTabs.bind(this);\r\n    this.renderTabContent = this.renderTabContent.bind(this);\r\n    this.renderControls = this.renderControls.bind(this);\r\n    this.renderSlides = this.renderSlides.bind(this);\r\n    this.renderScollableTabs = this.renderScollableTabs.bind(this);\r\n    this.renderSelectableTabs = this.renderSelectableTabs.bind(this);\r\n    this.renderDropControls = this.renderDropControls.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { tabs } = this.state;\r\n    const {\r\n      initialIndex,\r\n      name,\r\n      changeTab,\r\n    } = this.props;\r\n\r\n    changeTab(name, tabs[0].desc);\r\n\r\n    window.addEventListener('resize', this.handleResize);\r\n\r\n    this.handleResize();\r\n\r\n    this.resizeTabHeight(initialIndex, ReactDOM.findDOMNode(this.carousel));\r\n\r\n    this.setState({\r\n      activeIndex: initialIndex,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { tabs, activeIndex, containerWidth } = this.state;\r\n    const { setTriggerHeightUpdate } = this.props;\r\n    if (!prevProps.setTriggerHeightUpdate && setTriggerHeightUpdate) {\r\n      const { resizeTabHeight } = this;\r\n\r\n      setTriggerHeightUpdate(() => {\r\n        resizeTabHeight(activeIndex);\r\n      });\r\n    }\r\n\r\n    if (tabs !== prevState.tabs) {\r\n      this.resizeTabHeight(activeIndex);\r\n    }\r\n\r\n    if (this.tabContainer) {\r\n      const tabWidth = this.tabContainer.getBoundingClientRect().width;\r\n      if (tabWidth !== containerWidth) {\r\n        setTimeout(() => this.setState({ containerWidth: tabWidth }), 100);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  handleResize() {\r\n    const { isControlVisible, activeIndex } = this.state;\r\n    const { hideWidth } = this.props;\r\n\r\n    // this.setState({\r\n    //   isDropDownControl: window.innerWidth < 560 || (tabs && tabs.length > 10),\r\n    // });\r\n\r\n\r\n    this.resizeTabHeight(activeIndex);\r\n\r\n    if (hideWidth) {\r\n      const isVisibleNow = window.innerWidth > hideWidth;\r\n\r\n      this.setState({\r\n        isControlVisible: isVisibleNow,\r\n      });\r\n\r\n      if (isControlVisible && !isVisibleNow) {\r\n        this.goToIndex(0);\r\n      }\r\n    }\r\n  }\r\n\r\n  goToIndex(newIndex, isForced = false) {\r\n    const { tabs, activeIndex } = this.state;\r\n    if (!isForced && newIndex === activeIndex) {\r\n      return;\r\n    }\r\n    const {\r\n      name,\r\n      isDataFadeOnly,\r\n      changeTab,\r\n    } = this.props;\r\n\r\n\r\n    if (isDataFadeOnly) {\r\n      this.setState({\r\n        fadeStyle: 'animated fadeOut',\r\n      });\r\n\r\n      this.setState({ activeIndex: newIndex });\r\n      changeTab(name, tabs[newIndex].desc);\r\n\r\n      setTimeout(() => {\r\n        if (tabs[newIndex].onClick) {\r\n          tabs[newIndex].onClick();\r\n        }\r\n        this.setState({\r\n          fadeStyle: 'animated fadeIn',\r\n        });\r\n\r\n        setTimeout(() => {\r\n          this.setState({\r\n            fadeStyle: '',\r\n          });\r\n        }, 300);\r\n      }, 300);\r\n    } else {\r\n      this.setState({ activeIndex: newIndex });\r\n      changeTab(name, tabs[newIndex].desc);\r\n      if (tabs[newIndex].onClick) {\r\n        tabs[newIndex].onClick();\r\n      }\r\n    }\r\n\r\n    this.resizeTabHeight(newIndex);\r\n  }\r\n\r\n  resizeTabHeight(index, carouselIncoming = null, overrideNegation = null) {\r\n    const { isConstantHeight } = this.props;\r\n\r\n    const carouselToUse = carouselIncoming !== null ? carouselIncoming : ReactDOM.findDOMNode(this.carousel);\r\n    // No other way for now >_<\r\n    if (!isConstantHeight && carouselToUse) {\r\n      const list = carouselToUse.getElementsByTagName('UL')[0];\r\n      const children = list.children[index];\r\n\r\n      if (children) {\r\n        const sliderWrapper = list.parentNode;\r\n        const itemHeight = overrideNegation ? children.children[0].scrollHeight + overrideNegation : children.children[0].scrollHeight;\r\n        sliderWrapper.style.height = itemHeight === 0 ? 1000 : `${itemHeight}px`;\r\n      }\r\n    }\r\n  }\r\n\r\n  renderTabContent(tab, activeStyle) {\r\n    const {\r\n      big,\r\n    } = this.props;\r\n\r\n    const bigTextStyle = big ? 'tab-text-big' : '';\r\n\r\n    const isWithImg = !_.isString(tab);\r\n    const desc = isWithImg ? tab.desc : tab;\r\n    const img = isWithImg ? tab.img : null;\r\n\r\n    return (\r\n      <Fragment>\r\n        {\r\n          img ?\r\n            <div className=\"img-container\">\r\n              <img className={activeStyle} src={img} alt={`${desc}.svg`} />\r\n            </div>\r\n          :\r\n            null\r\n        }\r\n        <p className={`${activeStyle} ${bigTextStyle}`}>{desc}</p>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderTabs(width) {\r\n    const { activeIndex, tabs } = this.state;\r\n    const {\r\n      big,\r\n      maxTabWidthPx,\r\n    } = this.props;\r\n\r\n    const bigTabStyle = big ? 'tab-big' : '';\r\n\r\n    return _.map(tabs, (tab, index) => {\r\n      const tabStyle = index === activeIndex ? 'active' : 'inactive';\r\n      const maxWidth = maxTabWidthPx > 0 ? maxTabWidthPx : null;\r\n\r\n      return (\r\n        <div\r\n          className={`tab ${bigTabStyle}`}\r\n          style={{ width, maxWidth }}\r\n          key={`tab${index}`}\r\n        >\r\n          <div\r\n            className=\"tab-inner\"\r\n            onClick={() => { this.goToIndex(index); }}\r\n            role=\"button\"\r\n            tabIndex={-1}\r\n            onKeyDown={() => {}}\r\n          >\r\n            {this.renderTabContent(tab, tabStyle)}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderSlides() {\r\n    const { children } = this.props;\r\n    const { goToIndex } = this;\r\n\r\n    return _.map(children, (item, index) => (\r\n      <div key={`tab-item${index}`}>\r\n        {React.cloneElement(item, {\r\n          updateTabHeight: (overrideNegation = null) => this.resizeTabHeight(index, null, overrideNegation),\r\n          goToIndex,\r\n        })}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  renderScollableTabs() {\r\n    const { activeIndex, tabs } = this.state;\r\n    const { isDisableDropdown } = this.props;\r\n    const displayStyle = isDisableDropdown ? '' : 'd-none d-sm-flex';\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className={`scroll-tabs ${displayStyle}`}>\r\n          <Scrollbars style={{ width: '100%', height: '100%' }}>\r\n            <div className=\"scroll-tabs-inner\">\r\n              {\r\n                _.map(tabs, (tab, index) => {\r\n                  const tabStyle = index === activeIndex ? 'active' : 'inactive';\r\n                  return (\r\n                    <div\r\n                      key={`tab${index}`}\r\n                    >\r\n                      <div\r\n                        className={`tab-inner ${tabStyle}`}\r\n                        onClick={() => { this.goToIndex(index); }}\r\n                        role=\"button\"\r\n                        tabIndex={-1}\r\n                        onKeyDown={() => {}}\r\n                      >\r\n                        {tab.desc}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })\r\n              }\r\n            </div>\r\n          </Scrollbars>\r\n        </div>\r\n        {\r\n          !isDisableDropdown ?\r\n            <div className=\"d-flex d-sm-none w-100\">\r\n              {this.renderDropControls()}\r\n            </div>\r\n          : null\r\n        }\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderDropControls() {\r\n    const { tabs, activeIndex } = this.state;\r\n    const droplist = _.map(tabs, tab => ({ display_name: tab.desc, value: tab.desc }));\r\n\r\n    return (\r\n      <div className=\"tab-container\">\r\n        <DropDown\r\n          placeholderString=\"Make selection\"\r\n          dropList={droplist}\r\n          value={{ display_name: tabs[activeIndex].desc, value: tabs[activeIndex].desc }}\r\n          isDisableTyping\r\n          onChange={(type, name, value) => {\r\n            this.goToIndex(_.findIndex(tabs, tab => tab.desc === value.value));\r\n          }}\r\n          noInternalDesc\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderSelectableTabs() {\r\n    const {\r\n      activeIndex,\r\n      width,\r\n      widthPercentage,\r\n      maxWidth,\r\n      containerWidth,\r\n      paddingWidth,\r\n      isUsingMaxWidth,\r\n      tabs,\r\n    } = this.state;\r\n\r\n    const {\r\n      style,\r\n      big,\r\n      charged,\r\n      isDisableDropdown,\r\n    } = this.props;\r\n\r\n    const isOverContainer = tabs && tabs.length * width > containerWidth;\r\n    const selectedMargin = isUsingMaxWidth && !isOverContainer ? activeIndex * width : `${activeIndex / tabs.length * 100}%`;\r\n    const bigStyle = big ? 'tab-big' : '';\r\n    const tabStyle = charged ? 'tab-container-charged' : '';\r\n    const displayStyle = isDisableDropdown ? '' : 'd-none d-lg-flex';\r\n\r\n    return (\r\n      <Fragment>\r\n        <div\r\n          style={style}\r\n          className={`tab-container ${tabStyle} tab-container-padding ${displayStyle}`}\r\n          ref={node => this.tabContainer = node}\r\n        >\r\n          {this.renderTabs(isOverContainer ? maxWidth : widthPercentage)}\r\n          <div className=\"tab tab-padding\" style={{ width: paddingWidth }} />\r\n          <div\r\n            className={`selected-tab ${bigStyle}`}\r\n            style={{\r\n              width: widthPercentage,\r\n              maxWidth,\r\n              marginLeft: selectedMargin,\r\n            }}\r\n          />\r\n        </div>\r\n        {\r\n          !isDisableDropdown ?\r\n            <div className=\"d-flex d-lg-none w-100\">\r\n              {this.renderDropControls()}\r\n            </div>\r\n          : null\r\n        }\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderControls() {\r\n    const { scrollTabs } = this.props;\r\n\r\n    if (scrollTabs) {\r\n      return this.renderScollableTabs();\r\n    }\r\n\r\n    return this.renderSelectableTabs();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      activeIndex,\r\n      isControlVisible,\r\n      fadeStyle,\r\n    } = this.state;\r\n\r\n    const { isDataFadeOnly, className } = this.props;\r\n\r\n    return (\r\n      <div className={`tabview-container-new ${className}`}>\r\n        {\r\n          isControlVisible ?\r\n            this.renderControls()\r\n          :\r\n            null\r\n        }\r\n        <div className={`tab-items-container ${fadeStyle}`}>\r\n          {\r\n            isDataFadeOnly ?\r\n              this.props.children\r\n            :\r\n              <Carousel\r\n                showThumbs={false}\r\n                showIndicators={false}\r\n                showArrows={false}\r\n                showStatus={false}\r\n                selectedItem={activeIndex}\r\n                swipeable={false}\r\n                onChange={index => this.goToIndex(index)}\r\n                ref={node => (this.carousel = node)}\r\n              >\r\n                {this.renderSlides()}\r\n              </Carousel>\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTabViewNew.defaultProps = {\r\n  padding: 0,\r\n  hideWidth: 0,\r\n  maxTabWidthPx: 0,\r\n  style: null,\r\n  isDisableDropdown: false,\r\n  isConstantHeight: false,\r\n  initialIndex: 0,\r\n  setTriggerHeightUpdate: null,\r\n  isDataFadeOnly: false,\r\n  big: false,\r\n  className: null,\r\n  charged: null,\r\n  scrollTabs: false,\r\n};\r\n\r\nTabViewNew.propTypes = {\r\n  padding: PropTypes.number,\r\n  tabs: PropTypes.array.isRequired,\r\n  hideWidth: PropTypes.number,\r\n  maxTabWidthPx: PropTypes.number,\r\n  style: PropTypes.object,\r\n  isDisableDropdown: PropTypes.bool,\r\n  isConstantHeight: PropTypes.bool,\r\n  initialIndex: PropTypes.number,\r\n  setTriggerHeightUpdate: PropTypes.func,\r\n  isDataFadeOnly: PropTypes.bool,\r\n  big: PropTypes.bool,\r\n  name: PropTypes.string.isRequired,\r\n  className: PropTypes.string,\r\n  charged: PropTypes.bool,\r\n  changeTab: PropTypes.func.isRequired,\r\n  scrollTabs: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n  currentTabSelection: state.tab[props.name],\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  changeTab: (tabName, value) => {\r\n    dispatch(setTabSelection(tabName, value));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps, null, { withRef: true })(TabViewNew);\r\n","module.exports = __webpack_public_path__ + \"static/media/Label.500a43ce.svg\";","/**\r\n * PiggySignUp.js\r\n * The piggy sign up template\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport PiggyBank from 'assets/images/forms/PiggyBank.svg';\r\n\r\nimport './PiggySignUpNew.scss';\r\n\r\nclass PiggySignUpNew extends Component {\r\n  render() {\r\n    const {\r\n      header,\r\n      subHeader,\r\n      onClick,\r\n      isLoggedIn,\r\n    } = this.props;\r\n\r\n    return (\r\n      <div\r\n        className={`piggy-container-new ${isLoggedIn ? 'piggy-hovered' : 'piggy-hover'}`}\r\n        onClick={onClick}\r\n        role=\"button\"\r\n        tabIndex={-1}\r\n        onKeyDown={null}\r\n      >\r\n        <Col className=\"d-flex d-sm-none wrap-container\" xs={12}>\r\n          <div className=\"piggy-img-container\">\r\n            <img src={PiggyBank} alt=\"Pig.svg\" />\r\n          </div>\r\n          <div className=\"piggy-right-container\">\r\n            <div className=\"piggy-desc-container\">\r\n              {header}\r\n              {subHeader}\r\n            </div>\r\n          </div>\r\n        </Col>\r\n        <Col className=\"d-none d-sm-flex wrap-container\" xs={12}>\r\n          <div className=\"piggy-img-container\">\r\n            <img src={PiggyBank} alt=\"Pig.svg\" />\r\n          </div>\r\n          <div className=\"piggy-right-container\">\r\n            <div className=\"piggy-desc-container\">\r\n              {header}\r\n              {subHeader}\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPiggySignUpNew.defaultProps = {\r\n  onClick: () => {},\r\n  isLoggedIn: false,\r\n  subHeader: null,\r\n};\r\n\r\nPiggySignUpNew.propTypes = {\r\n  header: PropTypes.object.isRequired,\r\n  subHeader: PropTypes.object,\r\n  onClick: PropTypes.func,\r\n  isLoggedIn: PropTypes.bool,\r\n};\r\n\r\nexport default PiggySignUpNew;\r\n","/**\r\n * PiggyFillForm.js\r\n * The piggy component in DetailForm\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n * @author [Nicolette](nicolette@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport PiggySignUp from './PiggySignUpNew';\r\n\r\nclass PiggyFillFormNew extends Component {\r\n  render() {\r\n    const {\r\n      onClick,\r\n      category,\r\n      mainText,\r\n      descText,\r\n      isLoggedIn,\r\n      cashback,\r\n    } = this.props;\r\n\r\n    let mainTextToUse = mainText;\r\n    let descTextToUse = descText;\r\n\r\n    if (!mainTextToUse) {\r\n      mainTextToUse = category === 'life' || category === 'endowment' || category === 'retirement' ?\r\n        'Earn extra $5 Credits instantly!' :\r\n        'Sign in to get 5% Cashback on your purchase!';\r\n    }\r\n\r\n    if (!descTextToUse) {\r\n      descTextToUse = category === 'life' || category === 'endowment' || category === 'retirement' ?\r\n        'Submit the form below as a PolicyPal user to earn $5 Credits in your account.' :\r\n        'Purchase as a PolicyPal user to earn 5% Cashback in your account within 14 days.';\r\n    }\r\n\r\n    if (isLoggedIn && cashback) {\r\n      mainTextToUse = `Proceed to earn ${cashback} cashback now!`;\r\n      descTextToUse = null;\r\n    }\r\n\r\n\r\n    return (\r\n      <PiggySignUp\r\n        isLoggedIn={isLoggedIn}\r\n        header={\r\n          <p className=\"main-text\">{mainTextToUse}</p>\r\n        }\r\n        subHeader={\r\n          descTextToUse && <p className=\"desc-text\">{descTextToUse}</p>\r\n        }\r\n        onClick={!isLoggedIn && onClick ? onClick : null}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nPiggyFillFormNew.defaultProps = {\r\n  onClick: () => {},\r\n  mainText: null,\r\n  descText: null,\r\n  isLoggedIn: false,\r\n  cashback: null,\r\n};\r\n\r\nPiggyFillFormNew.propTypes = {\r\n  onClick: PropTypes.func,\r\n  category: PropTypes.string.isRequired,\r\n  mainText: PropTypes.string,\r\n  descText: PropTypes.string,\r\n  isLoggedIn: PropTypes.bool,\r\n  cashback: PropTypes.string,\r\n};\r\n\r\nexport default PiggyFillFormNew;\r\n","/**\r\n * RedirectPopupForm.js\r\n * The form view of the redirect component\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { reduxForm } from 'redux-form';\r\nimport { Row, Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport TextInput from '../../Forms/TextInput/TextInput';\r\nimport Selection from '../../Forms/Selection/Selection';\r\n\r\nimport { validateForm } from '../../../lib/validators';\r\n\r\n\r\nclass RedirectPopupForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      errorString: null,\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    const { onConfirm, category, noEmail } = this.props;\r\n    const email = noEmail ? [] : ['email'];\r\n\r\n    const errorResult = validateForm(e, [...email, 'disclaimer']);\r\n\r\n    if (!noEmail && errorResult.email) {\r\n      this.setState({\r\n        errorString: 'Invalid email!',\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (_.isEmpty(e.disclaimer)) {\r\n      this.setState({\r\n        errorString: 'Please agree to the terms to proceed.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!_.isEmpty(errorResult)) {\r\n      this.setState({\r\n        errorString: 'Please fill in all fields!',\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      errorString: null,\r\n    });\r\n\r\n    onConfirm({ ...e, category });\r\n  }\r\n\r\n  render() {\r\n    const { errorString } = this.state;\r\n    const {\r\n      handleSubmit,\r\n      form,\r\n      change,\r\n      noEmail,\r\n    } = this.props;\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit(this.handleSubmit)}>\r\n        <div className=\"mid-container\">\r\n          <Row noGutters>\r\n            {\r\n              noEmail ?\r\n                null\r\n              :\r\n                <Col xs={12}>\r\n                  <TextInput\r\n                    form={form}\r\n                    change={change}\r\n                    name=\"email\"\r\n                    placeholderString=\"\"\r\n                    size=\"medium\"\r\n                    zIndex={99}\r\n                    desc=\"Email Address\"\r\n                  />\r\n                </Col>\r\n            }\r\n            <Col xs={12}>\r\n              <Selection\r\n                form={form}\r\n                change={change}\r\n                name=\"disclaimer\"\r\n                type=\"checkbox\"\r\n                options={[\r\n                  { key: 'disclaimer', description: 'I agree to store this policy in my PolicyPal account after purchase, in accordance with the Personal Data Protection Act.' },\r\n                ]}\r\n                sizeInSM={12}\r\n                desc=\"\"\r\n              />\r\n            </Col>\r\n            {\r\n              errorString ?\r\n                <Col xs={12}>\r\n                  <p className=\"error-string\">{errorString}</p>\r\n                </Col>\r\n              :\r\n                null\r\n            }\r\n          </Row>\r\n        </div>\r\n        <div className=\"button-container\">\r\n          <Button\r\n            type=\"submit\"\r\n            className=\"checkout-button\"\r\n            variant=\"medium-flat-green\"\r\n            width={166}\r\n            height={72}\r\n          >\r\n            <p>Confirm</p>\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nRedirectPopupForm.defaultProps = {\r\n  category: null,\r\n  noEmail: false,\r\n};\r\n\r\nRedirectPopupForm.propTypes = {\r\n  onConfirm: PropTypes.func.isRequired,\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  form: PropTypes.string.isRequired,\r\n  change: PropTypes.func.isRequired,\r\n  category: PropTypes.string,\r\n  noEmail: PropTypes.bool,\r\n};\r\n\r\nexport default reduxForm({\r\n  form: 'redirect-form',\r\n})(RedirectPopupForm);\r\n","/**\r\n * RedirectPopup.js\r\n * Popup to inform users that we are redirecting\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport RedirectPopupForm from './RedirectPopupForm';\r\nimport Popup from '../Popup/Popup';\r\n\r\nimport './RedirectPopup.scss';\r\n\r\nclass RedirectPopup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      category: null,\r\n    };\r\n\r\n    this.openRedirectPopup = this.openRedirectPopup.bind(this);\r\n  }\r\n\r\n  openRedirectPopup(category) {\r\n    this.setState({\r\n      category,\r\n    });\r\n    setTimeout(this.popupRef.openPopup, 100);\r\n  }\r\n\r\n  render() {\r\n    const { category } = this.state;\r\n    const { onConfirm, noEmail } = this.props;\r\n\r\n    return (\r\n      <Popup ref={(r) => { this.popupRef = r; }}>\r\n        <Fragment>\r\n          <div className=\"redirect-popup\">\r\n            <div className=\"upper-container\">\r\n              <p>{'Kindly fill up the following section before we redirect you to the insurer\\'s page. The details below will be used for verification with the insurer after purchase.'}</p>\r\n            </div>\r\n            <RedirectPopupForm\r\n              noEmail={noEmail}\r\n              closPopup={() => this.popupRef.closePopup()}\r\n              onConfirm={onConfirm}\r\n              category={category}\r\n            />\r\n          </div>\r\n        </Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n}\r\n\r\nRedirectPopup.defaultProps = {\r\n  noEmail: false,\r\n};\r\n\r\nRedirectPopup.propTypes = {\r\n  onConfirm: PropTypes.func.isRequired,\r\n  noEmail: PropTypes.bool,\r\n};\r\n\r\nexport default RedirectPopup;\r\n\r\n","/**\r\n * ChangeInitialFormData.js\r\n * This is the green pencil button that appears mainly on\r\n * the compare view which will render the Edit Detail forms\r\n * of each category.\r\n *\r\n * Users will be able to change that form through this component\r\n * and will do a callback to update any changes, eg for compare view.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport React, { Component, Fragment } from 'react';\r\n// import { connect } from 'react-redux';\r\nimport { Modal, ModalHeader, Tooltip } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport EditButton from 'assets/images/forms/EditButton.svg';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\n\r\nimport { simplifyCost } from '../../../lib/helperFunctions';\r\n\r\nimport './ChangeInitialFormDataNew.scss';\r\n\r\nclass ChangeInitialFormDataNew extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      modal: false,\r\n      revertFunc: () => {},\r\n      isToolTip: false,\r\n    };\r\n\r\n    // this.renderHeader = this.renderHeader.bind(this);\r\n    this.renderDetailValues = this.renderDetailValues.bind(this);\r\n    this.renderEditButton = this.renderEditButton.bind(this);\r\n    this.toggle = this.toggle.bind(this);\r\n  }\r\n\r\n  // componentDidMount() {\r\n  //   const { resetSubmit } = this.props;\r\n\r\n  //   resetSubmit();\r\n  // }\r\n\r\n  // shouldComponentUpdate(nextProps, nextState) {\r\n  //   const {\r\n  //     closePopUp,\r\n  //     toolTipData,\r\n  //     modal,\r\n  //     isToolTip,\r\n  //   } = this.state;\r\n  //   const { resetSubmit } = this.props;\r\n\r\n  //   if (nextProps.isEditSubmitted) {\r\n  //     resetSubmit();\r\n  //   }\r\n\r\n  //   return nextProps.isEditSubmitted ||\r\n  //         closePopUp !== nextState.closePopUp ||\r\n  //         toolTipData !== nextState.toolTipData ||\r\n  //         modal !== nextState.modal ||\r\n  //         isToolTip !== nextState.isToolTip;\r\n  // }\r\n\r\n  toggle(revertFunc) {\r\n    const { modal } = this.state;\r\n\r\n    if (modal && revertFunc) {\r\n      revertFunc();\r\n    }\r\n\r\n    this.setState({\r\n      modal: !modal,\r\n    });\r\n  }\r\n\r\n  // renderHeader() {\r\n  //   const { headerValue, storeForm } = this.props;\r\n  //   if (storeForm && headerValue) {\r\n  //     const value = storeForm[headerValue] ? storeForm[headerValue] : '';\r\n  //     return <span className=\"edit-detail-header\">{value}</span>;\r\n  //   }\r\n\r\n  //   return null;\r\n  // }\r\n\r\n  renderDetailValues(isResp) {\r\n    const { isToolTip } = this.state;\r\n    const {\r\n      values,\r\n      valuesToListen,\r\n      conditions,\r\n    } = this.props;\r\n\r\n    const conditonValue = conditions ? values[conditions.key] && values[conditions.key].value : null;\r\n    const valuesArrayToListen = conditonValue ? conditions.values[conditonValue] : null;\r\n\r\n    if (!values) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-detail-value-container-new\">\r\n        {\r\n          _.reduce(valuesToListen, (result, data, index) => {\r\n            if (\r\n              !valuesArrayToListen ||\r\n              (valuesArrayToListen && _.findIndex(valuesArrayToListen, value => value === data.value) !== -1)\r\n            ) {\r\n              const value = values[data.value] ? values[data.value].value : 'None';\r\n              let displayValue = value;\r\n              let isArray = false;\r\n\r\n              if (data.customFunc) {\r\n                displayValue = data.customFunc();\r\n              } else if (data.extra === 'cost_simplify') {\r\n                displayValue = simplifyCost(value);\r\n              } else if (value.constructor === Array) {\r\n                isArray = true;\r\n                displayValue = [...value];\r\n                if (data.aggregateDesc && displayValue.length > 1) {\r\n                  displayValue = `${displayValue.length} ${data.aggregateDesc}`;\r\n                }\r\n              } else if (value.constructor === Object) {\r\n                displayValue = value.display_name;\r\n              } else if (value.constructor === Date) {\r\n                displayValue = moment(value).format('DD MMM YYYY');\r\n              }\r\n\r\n              displayValue = displayValue.toString();\r\n\r\n              let jsx = null;\r\n              if (isResp) {\r\n                const isLast = index === valuesToListen.length - 1;\r\n                const comma = isLast ? '' : ',';\r\n                jsx = (\r\n                  <div key={`detail-${index}`} className=\"detail-resp-value\">{displayValue}{comma}</div>\r\n                );\r\n              } else {\r\n                jsx = (\r\n                  <div className=\"edit-detail-value\" key={`detail-${index}`}>\r\n                    <img\r\n                      src={data.logo}\r\n                      alt={`${data.value}.svg`}\r\n                      className=\"detail-logo\"\r\n                    />\r\n                    <span className=\"detail-value\">\r\n                      {displayValue}\r\n                      {\r\n                        isArray && value.length > 1 ?\r\n                          <Fragment>\r\n                            <Tooltip\r\n                              target={`initial-form-tooltip-${index}`}\r\n                              isOpen={isToolTip}\r\n                              toggle={() => this.setState({ isToolTip: false })}\r\n                              className=\"animated fade\"\r\n                            >\r\n                              {_.map(value, (v, idx) => <p key={`tooltip-value-${idx}`}>{v}</p>)}\r\n                            </Tooltip>\r\n                            <div\r\n                              id={`initial-form-tooltip-${index}`}\r\n                              className=\"tooltip-button\"\r\n                              onMouseMove={() => {\r\n                                this.setState({\r\n                                  isToolTip: true,\r\n                                });\r\n                              }}\r\n                            >\r\n                              <p>i</p>\r\n                            </div>\r\n                          </Fragment>\r\n                        :\r\n                          null\r\n                      }\r\n                    </span>\r\n                  </div>\r\n                );\r\n              }\r\n              result.push(jsx);\r\n            }\r\n\r\n            return result;\r\n          }, [])\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderEditButton(isResp) {\r\n    if (isResp) {\r\n      return (\r\n        <div\r\n          role=\"button\"\r\n          tabIndex={-1}\r\n          onKeyDown={() => {}}\r\n          onClick={() => {\r\n            // this.popupRef.openPopup();\r\n            this.toggle();\r\n          }}\r\n        >\r\n          <img src={EditButton} alt=\"EditButton.svg\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Button\r\n        variant=\"medium-outline-edit\"\r\n        height={40}\r\n        onClick={() => {\r\n          // this.popupRef.openPopup();\r\n          this.toggle();\r\n        }}\r\n      >\r\n        <p>Edit</p>\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { modal, revertFunc } = this.state;\r\n    const { submitCallback, displayOnly } = this.props;\r\n\r\n    if (displayOnly) {\r\n      return (\r\n        this.renderDetailValues(false)\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"change-form-container-new\">\r\n        <div className=\"edit-detail-container d-none d-lg-flex\">\r\n          {/* {this.renderHeader()} */}\r\n          <div className=\"edit-detail-inner-container\">\r\n            {this.renderDetailValues(false)}\r\n          </div>\r\n          {this.renderEditButton(false)}\r\n        </div>\r\n        <div className=\"edit-detail-resp-container d-flex d-lg-none\">\r\n          <div className=\"detail-inner-resp-container\">\r\n            {this.renderDetailValues(true)}\r\n          </div>\r\n          {this.renderEditButton(true)}\r\n        </div>\r\n        <Modal\r\n          isOpen={modal}\r\n          size=\"lg\"\r\n          backdropClassName=\"blue-modal-backdrop\"\r\n        >\r\n          <ModalHeader toggle={() => this.toggle(revertFunc)} />\r\n          {React.cloneElement(this.props.children, {\r\n            submitCallback,\r\n            closePopUp: (func = () => {}) => { this.toggle(); func(); },\r\n            setCloseCallBack: (func = () => {}) => this.setState({ revertFunc: func }),\r\n          })}\r\n        </Modal>\r\n        {/* <Popup ref={(r) => { this.popupRef = r; }}>\r\n          {React.cloneElement(this.props.children, {\r\n            submitCallback,\r\n          })}\r\n        </Popup> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChangeInitialFormDataNew.defaultProps = {\r\n  submitCallback: null,\r\n  conditions: null,\r\n  headerValue: null,\r\n  displayOnly: false,\r\n  values: null,\r\n};\r\n\r\nChangeInitialFormDataNew.propTypes = {\r\n  valuesToListen: PropTypes.array.isRequired,\r\n  // storeForm: PropTypes.object.isRequired,\r\n  // isEditSubmitted: PropTypes.bool.isRequired,\r\n  // resetSubmit: PropTypes.func.isRequired,\r\n  submitCallback: PropTypes.func,\r\n  conditions: PropTypes.object,\r\n  headerValue: PropTypes.string,\r\n  displayOnly: PropTypes.bool,\r\n  values: PropTypes.object,\r\n};\r\n\r\n// const mapStateToProps = (state, ownProps) => ({\r\n//   // isEditSubmitted: state.editForm.isEditSubmitted,\r\n// });\r\n\r\n// const mapDispatchToProps = dispatch => ({\r\n// });\r\n\r\n// connect(mapStateToProps, mapDispatchToProps)(ChangeInitialFormDataNew);\r\n\r\nexport default ChangeInitialFormDataNew;\r\n"],"sourceRoot":""}