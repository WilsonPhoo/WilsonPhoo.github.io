(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1088:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),i=a.n(r),l=a(6),o=a(45),c=a(46),s=a(48),u=a(47),m=a(49),p=a(114),d=a(227),f=a.n(d),h=a(35),b=a.n(h),g=a(12),v=a.n(g),O=a(1),y=a.n(O),E=a(298),j=a(56),S=a(305),k=a(78),C=a(5),P=a.n(C),F=a(329),D=a(115),x=a(495),N=a(395),w=a(324),L=a(360),I=a(374),T=a(13),_=a(80),R=a(79),A=a(32),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={sessionId:null,errorStringData:{},errorArray:[]},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.validateForm=a.validateForm.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.sessionId;return a!==t.sessionId?{sessionId:a}:null}}]),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state.sessionId,a=this.props.loadingEnd;t&&(a(),setTimeout(function(){e.checkoutComplete.openCheckoutComplete(),Object(A.a)("LifeConfirmationS")},300))}},{key:"validateForm",value:function(e){var t=Object(_.b)(e,["email","name","birth_date","mobile_number"]);this.setState({errorStringData:t});var a=[];return P.a.isEmpty(t)||(a=[y.a.createElement("p",{className:"error-string",key:"error-1"},"Fields are not properly filled, please check again.")]),this.setState({errorArray:a}),t}},{key:"checkout",value:function(e){var t=this.props.checkOutOthers;Object(A.b)("PPS2 - ButtonClick - Life - DetailForm_Checkout",{Product:"Life",Click_Text:"Checkout"}),Object(A.c)("Life - DetailForm - Checkout",{event_category:"Life",event_label:"Life - DetailForm - Checkout"}),t(e)}},{key:"handleSubmit",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.props,r=n.storeForm,i=n.noSynergy,l=this.validateForm(a?e:r),o=P.a.isEmpty(l);Object(_.a)(o,a,l,function(e){return t.setState({errorStringData:e,errorArray:null})},function(){return t.handleSubmit(r,!1)})||(o&&(i?this.checkout(e):(Object(A.a)("LifeConfirm1A"),Object(A.a)("LifeNoticeS"),this.popup.openPopupWithJSX(Object(T.C)(),!0,function(){Object(A.a)("LifeConfirm2A"),setTimeout(function(){t.checkout(e)},350)}))),v.a.scrollTo(0,b.a.body.scrollHeight))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorStringData,n=t.errorArray,r=this.props,i=r.form,l=r.change,o=r.planDetails,c=r.isLoggedIn,s=r.piggyCallback,u=r.changePlan,m=r.storeForm;return y.a.createElement(O.Fragment,null,y.a.createElement(x.a,{category:"life",changePlan:u,handleSubmit:this.props.handleSubmit,onSubmit:this.handleSubmit,change:l,form:i,planDetails:o,isLoggedIn:c,piggyCallback:s,errorArray:n,checkoutButtonDesc:"Confirm"},y.a.createElement(D.y,{className:"main-form",noGutters:!0},y.a.createElement(D.f,{xs:12},y.a.createElement(N.a,{form:i,change:l,name:"email",placeholderString:"",size:"medium",zIndex:99,desc:"Email Address",errorString:a.email,validateForm:function(){return e.validateForm(m)}})),y.a.createElement(D.f,{className:"right-padding",xs:12,sm:6},y.a.createElement(N.a,{form:i,change:l,name:"name",placeholderString:"",size:"medium",zIndex:98,desc:"Full Name",errorString:a.name,validateForm:function(){return e.validateForm(m)}})),y.a.createElement(D.f,{className:"left-padding",xs:12,sm:6},y.a.createElement(w.a,{form:i,change:l,name:"birth_date",size:"medium",zIndex:97,desc:"Date of Birth",errorString:a.birth_date,validateForm:function(){return e.validateForm(m)},endDate:new Date})),y.a.createElement(D.f,{className:"right-padding",xs:12,sm:6},y.a.createElement(N.a,{form:i,change:l,name:"mobile_number",placeholderString:"",size:"medium",zIndex:96,desc:"Mobile Number",errorString:a.mobile_number,validateForm:function(){return e.validateForm(m)}})))),y.a.createElement(I.a,{ref:function(t){return e.popup=t},showCancelButton:!0}),y.a.createElement(L.a,{isQuoteOnly:!0,isSellLeads:!0,wrappedComponentRef:function(t){return e.checkoutComplete=t}}))}}]),t}(O.Component);B.defaultProps={storeForm:null,noSynergy:!1};var z=Object(F.a)({form:"life-detail",destroyOnUnmount:!1})(Object(j.connect)(function(e){return{storeForm:Object(S.a)("life-detail")(e),constants:e.insurance.constants}},function(e){return{loadingEnd:function(){e(Object(R.c)())}}})(B)),V=a(549),M=a(41),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).submitCallback=a.submitCallback.bind(Object(p.a)(Object(p.a)(a))),a.lifeRedirect=a.lifeRedirect.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setFormState)(T.b.DETAILFORM.index),Object(A.b)("PPS2 - Pageview - Life - DetailForm",{Product:"Life"}),Object(A.d)({page_title:"Life - Detail Form",page_path:"/life/detailform"}),Object(A.a)("LifeDetailsS")}},{key:"submitCallback",value:function(e){var t=this.props,a=t.selectedPlanData,n=t.checkOutOthers,r=t.loading;if("webview"===a.info.deep_link.integration_type)return this.RedirectPop.openRedirectPopup(),void Object(A.a)("LifeRedirectS");r(),n(e)}},{key:"lifeRedirect",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,a,n,r,l,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.lifeForm,n=t.lifeDetailForm,r=t.selectedPlanData,(0,t.loading)(),e.next=4,Object(M.m)(a,n,r);case 4:if(l=e.sent,"singlife"===r.info.insurer_slug){for(;this.redirectButton.firstChild;)this.redirectButton.removeChild(this.redirectButton.firstChild);o=b.a.createRange(),this.redirectButton.appendChild(o.createContextualFragment(l.form_html)),setTimeout(function(){return f()("#".concat(l.form_id)).get(0).submit()},300),Object(A.a)("LifeConfirmA")}case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.plansData,n=t.isLoggedIn,r=t.profileValues,i=t.piggyCallback,l=t.lifeFields,o=t.sessionId,c=t.selectedPlanData,s=t.history;if(!a)return null;var u=a,m="singlife"===c.info.insurer_slug,p={logo:k.a.others,logoDesc:"",planName:"",planTotal:null};try{p={logo:k.a[u.info.insurer_slug],logoDesc:"".concat(u.info.insurer_name,".svg"),planName:u.info.product_name,planTotal:"$".concat(u.policyInfo[u.planType].net_price.toFixed(2))}}catch(d){console.log("Get plan details failed")}return y.a.createElement(O.Fragment,null,y.a.createElement(z,{lifeFields:l,selectedData:u,planDetails:p,isLoggedIn:n,sessionId:o,piggyCallback:i,checkOutOthers:this.submitCallback,changePlan:function(){s.goBack(),Object(A.b)("PPS2 - ButtonClick - Life - DetailForm_ChangePlan",{Product:"Life",Click_Text:"ChangePlan"}),Object(A.c)("Life - DetailForm - ChangePlan",{event_category:"Life",event_label:"Life - DetailForm - ChangePlan"})},profileValues:r,noSynergy:m}),y.a.createElement(V.a,{ref:function(t){return e.RedirectPop=t},noEmail:!0,onConfirm:function(){e.lifeRedirect()}}),y.a.createElement("div",{className:"redirect-button",ref:function(t){return e.redirectButton=t}}))}}]),t}(O.Component);Q.defaultProps={sessionId:null,plansData:null,lifeDetailForm:null};t.default=Object(E.a)(Object(j.connect)(function(e){return{lifeForm:Object(S.a)("life")(e),lifeDetailForm:Object(S.a)("life-detail")(e),lifeFields:e.life.lifeFields,profileValues:e.userDetails,plansData:e.life.selectedPlanData,sessionId:e.insurance.sessionId,selectedPlanData:e.life.selectedPlanData}},function(e){return{getAnonymousSession:function(t){e(Object(T.v)(t,!0))},setFormState:function(t){e(Object(T.K)(t))},loading:function(t,a,n){e(Object(R.d)(t,a,n))}}},function(e,t,a){return Object(n.a)({},a,e,t,{checkOutOthers:function(a){t.getAnonymousSession(Object(M.j)(e.lifeForm,a,e.plansData),!0)}})})(Q))},301:function(e,t,a){e.exports=a.p+"static/media/arrow.bf1f0d90.svg"},303:function(e,t,a){"use strict";var n=a(45),r=a(48),i=a(47),l=a(46),o=a(49),c=a(114),s=a(1),u=a.n(s),m=(a(388),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={errorString:null},a.setErrorString=a.setErrorString.bind(Object(c.a)(Object(c.a)(a))),a.clearErrorString=a.clearErrorString.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.errorString!==e.errorString?{errorString:e.errorString,refValue:e.refValue}:e.validateForm&&t.errorString&&t.refValue!==e.refValue?(e.validateForm(),{errorString:null}):null}}]),Object(l.a)(t,[{key:"setErrorString",value:function(e){this.setState({errorString:e})}},{key:"clearErrorString",value:function(){this.setState({errorString:null})}},{key:"render",value:function(){var e=this.state.errorString,t=this.props,a=t.desc,n=t.extraInfo;return u.a.createElement("div",{className:"input-wrapper-main input-wrapper-error"},null!==a?u.a.createElement("p",{className:"input-wrapper-desc"},a):null,this.props.children,null!==n?u.a.createElement("div",{className:"extra-info-container"},n):null,null!==e?u.a.createElement("p",{className:"input-wrapper-error-text"},e):null)}}]),t}(s.Component));m.defaultProps={desc:null,extraInfo:null},t.a=m},314:function(e,t,a){e.exports=a.p+"static/media/magnifyGlass.eedb8132.svg"},355:function(e,t,a){e.exports=a.p+"static/media/CheckoutComplete.7a48570a.svg"},356:function(e,t,a){},360:function(e,t,a){"use strict";var n=a(45),r=a(46),i=a(48),l=a(47),o=a(49),c=a(114),s=a(1),u=a.n(s),m=a(298),p=a(355),d=a.n(p),f=a(299),h=a(310),b=(a(356),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={animateStyle:""},a.openCheckoutComplete=a.openCheckoutComplete.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"openCheckoutComplete",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({animateStyle:"bounce-in",userName:t}),setTimeout(function(){e.popupRef.openPopup()},10)}},{key:"renderUpperText",value:function(){var e=this.state.userName,t=this.props,a=t.isQuoteOnly,n=t.upperText;return a?u.a.createElement("p",null,n||"Success"):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"Thank you for your"),u.a.createElement("p",null,u.a.createElement("span",null,"purchase, "),u.a.createElement("span",{className:"focus-text"},e)))}},{key:"renderMidText",value:function(){var e=this.props,t=e.isQuoteOnly,a=e.midText;return t?null!==a?u.a.createElement(s.Fragment,null,u.a.createElement("p",null,a)):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"Thanks for submitting your request."),u.a.createElement("p",null,"The insurer\u2019s representative will contact you within 2 business days to share with you more about the selected product.")):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"A copy of the receipt has been sent to"),u.a.createElement("p",null,"your inbox."),u.a.createElement("p",null,"The policy will be reflected in PolicyPal's APP once approved."))}},{key:"renderButton",value:function(){var e=this,t=this.props,a=t.history,n=t.isQuoteOnly,r=t.buttonText,i=t.callback;return n?u.a.createElement(f.a,{className:"checkout-button",variant:"medium-flat-green",width:166,height:72,onClick:function(){if(i)return i(),void e.popupRef.togglePopup(!1);a.push("/")}},u.a.createElement("p",null,r||"OK")):u.a.createElement(s.Fragment,null,u.a.createElement(f.a,{className:"checkout-button",variant:"medium-flat",width:166,height:72,onClick:function(){return a.push("/gotoappstore")}},u.a.createElement("p",null,"Download APP")),u.a.createElement(f.a,{className:"checkout-button",variant:"medium-flat-green",width:166,height:72,onClick:function(){return e.popupRef.closePopup()}},u.a.createElement("p",null,"Details")))}},{key:"render",value:function(){var e=this,t=this.state.animateStyle,a=this.props,n=a.isSellLeads,r=a.className,i=n?"In the event that you purchase a plan through our partner, PolicyPal receives a referral fee.":"";return u.a.createElement(h.a,{className:r,hideCloseButton:!0,ref:function(t){e.popupRef=t}},u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"check-out-popup"},u.a.createElement("img",{className:t,src:d.a,alt:"CheckoutComplete.svg"}),u.a.createElement("div",{className:"upper-container upper-margin-up"},this.renderUpperText()),u.a.createElement("div",{className:"mid-container"},this.renderMidText()),u.a.createElement("div",{className:"button-container"},this.renderButton()),u.a.createElement("div",{className:"extra-text"},u.a.createElement("p",null,i)))))}}]),t}(s.Component));b.defaultProps={isQuoteOnly:!1,isSellLeads:!1,upperText:null,midText:null,buttonText:null,callback:null,className:""},t.a=Object(m.a)(b,{withRef:!0})},373:function(e,t,a){},388:function(e,t,a){},545:function(e,t,a){},549:function(e,t,a){"use strict";var n=a(45),r=a(46),i=a(48),l=a(47),o=a(49),c=a(114),s=a(1),u=a.n(s),m=a(2),p=a(5),d=a.n(p),f=a(329),h=a(115),b=a(299),g=a(395),v=a(315),O=a(80),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={errorString:null},a.handleSubmit=a.handleSubmit.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,a=t.onConfirm,n=t.category,r=t.noEmail,i=r?[]:["email"],l=Object(O.b)(e,[].concat(i,["disclaimer"]));r||!l.email?d.a.isEmpty(e.disclaimer)?this.setState({errorString:"Please agree to the terms to proceed."}):d.a.isEmpty(l)?(this.setState({errorString:null}),a(Object(m.a)({},e,{category:n}))):this.setState({errorString:"Please fill in all fields!"}):this.setState({errorString:"Invalid email!"})}},{key:"render",value:function(){var e=this.state.errorString,t=this.props,a=t.handleSubmit,n=t.form,r=t.change,i=t.noEmail;return u.a.createElement("form",{onSubmit:a(this.handleSubmit)},u.a.createElement("div",{className:"mid-container"},u.a.createElement(h.y,{noGutters:!0},i?null:u.a.createElement(h.f,{xs:12},u.a.createElement(g.a,{form:n,change:r,name:"email",placeholderString:"",size:"medium",zIndex:99,desc:"Email Address"})),u.a.createElement(h.f,{xs:12},u.a.createElement(v.a,{form:n,change:r,name:"disclaimer",type:"checkbox",options:[{key:"disclaimer",description:"I agree to store this policy in my PolicyPal account after purchase, in accordance with the Personal Data Protection Act."}],sizeInSM:12,desc:""})),e?u.a.createElement(h.f,{xs:12},u.a.createElement("p",{className:"error-string"},e)):null)),u.a.createElement("div",{className:"button-container"},u.a.createElement(b.a,{type:"submit",className:"checkout-button",variant:"medium-flat-green",width:166,height:72},u.a.createElement("p",null,"Confirm"))))}}]),t}(s.Component);y.defaultProps={category:null,noEmail:!1};var E=Object(f.a)({form:"redirect-form"})(y),j=a(310),S=(a(545),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={category:null},a.openRedirectPopup=a.openRedirectPopup.bind(Object(c.a)(Object(c.a)(a))),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"openRedirectPopup",value:function(e){this.setState({category:e}),setTimeout(this.popupRef.openPopup,100)}},{key:"render",value:function(){var e=this,t=this.state.category,a=this.props,n=a.onConfirm,r=a.noEmail;return u.a.createElement(j.a,{ref:function(t){e.popupRef=t}},u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"redirect-popup"},u.a.createElement("div",{className:"upper-container"},u.a.createElement("p",null,"Kindly fill up the following section before we redirect you to the insurer's page. The details below will be used for verification with the insurer after purchase.")),u.a.createElement(E,{noEmail:r,closPopup:function(){return e.popupRef.closePopup()},onConfirm:n,category:t}))))}}]),t}(s.Component));S.defaultProps={noEmail:!1};t.a=S}}]);
//# sourceMappingURL=LifeDetailContainer.5b869f7a.chunk.js.map