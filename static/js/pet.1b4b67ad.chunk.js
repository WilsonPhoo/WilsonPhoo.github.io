(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1148:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(15),i=a(14),s=a(11),c=a(16),o=a(2),l=a(5),u=a.n(l),m=a(1),p=a.n(m),d=a(186),f=a(22),h=a(60),b=a(481),g=a(98),v=a(23),O=a(69),y=a(52),j=a(529),_=a(513),E=a(142),D=a.n(E),F=a(853),P=a.n(F),S=a(854),k=a.n(S),I=a(855),x=a.n(I),N=a(135),C=a(213),w=a(6),A=a(856),T=a.n(A),z=a(35),L=a(493),M=a(501),U=a(519),G=a(143),H=a(141),R=a(140),B=a(18),Y=(a(857),function(e){function t(e){var a;Object(n.a)(this,t);var s=(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).props.petFields;return a.state={errorStringData:{},startDate:Object(B.i)(s.form_fields[1].min_date),endDate:Object(B.i)(s.form_fields[1].max_date)},a.handleSubmit=a.handleSubmit.bind(Object(o.a)(Object(o.a)(a))),a.handleCloseEdit=a.handleCloseEdit.bind(Object(o.a)(Object(o.a)(a))),a.handleRevert=a.handleRevert.bind(Object(o.a)(Object(o.a)(a))),a.validateForm=a.validateForm.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.storeForm,a=e.setCloseCallBack;this.originalValues=t,a&&a(this.handleRevert)}},{key:"validateForm",value:function(e){var t=this.state,a=t.startDate,n=t.endDate,r=this.props.petFields,i=Object(R.b)(e,["pet_species","start_date"],{pet_species:{type:"ARRAY",data:r.form_fields[0].options},start_date:{type:"DATE",start:a,end:n}});return this.setState({errorStringData:i}),i}},{key:"handleSubmit",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.props,r=n.setInsurFormState,i=n.setSubmit,s=n.storeForm,c=n.submitCallback,o=n.closePopUp,l=n.history,m=this.validateForm(a?e:s),p=u.a.isEmpty(m);Object(R.a)(p,a,m,function(e){return t.setState({errorStringData:e})},function(){return t.handleSubmit(s,!1)})||p&&(i(),this.originalValues=s,c?c():(Object(y.b)("Pet - Get Quote",{event_category:"Pet",event_label:"Button - Pet - Get Quote"}),Object(y.a)("PetGetQuoteA",{pet:e.pet_species})),o&&o(),r(v.b.CHOOSEPLAN.index),l.push("/pet".concat(v.b.CHOOSEPLAN.path)))}},{key:"handleRevert",value:function(){var e=this,t=this.props,a=t.change;(0,t.resetForm)(),Object.keys(this.originalValues).forEach(function(t){a(t,e.originalValues[t])})}},{key:"handleCloseEdit",value:function(){(0,this.props.closePopUp)(this.handleRevert)}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorStringData,n=t.startDate,r=t.endDate,i=this.props,s=i.handleSubmit,c=i.isPopUp,o=i.change,l=i.form,m=i.petFields,d=i.storeForm;return p.a.createElement("div",{className:"landing-form-container"},c?p.a.createElement("p",{className:"edit-header"},"Edit Pet Insurance Details"):null,p.a.createElement("form",{onSubmit:s(this.handleSubmit)},p.a.createElement(w.z,{className:"input-offset",noGutters:!0},p.a.createElement(w.f,{className:"justify-content-center icon icon-car d-none d-sm-flex",sm:2},p.a.createElement("img",{src:T.a,alt:"Paw.svg"})),p.a.createElement(w.f,{className:"input-padding-right",xs:12,sm:5},p.a.createElement(L.a,{form:l,change:o,name:"pet_species",type:"text-selection",noEmptyTextSelection:!0,options:u.a.map(m.form_fields[0].options,function(e){return{key:e,description:e}}),sizeInSM:6,desc:m.form_fields[0].display_name,extraInfo:p.a.createElement("p",null,"*Please read restrictions on ",p.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.setRestrictionPopup({values:m.restrictions})},className:"green"},p.a.createElement("b",null,"PetCare"))),errorString:a.pet_species,validateForm:function(){return e.validateForm(d)}})),p.a.createElement(w.f,{className:"input-padding-left",xs:12,sm:5},p.a.createElement(M.a,{form:l,change:o,name:"start_date",size:"medium",zIndex:95,desc:m.form_fields[1].display_name,currDate:n,startDate:n,endDate:r,extraInfo:p.a.createElement("p",null,"Coverage lasts ",p.a.createElement("b",null,"one year")," from \u2018Start Date\u2019"),errorString:a.start_date,validateForm:function(){return e.validateForm(d)}}))),p.a.createElement(w.z,{className:"align-items-center button-container",noGutters:!0},c?p.a.createElement(w.f,{className:"justify-content-center button",xs:12},p.a.createElement(w.z,{noGutters:!0},p.a.createElement(w.f,{className:"button-container-inner",xs:12,sm:6},p.a.createElement(z.a,{className:"button-left",variant:"medium-flat",width:165,height:72,onClick:function(){return e.handleCloseEdit()}},p.a.createElement("p",null,"Cancel"))),p.a.createElement(w.f,{className:"button-container-inner",xs:12,sm:6},p.a.createElement(z.a,{type:"submit",variant:"medium-flat-green",width:165,height:72},p.a.createElement("p",null,"Save"))))):p.a.createElement(w.f,{className:"justify-content-center button",xs:12},p.a.createElement(z.a,{type:"submit",variant:"medium-flat-green",width:165,height:72},p.a.createElement("p",null,"Get Quote"))))),p.a.createElement(U.a,{ref:function(t){return e.resPopup=t}}))}}]),t}(m.Component));Y.defaultProps={isPopUp:!1,setCloseCallBack:null,storeForm:null,closePopUp:null,submitCallback:null};var K=Object(b.a)(Object(C.a)({form:"pet",destroyOnUnmount:!1})(Object(f.b)(function(e){return{storeForm:Object(N.a)("pet")(e),isRevert:e.editForm.isRevert}},function(e){return{resetForm:function(){e(Object(h.b)("pet"))},setInsurFormState:function(t){e(Object(v.K)(t))},setSubmit:function(){e(Object(G.c)())},setRestrictionPopup:function(t){e(Object(H.d)(t))}}})(Y))),V=a(530),Q=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.petFields,a=e.petPromoGiveAway;return p.a.createElement("div",{className:"pet-container"},p.a.createElement(V.a,{img1:P.a,img2:k.a,img3:x.a,imgAlt:"PolicyPal Pet Insurance",promo:a,desc:p.a.createElement(m.Fragment,null,p.a.createElement("p",null,"Get 5% Cashback "),p.a.createElement("p",null,"upon purchase of Pet Insurance!"))},p.a.createElement(K,{petFields:t})))}}]),t}(m.Component);Q.defaultProps={petPromoGiveAway:null};var W=Q,q=a(97),$=function(e){function t(e){var a;Object(n.a)(this,t);var s=(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).props,c=s.loading,o=s.petFields,l=s.history;return(0,s.clearData)(),o||(c(function(){return l.push("/")}),a.props.getPetFields()),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setFormState,a=e.history;t(v.b.MAIN.index),window.scrollTo(0,0),D.a.track("CustomizeProduct"),Object(y.c)({page_title:"Pet",page_path:"/pet".concat(a.location.search)}),Object(y.a)("PetFormS")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.petFields,n=t.loadingEnd;!e.petFields&&a&&n()}},{key:"render",value:function(){var e=this.props,t=e.petFields,a=e.petPromoGiveAway;return t?p.a.createElement(W,{petFields:t,petPromoGiveAway:a}):null}}]),t}(m.Component);$.defaultProps={petFields:null,petPromoGiveAway:null};var J=Object(b.a)(Object(f.b)(function(e){return{petFields:e.pet.petFields,petPromoGiveAway:e.insurance.promoGiveaways.pet}},function(e){return{getPetFields:function(){e(Object(g.f)())},loading:function(t,a,n){e(Object(q.d)(t,a,n))},loadingEnd:function(){e(Object(q.c)())},clearData:function(){e(Object(g.e)())},setFormState:function(t){e(Object(v.K)(t))}}})($)),X=a(76),Z=a(533),ee=a(518),te=a(648),ae=a(509),ne=(a(858),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).doAmpTags=a.doAmpTags.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"doAmpTags",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{var t=this.props.plansData,a=t.plans.default.premium[e];Object(y.a)("PetBuyNowA",{partner:t.selectedInsurers[0].insurerSlug,"plan-name":t.policyTypes[e],discount:"".concat(((a.price||0)-(a.net_price||0))/(a.price||0)*100,"%"),price:a.net_price||0})}catch(n){console.log("Pet choose plan Buy now Amp tag failed: ".concat(n.message))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.plansData,n=t.petFields,r=t.submitCallback;try{for(var i=function(t){a.plans.default.premium[t].doTag=function(){return e.doAmpTags(t)}},s=0;s<a.plans.default.premium.length;++s)i(s)}catch(c){console.log("Overwrite tags failed")}return p.a.createElement(m.Fragment,null,p.a.createElement(w.z,{className:"inner-form-container",noGutters:!0},p.a.createElement(w.f,{xs:12},p.a.createElement(ee.a,{form:"pet",valuesToListen:[{value:"pet_species",desc:"Pet"},{value:"start_date",desc:"Start date"}],submitCallback:r},p.a.createElement(K,{isPopUp:!0,petFields:n}))),p.a.createElement(w.f,{className:"company-product-container",xs:12},p.a.createElement(te.a,{logo:X.a.square[a.selectedInsurers[0].insurerSlug],logoName:"".concat(a.selectedInsurers[0].insurerSlug,".svg"),insurerName:a.selectedInsurers[0].insurerName,insurerDesc:a.policyDetails.about}),p.a.createElement(w.z,{className:"content-container"},p.a.createElement(w.f,{xs:12},p.a.createElement("p",{className:"why"},"Why ".concat(a.selectedInsurers[0].insurerName,"?")),p.a.createElement("ul",null,u.a.map(a.policyDetails.benefits,function(e,t){return p.a.createElement("li",{key:"benefit-".concat(t)},p.a.createElement("p",null,e))}))),p.a.createElement(Z.a,{category:"pet",key:"overview",className:"overview-container-padding",data:a,currentTab:"default",editForm:p.a.createElement(ee.a,{form:"pet",valuesToListen:[{value:"brand",desc:"Brand"},{value:"model",desc:"Model"},{value:"year",desc:"Year"}]},p.a.createElement(K,{isPopUp:!0,ref:function(t){return e.editForm=t}}))}))),p.a.createElement(ae.a,null)))}}]),t}(m.Component));ne.defaultProps={};var re=ne,ie=function(e){function t(e){var a;Object(n.a)(this,t);var s=(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).props.plansData;return a.state={parsedData:null},a.getNewData=a.getNewData.bind(Object(o.a)(Object(o.a)(a))),s||a.getNewData(),a}return Object(c.a)(t,e),Object(s.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e){var t=e.plansData,a=e.setFormState,n=e.loadingEnd,r=e.history;return t?{parsedData:Object(v.E)(t,null,null,null,function(){a(v.b.DETAILFORM.index),r.push("/pet".concat(v.b.DETAILFORM.path))},e.setSelectedPlanData,n,e.setRestrictionPopup,0)}:null}}]),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setFormState)(v.b.CHOOSEPLAN.index),D.a.track("Search"),Object(y.c)({page_title:"Pet - Choose Plan",page_path:"/pet/chooseplan"}),Object(y.a)("PetPlanS")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.plansData,n=t.loadingEnd;!e.plansData&&a&&n()}},{key:"getNewData",value:function(){var e=this.props,t=e.petForm,a=e.loading,n=e.clearData,r=e.history;n(),this.props.getPetPlans(t),a(function(){n(),r.goBack()},"No available plans found.",3e4)}},{key:"render",value:function(){var e=this.state.parsedData,t=this.props,a=t.isLoggedIn,n=t.petFields;return e?p.a.createElement(re,{petFields:n,plansData:e,isFWD:!1,isLoggedIn:a,submitCallback:this.getNewData}):null}}]),t}(m.Component);ie.defaultProps={plansData:null};var se=Object(b.a)(Object(f.b)(function(e){return{petForm:Object(N.a)("pet")(e),plansData:e.pet.plansData,petFields:e.pet.petFields}},function(e){return{getPetPlans:function(t){return e(Object(g.g)(t))},setFormState:function(t){e(Object(v.K)(t))},loading:function(t,a,n){e(Object(q.d)(t,a,n))},loadingEnd:function(){e(Object(q.c)())},setPlanType:function(t,a){e(Object(O.h)(t,a))},setSelectedPlanData:function(t){e(Object(g.i)(t))},setRestrictionPopup:function(t){e(Object(H.d)(t))},clearData:function(){e(Object(g.e)())}}})(ie)),ce=a(4),oe=a.n(ce),le=a(8),ue=a(534),me=a(57),pe=a(183),de=(a(859),function(e){function t(e){var a;Object(n.a)(this,t);var s=(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).props.petFields,c=u.a.find(s.form_fields,function(e){return"pet_birth_date"===e.name});return a.state={errorStringData:{},petMinDate:Object(B.i)(c.min_date),petMaxDate:Object(B.i)(c.max_date),errorArray:[]},a.handleSubmit=a.handleSubmit.bind(Object(o.a)(Object(o.a)(a))),a.validateForm=a.validateForm.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"validateForm",value:function(){var e=Object(le.a)(oe.a.mark(function e(t){var a,n,r,i,s,c,o=arguments;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]&&o[1],a=this.state,n=a.petMinDate,r=a.petMaxDate,i=["email","family_name","given_name","id_type","nric","mobile_number","address","unit_no","postal","pet_name","pet_microchip_no","pet_birth_date","pet_illness"],"Yes"===t.pet_illness&&i.push("pet_medical_record"),s=Object(R.b)(t,i,{pet_birth_date:{type:"DATE",start:n,end:r},pet_illness:{type:"ARRAY",data:["Yes","No"]}}),this.setState({errorStringData:s}),c=[],u.a.isEmpty(s)||(c=[p.a.createElement("p",{className:"error-string",key:"error-1"},"Fields are not properly filled, please check again.")]),this.setState({errorArray:c}),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(le.a)(oe.a.mark(function e(t){var a,n,r,i,s,c,o=this,l=arguments;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(l.length>1&&void 0!==l[1])||l[1],n=this.props,r=n.submitCallback,i=n.storeForm,e.next=4,this.validateForm(a?t:i,!0);case 4:if(s=e.sent,c=u.a.isEmpty(s),!Object(R.a)(c,a,s,function(e){return o.setState({errorStringData:e,errorArray:null})},function(){return o.handleSubmit(i,!1)})){e.next=8;break}return e.abrupt("return");case 8:c&&(Object(y.b)("Pet - DetailForm - Checkout",{event_category:"Pet",event_label:"Pet - DetailForm - Checkout"}),Object(y.a)("PetGoCheckoutA",{idtype:t.id_type,hospital:"Yes"===t.pet_illness}),r()),window.scrollTo(0,document.body.scrollHeight);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderIllnessForm",value:function(){var e=this,t=this.state.errorStringData,a=this.props,n=a.form,r=a.change,i=a.storeForm;return i&&"Yes"===i.pet_illness?p.a.createElement(w.f,{xs:12,className:"illness-input"},p.a.createElement(me.a,{form:n,change:r,name:"pet_medical_record",placeholderString:"",size:"medium",zIndex:87,desc:"If yes, please complete below with Date of Illness, nature of Illness, treatment, and name of vet",errorString:t.pet_medical_record,validateForm:function(){return e.validateForm(i)}})):null}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorStringData,n=t.petMinDate,r=t.petMaxDate,i=t.errorArray,s=this.props,c=s.form,o=s.change,l=s.planDetails,u=s.isLoggedIn,m=s.piggyCallback,d=s.changePlan,f=s.constants,h=s.storeForm;return p.a.createElement(ue.a,{category:"pet",changePlan:d,handleSubmit:this.props.handleSubmit,onSubmit:this.handleSubmit,change:o,form:c,planDetails:l,isLoggedIn:u,piggyCallback:m,errorArray:i},p.a.createElement(w.z,{className:"main-form",noGutters:!0},p.a.createElement(w.f,{xs:12},p.a.createElement(me.a,{form:c,change:o,name:"email",placeholderString:"",size:"medium",zIndex:99,desc:"Email Address",errorString:a.email,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"family_name",placeholderString:"",size:"medium",zIndex:98,desc:"Surname",errorString:a.family_name,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"left-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"given_name",placeholderString:"",size:"medium",zIndex:97,desc:"Name (as shown in ID document)",errorString:a.given_name,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(pe.a,{form:c,change:o,name:"id_type",placeholderString:"Select ID Type",dropList:f.idTypes,size:"medium",zIndex:96,desc:"Type of ID",errorString:a.id_type,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"left-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"nric",placeholderString:"",size:"medium",zIndex:95,desc:"ID Number",errorString:a.nric,validateForm:function(){return e.validateForm(h)},toUpper:!0})),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"mobile_number",placeholderString:"",size:"medium",zIndex:94,desc:"Mobile Number",errorString:a.mobile_number,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{xs:12},p.a.createElement("hr",{className:"hr-margin"})),p.a.createElement(w.f,{xs:12,className:"header"},p.a.createElement("p",null,"Address")),p.a.createElement(w.f,{xs:12},p.a.createElement(me.a,{form:c,change:o,name:"address",placeholderString:"",size:"medium",zIndex:93,desc:"Address",errorString:a.address,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"unit_no",placeholderString:"enter NA if no unit",size:"medium",zIndex:92,desc:"Unit No",errorString:a.unit_no,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"left-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"postal",placeholderString:"",size:"medium",zIndex:91,desc:"Postcode",errorString:a.postal,validateForm:function(){return e.validateForm(h)},isPostCode:!0,addressFields:{address:"address",unitNo:"unit_no"}})),p.a.createElement(w.f,{xs:12},p.a.createElement("hr",{className:"hr-margin"})),p.a.createElement(w.f,{xs:12,className:"header"},p.a.createElement("p",null,"Pet's details")),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"pet_name",placeholderString:"",size:"medium",zIndex:90,desc:"Name of Pet",errorString:a.pet_name,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"left-padding",xs:12,sm:6},p.a.createElement(me.a,{form:c,change:o,name:"pet_microchip_no",placeholderString:"",size:"medium",zIndex:89,desc:"Microchip Number",errorString:a.pet_microchip_no,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{className:"right-padding",xs:12,sm:6},p.a.createElement(M.a,{form:c,change:o,name:"pet_birth_date",size:"medium",zIndex:88,desc:"Pet's Birthday",startDate:n,endDate:r,currDate:n,errorString:a.pet_birth_date,validateForm:function(){return e.validateForm(h)}})),p.a.createElement(w.f,{xs:12},p.a.createElement("div",{className:"input-wrapper-main pet-illness-desc"},p.a.createElement("p",{className:"input-wrapper-desc"},"My pet has been to the vet or hospital for other than routine checkups or preventive medicine"))),p.a.createElement(w.f,{xs:12,sm:4},p.a.createElement(L.a,{form:c,change:o,name:"pet_illness",type:"radio",options:[{key:"Yes",description:"Yes"},{key:"No",description:"No"}],sizeInSM:6,desc:"",errorString:a.pet_illness,validateForm:function(){return e.validateForm(h)},noEmptyTextSelection:!0})),this.renderIllnessForm(),p.a.createElement(w.f,{xs:12},p.a.createElement("hr",{className:"hr-margin"}))))}}]),t}(m.Component));de.defaultProps={storeForm:null};var fe=Object(C.a)({form:"pet-detail",destroyOnUnmount:!1})(Object(f.b)(function(e){return{storeForm:Object(N.a)("pet-detail")(e),constants:e.insurance.constants}})(de)),he=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setFormState)(v.b.DETAILFORM.index),Object(y.c)({page_title:"Pet - Detail Form",page_path:"/pet/detailform"}),Object(y.a)("PetDetailsS")}},{key:"render",value:function(){var e=this.props,t=e.plansData,a=e.isLoggedIn,n=e.setFormState,r=e.profileValues,i=e.piggyCallback,s=e.petFields,c=e.history;if(!t)return null;var o=t,l={logo:X.a.others,logoDesc:"",planName:"",planTotal:null};try{l={logo:X.a[o.info.insurer_slug],logoDesc:"".concat(o.info.insurer_name,".svg"),planName:o.info.product_name,planTotal:"$".concat(o.policyInfo[o.planType].net_price.toFixed(2))}}catch(u){console.log("Get plan details failed")}return p.a.createElement(fe,{petFields:s,selectedData:o,planDetails:l,isLoggedIn:a,piggyCallback:i,changePlan:function(){c.goBack(),Object(y.b)("Pet - DetailForm - ChangePlan",{event_category:"Pet",event_label:"Pet - DetailForm - ChangePlan"})},profileValues:r,submitCallback:function(){n(v.b.CHECKOUT.index),c.push("/pet".concat(v.b.CHECKOUT.path))}})}}]),t}(m.Component);he.defaultProps={};var be=Object(b.a)(Object(f.b)(function(e){return{petFields:e.pet.petFields,profileValues:e.userDetails,plansData:e.pet.selectedPlanData}},function(e){return{setFormState:function(t){e(Object(v.K)(t))}}})(he)),ge=a(656),ve=a(12),Oe=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={formIndex:0,isInitialLoad:!0};var s=a.props,c=s.resetStoreForm,l=s.clearData,u=s.petPromoGiveAway,m=s.history;return m.replace("/pet".concat(m.location.search)),void 0===u&&a.props.getPromoGiveaways(),l(),a.props.resetInsuranceForm(),a.props.resetCompare(),c("pet"),c("pet-detail"),a.setInitialFormState=a.setInitialFormState.bind(Object(o.a)(Object(o.a)(a))),a.renderStepProgress=a.renderStepProgress.bind(Object(o.a)(Object(o.a)(a))),a.renderPetForms=a.renderPetForms.bind(Object(o.a)(Object(o.a)(a))),a.changeUserDetails=a.changeUserDetails.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formIndex,n=t.isMounted,r=e.formState,i=e.match,s=e.history;if(n){var c=Object(ve.p)("pet",r,a,i,s);if(c&&null!==c.formIndex)return{formIndex:c.formIndex}}return null}}]),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setInitialFormState(),this.setState({isMounted:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.state.isInitialLoad,a=this.props.userDetails;t&&u.a.isEqual(a,e.userDetails)&&this.changeUserDetails()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.clearData,a=e.resetStoreForm;t(),this.props.resetCompare(),this.props.resetInsuranceForm(),a("pet"),a("pet-detail")}},{key:"setInitialFormState",value:function(){var e=this.props.changeForm,t=new Date;t.setDate(t.getDate()+1),e("pet","start_date",Object(B.b)(t)),this.changeUserDetails()}},{key:"changeUserDetails",value:function(){var e=this.state.isInitialLoad,t=this.props,a=t.userDetails,n=t.changeForm;a&&(n("pet-detail","email",a.email),n("pet-detail","given_name",a.firstName),n("pet-detail","family_name",a.surname),n("pet-detail","id_type",a.id_type),n("pet-detail","nric",a.nric),n("pet-detail","mobile_number",a.contact),n("pet-detail","address",a.address),n("pet-detail","unit_no",a.unit_no),n("pet-detail","postal",a.postal_code),e&&this.setState({isInitialLoad:!1}))}},{key:"renderStepProgress",value:function(){var e=this.state.formIndex,t=this.props.charged;return p.a.createElement(j.a,{maxWidth:"556px",formState:e,inputList:["Choose Plan","Details","Checkout"],form:"pet",stateList:[v.b.CHOOSEPLAN,v.b.DETAILFORM,v.b.CHECKOUT],stateDescriptions:[{main:""},{main:"Details"},{main:"Checkout"}],charged:t})}},{key:"renderPetForms",value:function(){var e=this.state.formIndex,t=this.props,a=t.userDetails,n=t.charged,r=!u.a.isEmpty(a);switch(e){case v.b.CHOOSEPLAN.index:return p.a.createElement(se,{isLoggedIn:r});case v.b.DETAILFORM.index:return p.a.createElement(be,{isLoggedIn:r,piggyCallback:this.changeUserDetails});case v.b.CHECKOUT.index:case v.b.SUBMITTED.index:return p.a.createElement(ge.a,{isLoggedIn:r,charged:n});default:return p.a.createElement(J,{isLoggedIn:r})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.petPromoGiveAway;if(!t.constants||void 0===a)return null;var n=y.d?"PolicyPal, pet insurance, dog insurance, cat insurance, pet insurance singapore, dog insurance singapore, cat insurance singapore, PetCare":"";return p.a.createElement(m.Fragment,null,p.a.createElement(d.Helmet,null,p.a.createElement("meta",{name:"keywords",content:n}),p.a.createElement("title",null,"PolicyPal 2.0 - Pet Insurance"),p.a.createElement("meta",{name:"title",content:"PolicyPal 2.0 - Pet Insurance"}),p.a.createElement("meta",{name:"description",content:"Browse products for pet insurance."})),this.renderStepProgress(),this.renderPetForms(),p.a.createElement(_.a,{ref:function(t){e.refresher||t.invokeNewTimer(),e.refresher=t}}))}}]),t}(m.Component);Oe.defaultProps={userDetails:null,charged:null,constants:null,petPromoGiveAway:void 0};t.default=Object(b.a)(Object(f.b)(function(e){return{formState:e.insurance.formState,constants:e.insurance.constants,charged:e.insurance.charged,userDetails:e.userDetails.data,petPromoGiveAway:e.insurance.promoGiveaways.pet}},function(e){return{changeForm:function(t,a,n){return e(Object(h.a)(t,a,n))},resetInsuranceForm:function(){return e(Object(v.H)())},resetStoreForm:function(t){return e(Object(h.b)(t))},resetCompare:function(){e(Object(O.g)())},clearData:function(){e(Object(g.e)())},getPromoGiveaways:function(){e(Object(v.A)("pet"))}}})(Oe))},520:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(3),r=a(5),i=a.n(r),s=a(25),c=a.n(s),o=function(e){return"https://webassets.policypal.com/insurer_logos/".concat(e,".png")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};if(Object.keys(e).length>0){var a=e.insurer_slug,r=void 0===a?"":a,s=e.product_slug,l=void 0===s?"":s,u=e.values,m=void 0===u?{}:u,p=e.price,d=void 0===p?"":p,f=Object(n.a)({},i.a.pick(e,["insurer_slug","insurer_name","product_slug","product_name","coverage_level"]),function(e){for(var t=Object.keys(e),a={},n=0;n<t.length;n++){var r=t[n],s=e[r];switch(r){case"start_date":case"end_date":case"pet_birth_date":var o=i.a.isObject(s)?s.value:s;a[r]=c()(o).format("DD/MM/YYYY");break;case"trip_type":case"plan_type":case"num_children":case"num_adult":a[r]=s.value;break;case"region":case"countries":a[r]=i.a.isArray(s.value)?Array.from(s.value,function(e){return e.value}):s.value.value;break;default:a[r]=s}}return a}(m||{}),{id:"".concat(r,"__").concat(l),product_image:o(r),quantity:1});t=Object(n.a)({content_ids:[f.id],content_name:f.product_name,content_type:"product",contents:[f]},d?{currency:"SGD",value:Number(d.replace("$",""))}:{})}return t}},648:function(e,t,a){"use strict";var n=a(13),r=a(11),i=a(15),s=a(14),c=a(16),o=a(1),l=a.n(o),u=a(6),m=a(35),p=(a(649),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.logo,a=e.logoName,n=e.insurerName,r=e.insurerDesc,i=e.onClick;return l.a.createElement(u.z,{className:"header-desc-with-button-container",noGutters:!0},l.a.createElement(u.f,{className:"insurer-logo-container"},l.a.createElement("div",{className:"company-logo-container"},l.a.createElement("img",{className:"company-logo",src:t,alt:a}))),l.a.createElement(u.f,{className:"insurer-desc-container"},l.a.createElement("div",{className:"insurer-desc-top"},l.a.createElement("span",{className:"insurer-name"},n)),l.a.createElement("p",{className:"desc"},r)),i?l.a.createElement("div",{className:"header-button-container"},l.a.createElement(m.a,{variant:"medium-flat-green",width:165,height:72,onClick:i},l.a.createElement("p",null,"Continue"))):null)}}]),t}(o.Component));p.defaultProps={onClick:null},t.a=p},649:function(e,t,a){},656:function(e,t,a){"use strict";var n=a(3),r=a(13),i=a(11),s=a(15),c=a(14),o=a(16),l=a(1),u=a.n(l),m=a(481),p=a(22),d=a(135),f=a(142),h=a.n(f),b=a(5),g=a.n(b),v=a(520),O=a(98),y=a(23),j=a(532),_=a(12),E=a(52),D=function(e){function t(e){var a;Object(r.a)(this,t);var i=(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).props,o=i.petForm,l=i.petDetailsForm,u=i.selectedPlanData,m=i.isAdHoc,p=i.adHocData,d=Object(_.g)(m,p,u,function(){return Object(O.h)(o,l,u)}),f=Object(_.e)("Pet Insurance",m,p,u,d.params),h=m?p.data.session_params.pet_illness:l.pet_illness,b=m?p.data.session_params.pet_medical_record:l.pet_medical_record,g="Yes"===h?[{title:"Illness Details",description:b}]:[],v=m?p.data.session_params:d.params.sessionParams.session_params,y=m?p.data.session_params:d.params.sessionParams.session_params;return a.state=Object(n.a)({headerData:f.headerData,mainDetails:{title:"Insurance",attributes:Object(_.a)([{title:"Pet Species",description:v.pet_species},{title:"Start Date",description:v.start_date},{title:"End Date",description:v.end_date}])},subDetails:[Object(_.i)({key:"Adult 1",leftDetail:{title:"Details",attributes:Object(_.a)([{title:"Email",description:y.email},{title:"Last name",description:y.family_name},{title:"First name",description:y.given_name},{title:"Date of birth",description:y.birth_date},{title:"ID type",description:y.id_type},{title:"ID number",description:y.nric},{title:"Mobile number",description:y.mobile_number},{title:"Address",description:y.address},{title:"Unit no",description:y.unit_no},{title:"Postcode",description:y.postal}])},rightDetail:{title:"Pet",attributes:Object(_.a)([{title:"Name",description:y.pet_name},{title:"Microchip number",description:y.pet_microchip_no},{title:"Date of birth",description:y.pet_birth_date},{title:"Pet Illness",description:y.pet_illness}].concat(g))}})]},d),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setFormState,a=e.history;if(t(y.b.CHECKOUT.index),Object(E.c)({page_title:"Pet - Checkout",page_path:"/pet/checkout"}),Object(E.a)("PetCheckoutS"),a.location.pathname&&a.location.pathname==="/pet".concat(y.b.CHECKOUT.path)){var r=this.props,i=r.petDetailsForm,s=r.petForm,c=r.selectedPlanData,o=this.state.params,l=c.info,u=c.planType,m=Object(v.a)(Object(n.a)({},g.a.pick(l,["insurer_slug","insurer_name","product_slug","product_name"]),{values:Object(n.a)({},g.a.pick(i,["pet_name","pet_birth_date","pet_illness","pet_microchip_no","pet_medical_record"]),s),coverage_level:u,price:"$".concat(o.amountPayable)}));h.a.track("AddToCart",m),h.a.track("InitiateCheckout")}}},{key:"render",value:function(){var e=this.state,t=e.headerData,a=e.mainDetails,n=e.subDetails,r=e.wording,i=e.params,s=this.props,c=s.isLoggedIn,o=s.charged,l=s.setFormState,m=s.history,p=s.isAdHoc,d=s.adHocData,f=s.sessionId;return u.a.createElement(j.a,{headerData:t,mainDetails:a,subDetails:n,sessionId:f,isLoggedIn:c,charged:o,backToDetails:function(){m.goBack()},wording:r,isAdHoc:p,adHocData:d,params:i,category:"pet",trackingTags:{payment:function(e){h.a.track("AddPaymentInfo"),Object(E.b)("Pet - CheckoutPage_ProceedPayment",{event_category:"Pet",event_label:"Pet - CheckoutPage_ProceedPayment"}),Object(E.a)("PetProceedPayA",{cashback:null!==e.rewardsID,promo:null!==e.promoCode&&""!==e.promoCode})},receipt:function(){p||(h.a.track("Purchase",{currency:"SGD",value:i.amountPayable}),l(y.b.SUBMITTED.index),m.push("/pet".concat(y.b.SUBMITTED.path))),Object(E.c)({page_title:"Pet - Receipt",page_path:"/pet/Receipt"}),Object(E.a)("PetConfirmationS")}}})}}]),t}(l.Component);D.defaultProps={charged:null,sessionId:null,adHocData:null,isAdHoc:!1,isLoggedIn:!1,petForm:null,petDetailsForm:null,selectedPlanData:null};t.a=Object(m.a)(Object(p.b)(function(e,t){var a=t.isAdHoc?t.sessionId:e.insurance.sessionId;return{petForm:Object(d.a)("pet")(e),petDetailsForm:Object(d.a)("pet-detail")(e),selectedPlanData:e.pet.selectedPlanData,sessionId:a}},function(e){return{setFormState:function(t){e(Object(y.K)(t))}}})(D))},853:function(e,t,a){e.exports=a.p+"static/media/policypal-pet-insurance-1.f35deeb6.svg"},854:function(e,t,a){e.exports=a.p+"static/media/policypal-pet-insurance-2.cde2f416.svg"},855:function(e,t,a){e.exports=a.p+"static/media/policypal-pet-insurance-3.2c679d55.svg"},856:function(e,t,a){e.exports=a.p+"static/media/Paw.43c25f8c.svg"},857:function(e,t,a){},858:function(e,t,a){},859:function(e,t,a){}}]);
//# sourceMappingURL=pet.1b4b67ad.chunk.js.map