(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1023:function(e,t,a){e.exports=a.p+"static/media/TickRounded.10b686e1.svg"},1024:function(e,t,a){},1025:function(e,t,a){},1059:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),l=a(6),i=a(45),c=a(46),o=a(48),s=a(47),u=a(49),d=a(114),m=a(227),p=a.n(m),h=a(35),b=a.n(h),f=a(12),v=a.n(f),g=a(5),E=a.n(g),y=a(16),j=a.n(y),k=a(1),O=a.n(k),S=a(298),x=a(56),C=a(77),N=a(446),P=a(115),F=a(383),T=a(606),_=a.n(T),D=a(609),I=a(603),w=a(299),B=a(1023),V=a.n(B),U=(a(1024),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.onChange,n=e.checked,r=n?"single-check-box-checked":"single-check-box-non-checked";return O.a.createElement("div",{className:"single-check-box-container ".concat(r),id:t,onClick:a,checked:n,tabIndex:-1,onKeyDown:null,role:"button"},O.a.createElement("div",{className:"bg"}),O.a.createElement("div",{className:"box"},O.a.createElement("img",{src:V.a,alt:"Tick.svg"})),O.a.createElement("p",{className:"desc"},this.props.children))}}]),t}(k.Component));U.defaultProps={checked:!1};var A=U,M=(a(1025),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={rightStickyStyle:"right-scroll",isSignUp:!1},a.handlePreSubmit=a.handlePreSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleScroll=a.handleScroll.bind(Object(d.a)(Object(d.a)(a))),a.renderSignUp=a.renderSignUp.bind(Object(d.a)(Object(d.a)(a))),a.renderSignUpButton=a.renderSignUpButton.bind(Object(d.a)(Object(d.a)(a))),a.renderUpperRightContainer=a.renderUpperRightContainer.bind(Object(d.a)(Object(d.a)(a))),a.renderBottomContainer=a.renderBottomContainer.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){v.a.addEventListener("scroll",this.handleScroll),v.a.scrollTo(0,0),this.handleScroll(),p()("#intercom-container")&&p()("#intercom-container").hide()}},{key:"componentWillUnmount",value:function(){p()("#intercom-container")&&p()("#intercom-container").show(),v.a.removeEventListener("scroll",this.handleScroll)}},{key:"handlePreSubmit",value:function(e){var t=this.state.isSignUp,a=this.props,n=a.onSubmit,r=a.login;if(t)return r.loginContainer.setSuccessCallback(function(){return n(e)}),r.loginContainer.setInitialIndex(2),void r.popup.openPopup();n(e)}},{key:"handleScroll",value:function(){if(this.upperMarker){var e=this.state.rightStickyStyle,t=this.upperMarker.getBoundingClientRect().y<84?"right-sticky":"right-scroll";e!==t&&this.setState({rightStickyStyle:t})}}},{key:"renderSignUp",value:function(){var e=this.props,t=e.isLoggedIn,a=e.login,n=e.piggyCallback,r=e.category,l=e.planDetails;return O.a.createElement("div",{className:"piggy"},O.a.createElement(D.a,{isLoggedIn:t,cashback:l&&l.cashback,category:r,onClick:function(){a.loginContainer.setSuccessCallback(n),a.loginContainer.setInitialIndex(1),a.popup.openPopup()}}))}},{key:"renderSignUpButton",value:function(e){var t=this,a=this.state.isSignUp,n=e?"":"no-total";return this.props.isLoggedIn?null:O.a.createElement("div",{className:"sign-up ".concat(n)},O.a.createElement(A,{id:"checkbox-detail-form",onChange:function(){return t.setState({isSignUp:!a})},checked:!!a},"Sign Up"))}},{key:"renderUpperRightContainer",value:function(){var e=this,t=this.state.rightStickyStyle,a=this.props,n=a.planDetails,r=a.checkoutButtonDesc,l=a.editForm,i=a.category,c=a.values;return O.a.createElement(k.Fragment,null,O.a.createElement("div",{className:"d-none d-lg-block"},this.renderSignUp()),O.a.createElement("div",{className:"upper-right-container ".concat(t)},O.a.createElement("div",{ref:function(t){return e.upperRightContainer=t}}),O.a.createElement("div",{className:"logo-container"},O.a.createElement("div",{className:"logo-inner-container"},O.a.createElement("img",{className:"company-logo",src:n.logo,alt:"".concat(n.logoDesc,".png")})),O.a.createElement("p",{className:"plan-name"},n.planName),this.renderSignUpButton(n.planTotal),O.a.createElement(I.a,{values:c,displayOnly:l.displayOnly,form:i,headerValue:l.headerValue,valuesToListen:l.valuesToListen,conditions:l.conditions})),O.a.createElement("div",{className:"submit-container"},O.a.createElement("div",{className:"sign-up-container"},n.planSubTotal?O.a.createElement("div",{className:"cost-container"},O.a.createElement("p",null,O.a.createElement("span",{className:"total-text"},"SubTotal"),O.a.createElement("span",{className:"cost-text"},n.planSubTotal)),O.a.createElement("p",{className:"gst-text"},"GST 7% included")):null,n.discountPercentage&&n.discountAmount?O.a.createElement("div",{className:"cost-container"},O.a.createElement("p",null,O.a.createElement("span",{className:"total-text"},"Discount ",n.discountPercentage),O.a.createElement("span",{className:"cost-text"},n.discountAmount))):null),O.a.createElement("div",{className:"divider"}),O.a.createElement("div",{className:"sign-up-container"},n.planTotal?O.a.createElement("div",{className:"cost-container"},O.a.createElement("p",null,O.a.createElement("span",{className:"total-text"},"Total"),O.a.createElement("span",{className:"final-cost-text"},n.planTotal))):null,O.a.createElement(w.a,{variant:"medium-flat-green",height:48,onClick:this.handlePreSubmit},O.a.createElement("p",null,r)),n.cashback?O.a.createElement("div",{className:"cashback-earned-container"},O.a.createElement("img",{src:_.a,alt:"Label.svg"}),O.a.createElement("span",null,"Earn ",n.cashback," Cashback")):null))))}},{key:"renderBottomContainer",value:function(){var e=this.state.rightStickyStyle,t=this.props,a=t.planDetails,n=t.checkoutButtonDesc,r=t.selectedPlanData,l=t.isLoggedIn;return O.a.createElement(k.Fragment,null,O.a.createElement("div",{className:"bottom-container ".concat(e)},O.a.createElement("div",{className:"bottom-inner-container"},a.planTotal?O.a.createElement("div",{className:"price-container"},O.a.createElement("h5",null,a.planName),r&&r.planType&&O.a.createElement("h6",null,E.a.startCase(r.planType)),O.a.createElement("h4",null,O.a.createElement("span",null,"$",a.planTotal),a.planSubTotal&&O.a.createElement("span",{className:"price"},a.planSubTotal))):null,O.a.createElement("div",{className:"resp-button-container ".concat(l?"big":"small")},this.renderSignUpButton(a.planTotal),O.a.createElement(w.a,{variant:"medium-flat-green",height:48,onClick:this.handlePreSubmit},O.a.createElement("p",null,n))))))}},{key:"render",value:function(){var e=this,t=this.props.errorArray;return O.a.createElement(k.Fragment,null,O.a.createElement(P.y,{className:"detail-main-container-new",noGutters:!0},O.a.createElement("div",{ref:function(t){return e.upperMarker=t}}),O.a.createElement(P.f,{xs:12,lg:7},O.a.createElement("div",{className:"d-block d-lg-none"},this.renderSignUp()),O.a.createElement("div",{className:"detail-left-container"},this.props.children,t)),O.a.createElement(P.f,{lg:5,className:"d-none d-lg-block"},this.renderUpperRightContainer()),O.a.createElement(P.f,{xs:12,className:"d-block d-lg-none"},this.renderBottomContainer())))}}]),t}(k.Component));M.defaultProps={errorArray:null,checkoutButtonDesc:"Checkout",editForm:null,selectedPlanData:null,values:null};var R=Object(x.connect)(function(e){return{login:e.login}})(M),L=a(605),Y="adult_0",z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={formName:Y},a.generateTabs=a.generateTabs.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.renderMain=a.renderMain.bind(Object(d.a)(Object(d.a)(a))),a.renderFields=a.renderFields.bind(Object(d.a)(Object(d.a)(a))),a.renderForm=a.renderForm.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.handleSubmit,e.next=3,t(this.tabView);case 3:a=e.sent,E.a.isEmpty(a)||this.setState({errorArray:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"generateTabs",value:function(){var e=this,t=this.props,a=t.planData,n=t.values,r="Group"===n.plan_type.value?"Person":"Adult",l=[];if(n.num_adult&&n.num_adult.value)for(var i=function(t){l.push({desc:"".concat(r," ").concat(t+1),onClick:function(){e.setState({formName:"adult_".concat(t)})}})},c=0;c<a.numAdults;++c)i(c);var o=function(t){l.push({desc:"Child ".concat(t+1),onClick:function(){e.setState({formName:"child_".concat(t)})}})};for(c=0;c<a.numChildren;++c)o(c);return l}},{key:"renderFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.formName,n=this.props,r=n.detailValues,l=n.detailErrors,i=n.onChangeDetailValue,c=n.handlePostCode;return O.a.createElement(k.Fragment,null,E.a.map(e,function(e,n){return O.a.createElement(F.a,{key:"business-form-".concat(n),values:r[a],errors:l[a],fieldData:e,onChangeValue:function(e,t,n){return i(e,t,n,a)},extraInfo:e.extra_info&&O.a.createElement("p",null,e.extra_info),noInternalDesc:e.no_internal_desc,handlePostCode:function(){return c(r.adult_0,i,!t,"adult_0")}})}))}},{key:"renderMain",value:function(){var e=this.state.formName,t=this.props,a=t.getIndividualFields,n=t.adultFields,r=t.childFields,l=t.selectedPlanData;if(e===Y){var i=a(l);return this.renderFields(i.fields,i.isBlk)}return E.a.includes(e,"child_")?this.renderFields(r):this.renderFields(n)}},{key:"renderForm",value:function(){var e=this,t=this.props.values;return t.plan_type&&"Individual"===t.plan_type.value?O.a.createElement(P.y,{className:"main-form",noGutters:!0},this.renderMain()):O.a.createElement(L.a,{ref:function(t){return e.tabView=t},maxTabWidthPx:128,className:"tabview-margin-top",tabs:this.generateTabs(),isDataFadeOnly:!0,name:"travel-detail-tab",scrollTabs:!0},O.a.createElement(P.y,{className:"main-form",noGutters:!0},this.renderMain()))}},{key:"render",value:function(){var e=this.state.errorArray,t=this.props,a=t.isLoggedIn,n=t.planDetails,r=t.piggyCallback,l=t.selectedPlanData,i=t.values,c=t.valuesToListen,o=t.conditions;return O.a.createElement(R,{category:"travel",values:i,onSubmit:this.handleSubmit,planDetails:n,selectedPlanData:l,isLoggedIn:a,piggyCallback:r,errorArray:e,editForm:{displayOnly:!0,valuesToListen:c(i),conditions:o}},this.renderForm())}}]),t}(k.Component);z.defaultProps={detailValues:null,detailErrors:null,values:null};var G=Object(x.connect)(function(e){return{constants:e.insurance.constants}})(z),K=a(20),$=a(119),q=a(13),H=a(24),W=a(8),J=a(63),Q=function(e){function t(e){var a;Object(i.a)(this,t);var n=(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).props,r=n.values,l=n.selectedPlanData,c=n.planType,u={logo:C.a.others,logoDesc:"",planName:"",planTotal:null};try{var m="default",p=Object(W.j)(r.trip_type);p&&(m="Single Trip"===p?"single":"annual");var h=l.policy_info[c].premium,b=l.info.discount?l.info.discount[m]:null,f=b?h.price*b.amount:null;u={logo:C.a[l.info.insurer_slug],logoDesc:"".concat(l.info.insurer_name,".svg"),planName:l.info.product_name,planTotal:"$".concat(h.net_price.toFixed(2)),planSubTotal:"$".concat(h.price.toFixed(2)),discountPercentage:b?b.display:null,discountAmount:f&&0!==f?"$".concat((h.price*b.amount).toFixed(2)):null,cashback:l.info.cashback?"$".concat((l.info.cashback*h.net_price).toFixed(2)):null}}catch(v){}return r&&(a.state={planData:{planType:c,numAdults:Object(W.j)(r.num_adult),numChildren:Object(W.j)(r.num_children)},planDetails:u}),a.travelRedirect=a.travelRedirect.bind(Object(d.a)(Object(d.a)(a))),a.submitCallback=a.submitCallback.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handlePostCode=a.handlePostCode.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setFormState,a=e.doSetCategoryNavBar;t(q.b.DETAILFORM.index),Object(H.b)("PPS2 - Pageview - Travel - DetailForm",{Product:"Travel"}),Object(H.d)({page_title:"Travel - Detail Form",page_path:"/travel/detailform"}),Object(H.a)("TravelDetailsS"),b.a.body.style.backgroundColor="#F9FAFF",a(!0)}},{key:"componentWillUnmount",value:function(){var e=this.props.doSetCategoryNavBar;b.a.body.style.backgroundColor="#FFFFFF",e(!1)}},{key:"handlePostCode",value:function(){var e=Object(l.a)(r.a.mark(function e(t,a,n){var l,i,c,o,s,u,d=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=d.length>3&&void 0!==d[3]?d[3]:null,e.prev=1,!t){e.next=8;break}return i=t.postal.value,e.next=6,Object(q.t)(i);case 6:(c=e.sent)&&(o=""===c.street?"":"".concat(c.street," "),s=""===c.block?"":"".concat(c.block," "),u="".concat(s).concat(o),n||(a("text","blk_no",c.block,l),u=o),a("text","address",u,l));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(l.a)(r.a.mark(function e(t){var a,n,l,i,c,o,s,u,d,m,p,h,f,g,y,k,S,x,C,N,P,F;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,n=a.values,l=a.detailValues,i=a.selectedPlanData,c=a.validateForm,e.prev=1,o=Object(W.j)(n.num_adult),s=Object(W.j)(n.num_children),u=Object(J.j)(i),d={plan_type:Object(W.j)(n.plan_type),trip_type:Object(W.j)(n.trip_type),num_adult:o.toString(),num_children:s.toString(),insurer_slug:i.info.insurer_slug,product_name:i.info.product_name,birth_dates:{adults:[],children:[]}},m="Group"===Object(W.j)(n.plan_type)?"Person":"Adult",p=null,h=[],f=null,e.next=12,c("adult_0",null,u.fields,{insurer_slug:i.info.insurer_slug});case 12:(g=e.sent)?d.birth_dates.adults.push(j()(Object(W.j)(l.adult_0.birth_date)).format("DD/MM/YYYY")):(h.push("".concat(m," 1")),f=0),y=1;case 15:if(!(y<o)){e.next=25;break}return k="adult_".concat(y),e.next=19,c(k,null,J.a);case 19:S=e.sent,g=!!g&&S,S?d.birth_dates.adults.push(j()(Object(W.j)(l[k].birth_date)).format("DD/MM/YYYY")):(h.push("".concat(m," ").concat(y+1)),f=y);case 22:++y,e.next=15;break;case 25:x=0;case 26:if(!(x<s)){e.next=36;break}return C="child_".concat(x),e.next=30,c(C,null,J.b);case 30:N=e.sent,g=!!g&&N,N?d.birth_dates.children.push(j()(Object(W.j)(l[C].birth_date)).format("DD/MM/YYYY")):(h.push("Child ".concat(x+1)),f=o+x);case 33:++x,e.next=26;break;case 36:if(!g&&h.length>0&&(p=E.a.reduce(h,function(e,t,a){var n=a===h.length-1;return"".concat(e," ").concat(t).concat(n?"":",")},"Forms not filled for: "),p=[O.a.createElement("p",{className:"error-string",key:"error-1"},p)]),P=!1,!g){e.next=50;break}return e.next=41,Object($.g)(d);case 41:if(F=e.sent,P=F&&F.valid,F?F.valid||(p=E.a.map(F.errors,function(e,t){return O.a.createElement("p",{className:"error-string",key:"error-".concat(t)},e)})):p=[O.a.createElement("p",{className:"error-string",key:"error-1"},"Birth date validation failed! Please try again.")],!P){e.next=50;break}return Object(H.b)("PPS2 - ButtonClick - Travel - DetailForm_Checkout",{Product:"Travel",Click_Text:"Checkout"}),Object(H.c)("Travel - DetailForm - Checkout",{event_category:"Travel",event_label:"Travel - DetailForm - Checkout"}),Object(H.a)("TravelCheckoutA",{idtype:Object(W.j)(l.adult_0.id_type),nationality:Object(W.j)(l.adult_0.nationality),gender:Object(W.j)(l.adult_0.gender),marital:Object(W.j)(l.adult_0.marital_status),race:Object(W.j)(l.adult_0.race),occupation:Object(W.j)(l.adult_0.occupation)}),this.submitCallback(),e.abrupt("return",[]);case 50:return t&&null!==f&&t.wrappedInstance.goToIndex(f),P||v.a.scrollTo(0,b.a.body.scrollHeight),e.abrupt("return",p);case 55:e.prev=55,e.t0=e.catch(1);case 57:return e.abrupt("return",[]);case 58:case"end":return e.stop()}},e,this,[[1,55]])}));return function(t){return e.apply(this,arguments)}}()},{key:"submitCallback",value:function(){var e=this.props,t=e.selectedPlanData,a=e.history;"webview"!==t.info.deep_link.integration_type?(this.props.setFormState(q.b.CHECKOUT.index),a.push("/travel".concat(q.b.CHECKOUT.path))):this.RedirectPop.openRedirectPopup()}},{key:"travelRedirect",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a,n,l,i,c,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.values,n=t.detailValues,l=t.planType,i=t.selectedPlanData,c=t.handleAPI,e.next=3,c(function(){return Object($.f)(a,n,i,l)});case 3:if(o=e.sent)if("fwd"===i.info.insurer_slug)v.a.location=o.url;else if("etiqa"===i.info.insurer_slug||"tiq"===i.info.insurer_slug){for(;this.redirectButton.firstChild;)this.redirectButton.removeChild(this.redirectButton.firstChild);s=b.a.createRange(),this.redirectButton.appendChild(s.createContextualFragment(o.form_html)),setTimeout(function(){return p()("#".concat(o.form_id)).get(0).submit()},300)}case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.planData,n=t.planDetails;return O.a.createElement("div",{className:"travel-detail-container"},O.a.createElement(G,Object.assign({},this.props,{planData:a,planDetails:n,normalIndividualFields:J.m,etiqaMsigIndividualFields:J.i,adultFields:J.a,childFields:J.b,valuesToListen:J.k,conditions:J.e,getIndividualFields:J.j,handlePostCode:this.handlePostCode,handleSubmit:this.handleSubmit})),O.a.createElement(N.a,{ref:function(t){return e.RedirectPop=t},noEmail:!0,onConfirm:this.travelRedirect}),O.a.createElement("div",{className:"redirect-button",ref:function(t){return e.redirectButton=t}}))}}]),t}(k.Component);Q.defaultProps={};t.default=Object(S.a)(Object(x.connect)(null,function(e){return{getAnonymousSession:function(t){e(Object(q.r)(t,!0))},setFormState:function(t){e(Object(q.G)(t))},doSetCategoryNavBar:function(t){e(Object(K.n)(t))}}})(Q))},302:function(e,t,a){"use strict";var n=a(45),r=a(48),l=a(47),i=a(46),c=a(49),o=a(114),s=a(1),u=a.n(s),d=(a(321),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={errorString:null},a.setErrorString=a.setErrorString.bind(Object(o.a)(Object(o.a)(a))),a.clearErrorString=a.clearErrorString.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(i.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.errorString!==e.errorString?{errorString:e.errorString,refValue:e.refValue}:e.validateForm&&t.errorString&&t.refValue!==e.refValue?(e.validateForm(),{errorString:null}):null}}]),Object(i.a)(t,[{key:"setErrorString",value:function(e){this.setState({errorString:e})}},{key:"clearErrorString",value:function(){this.setState({errorString:null})}},{key:"render",value:function(){var e=this.state.errorString,t=this.props,a=t.desc,n=t.extraInfo;return u.a.createElement("div",{className:"input-wrapper-main input-wrapper-error"},null!==a?u.a.createElement("p",{className:"input-wrapper-desc"},a):null,this.props.children,null!==n?u.a.createElement("div",{className:"extra-info-container"},n):null,null!==e?u.a.createElement("p",{className:"input-wrapper-error-text"},e):null)}}]),t}(s.Component));d.defaultProps={desc:null,extraInfo:null},t.a=d},314:function(e,t,a){"use strict";var n=a(23),r=a(45),l=a(48),i=a(47),c=a(46),o=a(49),s=a(1),u=a.n(s),d=a(56),m=a(469),p=a(470),h=a(115),b=a(5),f=a.n(b),v=a(350),g=a.n(v),E=a(302),y=(a(351),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={selections:{}},a}return Object(o.a)(t,e),Object(c.a)(t,null,[{key:"getStoreSelection",value:function(e,t){var a=e[t];if(!a)return null;var n=a.constructor===Array?a:[a],r={};return f.a.forEach(n,function(e){e&&(r[e]=!0)}),r}},{key:"getDerivedStateFromProps",value:function(e,a){var n=a.resultState,r=a.selections,l=e.formStore,i=e.name;return l&&l[i]!==n?{resultState:l[i],selections:t.getStoreSelection(l,i)||r}:null}}]),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.name,n=e.formStore,r=e.noEmptyTextSelection;n&&n[a]?this.setState({selections:t.getStoreSelection(n,a)}):r&&this.setInitialValue()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.name,n=t.formStore;a!==e.name&&(n[a]||this.setInitialValue())}},{key:"onToggleSelection",value:function(e){var t=this.state.selections,a=this.props,r=a.name,l=a.type,i=a.change,c=a.noEmptyTextSelection,o=e.key,s=!this.state.selections[o],u={},d=null,m=!1;switch(l){case"text-selection":case"radio":!c||c&&!t[o]?((u=f.a.mapValues(t,function(){return!1}))[o]=s,d=f.a.findKey(u,function(e){return e})):m=!0;break;case"checkbox":u=Object.assign({},t,Object(n.a)({},o,s)),d=[],f.a.each(u,function(e,t){e&&d.push(t)})}m||(this.setState({selections:u}),i(r,d))}},{key:"setInitialValue",value:function(){var e=this.props,t=e.options,a=e.change,r=e.name,l=Object(n.a)({},t[0].key,!0);this.setState({selections:l}),a(r,f.a.findKey(l,function(e){return e}))}},{key:"renderSelectionInsides",value:function(e,t){var a=this.props.type;switch(a){case"radio":return u.a.createElement("div",{className:"".concat(a,"-inner-").concat(t)});case"checkbox":return u.a.createElement("img",{src:g.a,className:"checkbox-inner-".concat(t),alt:"check"});case"text-selection":return u.a.createElement("div",{className:"description py-3"},e.description);default:return null}}},{key:"renderSelectionIcon",value:function(e){var t=this,a=this.state.selections,n=this.props,r=n.type,l=n.sizeInSM,i=e.key,c=e.description,o=a[i]||!1?"highlighted":"default",s=u.a.createElement("div",{role:"button",onKeyPress:function(){},onClick:function(){return t.onToggleSelection(e)},tabIndex:0,className:"".concat(r,"-outer-").concat(o)},this.renderSelectionInsides(e,o));return"text-selection"===r?u.a.createElement(h.f,{sm:l,key:i,className:"text-sel-col"},u.a.createElement("div",{className:"single-selection",key:i},s)):u.a.createElement(h.f,{sm:l,key:i},u.a.createElement("div",{className:"single-selection"},s,u.a.createElement("div",{className:"description"},c)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.options,r=t.type,l=t.desc,i=t.extraInfo,c=t.errorString;return u.a.createElement(E.a,{desc:l,ref:function(t){return e.formParent=t},extraInfo:u.a.createElement("div",{style:{marginTop:-10}},i),errorString:c},u.a.createElement(m.a,{name:a,component:function(){return u.a.createElement("div",null)}}),u.a.createElement("div",{className:"selection"},u.a.createElement(h.y,{className:"text-selection"===r?"text-sel-container":""},f.a.map(n,function(t){return e.renderSelectionIcon(t)}))))}}]),t}(s.PureComponent));y.defaultProps={sizeInSM:12,desc:null,formStore:null,extraInfo:null,errorString:null,noEmptyTextSelection:!1};t.a=Object(d.connect)(function(e,t){return{formStore:Object(p.a)(t.form)(e)}},null)(y)},321:function(e,t,a){},322:function(e,t,a){},331:function(e,t,a){"use strict";var n=a(3),r=a.n(n),l=a(6),i=a(45),c=a(46),o=a(48),s=a(47),u=a(49),d=a(114),m=a(1),p=a.n(m),h=a(56),b=a(469),f=a(470),v=a(293),g=a(309),E=a.n(g),y=a(302),j=a(13),k=(a(322),60),O=72,S=function(e){function t(e){var a;Object(i.a)(this,t);var n=(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).props,r=n.size,l=n.height,c="big"===r?O:k;return c=l||c,a.state={height:c,isFocus:!1},a.handleFocus=a.handleFocus.bind(Object(d.a)(Object(d.a)(a))),a.handleBlur=a.handleBlur.bind(Object(d.a)(Object(d.a)(a))),a.setError=a.setError.bind(Object(d.a)(Object(d.a)(a))),a.clearError=a.clearError.bind(Object(d.a)(Object(d.a)(a))),a.renderTextArea=a.renderTextArea.bind(Object(d.a)(Object(d.a)(a))),a.handlePostCode=a.handlePostCode.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setError",value:function(e){this.formParent.setErrorString(e)}},{key:"clearError",value:function(){this.formParent.clearErrorString()}},{key:"handleFocus",value:function(){this.setState({isFocus:!0})}},{key:"handleBlur",value:function(){this.setState({isFocus:!1})}},{key:"handlePostCode",value:function(){var e=Object(l.a)(r.a.mark(function e(t){var a,n,l,i,c,o,s,u,d,m,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.props,n=a.storeValue,l=a.name,i=a.addressFields,c=a.formChange,o=a.form,!n){e.next=8;break}return s=n[l],e.next=6,Object(j.t)(s);case 6:(u=e.sent)&&(d=""===u.street?"":"".concat(u.street," "),m=""===u.block?"":"".concat(u.block," "),p="".concat(m).concat(d),i.blkNo&&(c(o,i.blkNo,u.block),p=d),i.address&&c(o,i.address,p));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderTextArea",value:function(e){var t=e.input,a=this.props.placeholderString;return p.a.createElement("div",{className:"text-area"},p.a.createElement("textarea",Object.assign({},t,{placeholder:a,rows:"10",cols:"40"})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.height,n=t.isFocus,r=this.props,l=r.name,i=r.desc,c=r.placeholderString,o=r.zIndex,s=r.isPassword,u=r.extraInfo,d=r.errorString,m=r.isTextArea,h=r.storeValue,f=r.validateForm,v=r.isPostCode,g=r.toUpper,j=n?"focus":"",k=s?"password":"",O=d?"error":"",S=h?h[l]:null;return p.a.createElement(y.a,{desc:i,ref:function(t){return e.formParent=t},extraInfo:u,errorString:d,refValue:S,validateForm:f},p.a.createElement("div",{className:"text-input-container ".concat(j," ").concat(O),style:{height:a,zIndex:o},onFocus:function(){return e.handleFocus()},onBlur:function(){return e.handleBlur()}},p.a.createElement("div",{className:"text-input"},m?p.a.createElement(b.a,{className:"text",component:this.renderTextArea,name:l,normalize:function(e){return e&&g?e.toUpperCase():e}}):p.a.createElement(b.a,{className:"text",component:"input",type:k,placeholder:c,name:l,normalize:function(e){return e&&g?e.toUpperCase():e}}),v?p.a.createElement("button",{className:"postcode",onClick:function(t){return e.handlePostCode(t)}},p.a.createElement("img",{src:E.a,alt:"magGlass.svg"})):null)))}}]),t}(m.Component);S.defaultProps={desc:null,isPassword:!1,extraInfo:null,errorString:null,isTextArea:!1,height:null,storeValue:null,isPostCode:!1,addressFields:null,validateForm:null,toUpper:!1};t.a=Object(h.connect)(function(e,t){return{storeValue:Object(f.a)(t.form)(e)}},function(e){return{formChange:function(t,a,n){e(Object(v.a)(t,a,n))}}})(S)},342:function(e,t,a){e.exports=a.p+"static/media/EditButton.d239c2ce.svg"},350:function(e,t,a){e.exports=a.p+"static/media/CheckIcon.22021614.svg"},351:function(e,t,a){},431:function(e,t,a){},446:function(e,t,a){"use strict";var n=a(45),r=a(46),l=a(48),i=a(47),c=a(49),o=a(114),s=a(1),u=a.n(s),d=a(2),m=a(5),p=a.n(m),h=a(468),b=a(115),f=a(299),v=a(331),g=a(314),E=a(80),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={errorString:null},a.handleSubmit=a.handleSubmit.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,a=t.onConfirm,n=t.category,r=t.noEmail,l=r?[]:["email"],i=Object(E.b)(e,[].concat(l,["disclaimer"]));r||!i.email?p.a.isEmpty(e.disclaimer)?this.setState({errorString:"Please agree to the terms to proceed."}):p.a.isEmpty(i)?(this.setState({errorString:null}),a(Object(d.a)({},e,{category:n}))):this.setState({errorString:"Please fill in all fields!"}):this.setState({errorString:"Invalid email!"})}},{key:"render",value:function(){var e=this.state.errorString,t=this.props,a=t.handleSubmit,n=t.form,r=t.change,l=t.noEmail;return u.a.createElement("form",{onSubmit:a(this.handleSubmit)},u.a.createElement("div",{className:"mid-container"},u.a.createElement(b.y,{noGutters:!0},l?null:u.a.createElement(b.f,{xs:12},u.a.createElement(v.a,{form:n,change:r,name:"email",placeholderString:"",size:"medium",zIndex:99,desc:"Email Address"})),u.a.createElement(b.f,{xs:12},u.a.createElement(g.a,{form:n,change:r,name:"disclaimer",type:"checkbox",options:[{key:"disclaimer",description:"I agree to store this policy in my PolicyPal account after purchase, in accordance with the Personal Data Protection Act."}],sizeInSM:12,desc:""})),e?u.a.createElement(b.f,{xs:12},u.a.createElement("p",{className:"error-string"},e)):null)),u.a.createElement("div",{className:"button-container"},u.a.createElement(f.a,{type:"submit",className:"checkout-button",variant:"medium-flat-green",width:166,height:72},u.a.createElement("p",null,"Confirm"))))}}]),t}(s.Component);y.defaultProps={category:null,noEmail:!1};var j=Object(h.a)({form:"redirect-form"})(y),k=a(304),O=(a(431),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={category:null},a.openRedirectPopup=a.openRedirectPopup.bind(Object(o.a)(Object(o.a)(a))),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"openRedirectPopup",value:function(e){this.setState({category:e}),setTimeout(this.popupRef.openPopup,100)}},{key:"render",value:function(){var e=this,t=this.state.category,a=this.props,n=a.onConfirm,r=a.noEmail;return u.a.createElement(k.a,{ref:function(t){e.popupRef=t}},u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"redirect-popup"},u.a.createElement("div",{className:"upper-container"},u.a.createElement("p",null,"Kindly fill up the following section before we redirect you to the insurer's page. The details below will be used for verification with the insurer after purchase.")),u.a.createElement(j,{noEmail:r,closPopup:function(){return e.popupRef.closePopup()},onConfirm:n,category:t}))))}}]),t}(s.Component));O.defaultProps={noEmail:!1};t.a=O},603:function(e,t,a){"use strict";var n=a(22),r=a(45),l=a(46),i=a(48),c=a(47),o=a(49),s=a(114),u=a(5),d=a.n(u),m=a(16),p=a.n(m),h=a(1),b=a.n(h),f=a(115),v=a(342),g=a.n(v),E=a(299),y=a(8),j=(a(604),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={modal:!1,revertFunc:function(){},isToolTip:!1},a.renderDetailValues=a.renderDetailValues.bind(Object(s.a)(Object(s.a)(a))),a.renderEditButton=a.renderEditButton.bind(Object(s.a)(Object(s.a)(a))),a.toggle=a.toggle.bind(Object(s.a)(Object(s.a)(a))),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(e){var t=this.state.modal;t&&e&&e(),this.setState({modal:!t})}},{key:"renderDetailValues",value:function(e){var t=this,a=this.state.isToolTip,r=this.props,l=r.values,i=r.valuesToListen,c=r.conditions,o=c?l[c.key]&&l[c.key].value:null,s=o?c.values[o]:null;return l?b.a.createElement("div",{className:"edit-detail-value-container-new"},d.a.reduce(i,function(r,c,o){if(!s||s&&-1!==d.a.findIndex(s,function(e){return e===c.value})){var u=l[c.value]?l[c.value].value:"None",m=u,v=!1;c.customFunc?m=c.customFunc():"cost_simplify"===c.extra?m=Object(y.o)(u):u.constructor===Array?(v=!0,m=Object(n.a)(u),c.aggregateDesc&&m.length>1&&(m="".concat(m.length," ").concat(c.aggregateDesc))):u.constructor===Object?m=u.display_name:u.constructor===Date&&(m=p()(u).format("DD MMM YYYY")),m=m.toString();var g=null;if(e){var E=o===i.length-1?"":",";g=b.a.createElement("div",{key:"detail-".concat(o),className:"detail-resp-value"},m,E)}else g=b.a.createElement("div",{className:"edit-detail-value",key:"detail-".concat(o)},b.a.createElement("img",{src:c.logo,alt:"".concat(c.value,".svg"),className:"detail-logo"}),b.a.createElement("span",{className:"detail-value"},m,v&&u.length>1?b.a.createElement(h.Fragment,null,b.a.createElement(f.C,{target:"initial-form-tooltip-".concat(o),isOpen:a,toggle:function(){return t.setState({isToolTip:!1})},className:"animated fade"},d.a.map(u,function(e,t){return b.a.createElement("p",{key:"tooltip-value-".concat(t)},e)})),b.a.createElement("div",{id:"initial-form-tooltip-".concat(o),className:"tooltip-button",onMouseMove:function(){t.setState({isToolTip:!0})}},b.a.createElement("p",null,"i"))):null));r.push(g)}return r},[])):null}},{key:"renderEditButton",value:function(e){var t=this;return e?b.a.createElement("div",{role:"button",tabIndex:-1,onKeyDown:function(){},onClick:function(){t.toggle()}},b.a.createElement("img",{src:g.a,alt:"EditButton.svg"})):b.a.createElement(E.a,{variant:"medium-outline-edit",height:40,onClick:function(){t.toggle()}},b.a.createElement("p",null,"Edit"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.modal,n=t.revertFunc,r=this.props,l=r.submitCallback;return r.displayOnly?this.renderDetailValues(!1):b.a.createElement("div",{className:"change-form-container-new"},b.a.createElement("div",{className:"edit-detail-container d-none d-lg-flex"},b.a.createElement("div",{className:"edit-detail-inner-container"},this.renderDetailValues(!1)),this.renderEditButton(!1)),b.a.createElement("div",{className:"edit-detail-resp-container d-flex d-lg-none"},b.a.createElement("div",{className:"detail-inner-resp-container"},this.renderDetailValues(!0)),this.renderEditButton(!0)),b.a.createElement(f.o,{isOpen:a,size:"lg",backdropClassName:"blue-modal-backdrop"},b.a.createElement(f.r,{toggle:function(){return e.toggle(n)}}),b.a.cloneElement(this.props.children,{submitCallback:l,closePopUp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e.toggle(),t()},setCloseCallBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return e.setState({revertFunc:t})}})))}}]),t}(h.Component));j.defaultProps={submitCallback:null,conditions:null,headerValue:null,displayOnly:!1,values:null},t.a=j},604:function(e,t,a){}}]);
//# sourceMappingURL=TravelDetailContainer.bb4b6c1c.chunk.js.map