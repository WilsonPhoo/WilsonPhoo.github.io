{"version":3,"sources":["assets/images/Profile/Female.png","assets/images/Profile/Male.png","components/Profile/ProfileCashback.js","components/Profile/ProfileForm.js","components/Profile/Profile.js","containers/Profile/ProfileContainer.js","components/Forms/DatePicker/DatePickerV2.js","assets/images/common/CashbackLogo.svg","assets/images/forms/dateIn.svg","assets/images/forms/dateOut.svg","components/Templates/CashbackBalance/CashbackBalance.js"],"names":["module","exports","__webpack_require__","p","ProfileCashback","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","renderCashbackList","bind","assertThisInitialized","renderFreshCashback","rewardData","_","map","data","index","bgSyle","date","ISOStringToFormDate","created_at","pointsSymbol","type","pointsDeductStyle","react_default","a","createElement","react","key","concat","className","colSpan","insurer","policy_name","reward_points","status","history","reactstrap_es","xs","Button","variant","width","height","onClick","push","src","CashbackLogo","alt","noGutters","responsive","Component","defaultProps","withRouter","userLabels","ProfileForm","state","errorStringData","message","handleSubmit","validateForm","nextProps","prevState","userDetails","change","result","syncStoreToForm","label","e","isSubmit","errorResult","getPostal","postal_code","setState","isFirstValidate","loading","loadingEnd","storeForm","formToUse","isEmptyResult","isEmpty","setTimeout","updateTabHeight","dateReValidate","error","_this2","token","saveProfile","_this3","_this$props2","form","constants","onSubmit","sm","TextInput","name","placeholderString","size","zIndex","desc","errorString","firstName","surname","DropDownV2","dropList","idTypes","id_type","nric","toUpper","nationalities","nationality","DatePickerV2","dateOfBirth","gender","maritalStatus","marital_status","race","occupations","occupation","contact","smoker","address","unit_no","isPostCode","addressFields","unitNo","renderMessage","reduxForm","destroyOnUnmount","connect","getFormValues","dispatch","profile","callBack","errorMsg","time","setLoading","clearLoading","Profile","renderLeftProfile","renderCashbackbalance","renderCashbackInfo","resetInsurance","onPageInsurance","NONE","resetMore","onPageMore","resetBusiness","onPageBusiness","_this$props","resetIndicatorInsurance","resetIndicatorMore","resetIndicatorBusiness","logOut","profilePic","toUpperCase","Female","Male","cashbackBalance","CashbackBalance","toString","validString","href","target","_this$props3","TabView","maxTabWidthPx","tabs","isDisableDropdown","Profile_ProfileForm","Profile_ProfileCashback","FooterContainer","marginTop","setStateInsurance","setStateMore","setStateBusiness","ProfileContainer","getRewards","logout","components_Profile_Profile","reward_points_expire_at","insurance","getRewardDetails","clearLoginData","placeholderStringDefault","monthTextMapping","mediumHeight","bigHeight","deafultYearRange","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","startDate","endDate","currDate","Date","year","getFullYear","month","getMonth","firstDay","lastDay","dateRangeStart","dateRangeEnd","placeHolder","isOpened","selectedString","currFirstDay","currLastDay","selectedStartDate","selectedEndDate","handleSelectClick","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__","handleClickOutside","handleOnInputChange","handleKeyPress","handleExit","handleBlur","handleFocus","setSelectedDate","setNewDate","setCalender","onMovement","isFromFocus","updateStartEndDate","dateName","dateReformed","storeStringToDate","isRange","incomingStartDate","incomingEndDate","isDateEqual","document","addEventListener","window","formStore","dateInner","dateInnerDOM","ReactDOM","findDOMNode","datePickerDOM","wrapperRef","prevProps","_this$state","isStart","removeEventListener","toggleDateInner","_this$state2","isOverHeight","getBoundingClientRect","bottom","outerHeight","setArrowUp","top","style","left","extraState","arguments","length","undefined","selectedCallback","newYear","newMonth","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","setNewState","_this$state3","focus","_this$state4","endRef","storeString","dateString","currDay","getDate","slice","currMonth","currYear","newSelectedStartDate","newSelectedEndDate","wrappedInstance","event","_this$state5","_this$props4","isTargetWithinDateRangePicker","contains","doNotBlur","charCode","preventDefault","_this$state6","_this$props5","selectedStart","start_date","selectedEnd","end_date","inputField","input","getRenderedComponent","blur","value","defaultValue","relatedTarget","isChildren","isClicked","_this$state7","_this$props6","isError","moment","isValid","selectedDate","parts","split","_this4","_this$state8","_this$props7","maxWidth","extraInfo","mainStyle","dropDownOpenStyle","isErrorStyle","rangeIcon","DateIn","DateOut","rangIconStyle","refValue","react__WEBPACK_IMPORTED_MODULE_9___default","_FormInputWrapper_FormInputWrapper__WEBPACK_IMPORTED_MODULE_18__","ref","node","formParent","onBlur","onFocus","onKeyUp","role","tabIndex","redux_form__WEBPACK_IMPORTED_MODULE_12__","withRef","component","placeholder","autoComplete","onChange","onKeyPress","onMouseDown","innerWidth","Arrow","ownProps","datepicker","datePickerInner","react__WEBPACK_IMPORTED_MODULE_5___default"],"mappings":"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","file":"static/js/profile.74ec1b1f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Female.d0efc021.png\";","module.exports = __webpack_public_path__ + \"static/media/Male.54e96d83.png\";","/**\r\n * ProfileCashback.js\r\n * Cashback portion for profile view\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Row, Col, Table } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CashbackLogo from 'assets/images/common/CashbackLogo.svg';\r\nimport { ISOStringToFormDate } from 'lib/dateFunctions';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\n\r\nimport './Profile.scss';\r\n\r\nclass ProfileCashback extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.renderCashbackList = this.renderCashbackList.bind(this);\r\n    this.renderFreshCashback = this.renderFreshCashback.bind(this);\r\n  }\r\n\r\n  renderCashbackList() {\r\n    const { rewardData } = this.props;\r\n\r\n    return _.map(rewardData, (data, index) => {\r\n      const bgSyle = index % 2 ? 'cell-colored' : '';\r\n      const date = ISOStringToFormDate(data.created_at);\r\n      const pointsSymbol = data.type === 'add' ? '+' : '-';\r\n      const pointsDeductStyle = data.type === 'add' ? '' : 'table-amount-minus';\r\n\r\n      return (\r\n        <Fragment key={`casback-${index}`}>\r\n          <tr className=\"d-table-row d-sm-none resp-height\">\r\n            <td className=\"resp-height cell-header\" colSpan={3}>\r\n              <div className=\"table-item-container resp-height\">\r\n                <p className=\"table-item-text resp-text\">{data.insurer} - {data.policy_name}</p>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td className={`d-none d-sm-table-cell ${bgSyle}`}>\r\n              <div className=\"table-item-container\">\r\n                <p className=\"table-item-text\">{data.insurer}</p>\r\n                <p className=\"table-item-text\">{data.policy_name}</p>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div className={`table-item-container ${bgSyle}`}>\r\n                <p className=\"table-item-text\">{date}</p>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div className={`table-item-container ${bgSyle}`}>\r\n                <p className={`table-amount-text ${pointsDeductStyle}`}>{`${pointsSymbol}${data.reward_points}`}</p>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div className={`table-item-container ${bgSyle}`}>\r\n                <p\r\n                  className={`table-completed-text ${data.status === 'pending' ? 'table-pending-text' : 'table-completed-text'}`}\r\n                >\r\n                  {data.status}\r\n                </p>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </Fragment>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderFreshCashback() {\r\n    const { history } = this.props;\r\n    return (\r\n      <Col className=\"fresh-cashback-container\" xs={12}>\r\n        <p className=\"fresh-text\">No record found, start earning cashbacks by purchasing a Travel/Motor plan!</p>\r\n        <Button\r\n          variant=\"medium-flat-green\"\r\n          width={200}\r\n          height={72}\r\n          onClick={() => history.push('/categories')}\r\n        >\r\n          <p>Get Covered</p>\r\n        </Button>\r\n      </Col>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { rewardData } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Row>\r\n          <Col className=\"cashback-history-container\" xs={12}>\r\n            <img src={CashbackLogo} alt=\"CashbackLogo.svg\" />\r\n            <p>Cashback History</p>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"profile-cashback-container\" noGutters>\r\n          <Table responsive>\r\n            <thead>\r\n              <tr>\r\n                <th className=\"d-none d-sm-table-cell\">\r\n                  <div className=\"table-item-container\">\r\n                    <p>Plan</p>\r\n                  </div>\r\n                </th>\r\n                <th>\r\n                  <div className=\"table-item-container\">\r\n                    <p>Date</p>\r\n                  </div>\r\n                </th>\r\n                <th>\r\n                  <div className=\"table-item-container\">\r\n                    <p>Amount</p>\r\n                  </div>\r\n                </th>\r\n                <th>\r\n                  <div className=\"table-item-container\">\r\n                    <p>Status</p>\r\n                  </div>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            {\r\n              rewardData ?\r\n                <tbody>\r\n                  {this.renderCashbackList()}\r\n                </tbody>\r\n              :\r\n                null\r\n            }\r\n          </Table>\r\n          {\r\n            !rewardData ?\r\n              this.renderFreshCashback()\r\n            :\r\n              null\r\n          }\r\n        </Row>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nProfileCashback.defaultProps = {\r\n  rewardData: null,\r\n};\r\n\r\nProfileCashback.propTypes = {\r\n  rewardData: PropTypes.array,\r\n  history: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRouter(ProfileCashback);\r\n\r\n","/**\r\n * ProfileForm.js\r\n * The user detail form in profile page\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { reduxForm, getFormValues } from 'redux-form';\r\nimport { Row, Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport DatePickerV2 from '../Forms/DatePicker/DatePickerV2';\r\nimport DropDownV2 from '../Forms/DropDown/DropDownV2';\r\nimport TextInput from '../Forms/TextInput/TextInput';\r\n\r\nimport { getPostal } from '../../actions/insuranceActions';\r\nimport { setLoading, clearLoading } from '../../actions/loadingScreenActions';\r\nimport { saveProfile } from '../../actions/userActions';\r\nimport { validateForm, dateReValidate } from '../../lib/validators';\r\n\r\nimport './Profile.scss';\r\n\r\nconst userLabels = [\r\n  'firstName',\r\n  'surname',\r\n  'id_type',\r\n  'nric',\r\n  'nationality',\r\n  'dateOfBirth',\r\n  'gender',\r\n  'marital_status',\r\n  'race',\r\n  'occupation',\r\n  'contact',\r\n  'smoker',\r\n  'address',\r\n  'unit_no',\r\n  'postal_code',\r\n];\r\n\r\nconst profileFormName = 'profile';\r\n\r\nclass ProfileForm extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { userDetails, change } = nextProps;\r\n\r\n    let result = null;\r\n    if (userDetails) {\r\n      if (!prevState.userDetails || userDetails.data !== prevState.userDetails.data) {\r\n        ProfileForm.syncStoreToForm(userDetails.data, change);\r\n        result = { userDetails };\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static syncStoreToForm(userDetails, change) {\r\n    _.map(userLabels, (label) => {\r\n      change(label, userDetails[label]);\r\n    });\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      errorStringData: {},\r\n      message: null,\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.validateForm = this.validateForm.bind(this);\r\n  }\r\n\r\n  async validateForm(e, isSubmit = false) {\r\n    const errorResult = validateForm(e, userLabels);\r\n\r\n    if (isSubmit) {\r\n      const postalResult = await getPostal(e.postal_code);\r\n      if (!postalResult) {\r\n        errorResult.postal_code = 'Invalid postal code';\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      errorStringData: errorResult,\r\n    });\r\n\r\n    return errorResult;\r\n  }\r\n\r\n  async handleSubmit(e, isFirstValidate = true) {\r\n    const {\r\n      userDetails,\r\n      loading,\r\n      loadingEnd,\r\n      storeForm,\r\n    } = this.props;\r\n    const formToUse = isFirstValidate ? e : storeForm;\r\n    const errorResult = await this.validateForm(formToUse, true);\r\n    const isEmptyResult = _.isEmpty(errorResult);\r\n\r\n    setTimeout(this.props.updateTabHeight, 10);\r\n    if (dateReValidate(\r\n      isEmptyResult,\r\n      isFirstValidate,\r\n      errorResult,\r\n      error => this.setState({ errorStringData: error }),\r\n      () => this.handleSubmit(storeForm, false),\r\n    )) {\r\n      return;\r\n    }\r\n\r\n    if (isEmptyResult &&\r\n      userDetails &&\r\n      userDetails.data &&\r\n      userDetails.data.token) {\r\n      loading();\r\n      const result = await this.props.saveProfile(userDetails.data.token, formToUse);\r\n      const message = result ? 'Profile has been updated.' : 'An error has occured. Please try again.';\r\n      this.setState({\r\n        message,\r\n      });\r\n\r\n      loadingEnd();\r\n    }\r\n  }\r\n\r\n  renderMessage() {\r\n    const { message } = this.state;\r\n    if (message) {\r\n      return (\r\n        <Col xs={12}>\r\n          <p className=\"message\">{message}</p>\r\n        </Col>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const { errorStringData } = this.state;\r\n    const {\r\n      change,\r\n      form,\r\n      handleSubmit,\r\n      constants,\r\n      storeForm,\r\n    } = this.props;\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit(this.handleSubmit)}>\r\n        <Row className=\"profile-form\" noGutters>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"firstName\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={99}\r\n              desc=\"First name\"\r\n              errorString={errorStringData.firstName}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"surname\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={97}\r\n              desc=\"Last name\"\r\n              errorString={errorStringData.surname}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"id_type\"\r\n              placeholderString=\"Select ID Type\"\r\n              dropList={constants.idTypes}\r\n              size=\"medium\"\r\n              zIndex={96}\r\n              desc=\"Type of ID\"\r\n              errorString={errorStringData.id_type}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"nric\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={95}\r\n              desc=\"ID Number\"\r\n              errorString={errorStringData.nric}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n              toUpper\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"nationality\"\r\n              placeholderString=\"Select Nationality\"\r\n              dropList={constants.nationalities}\r\n              size=\"medium\"\r\n              zIndex={94}\r\n              desc=\"Nationality\"\r\n              errorString={errorStringData.nationality}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <DatePickerV2\r\n              form={form}\r\n              change={change}\r\n              name=\"dateOfBirth\"\r\n              size=\"medium\"\r\n              zIndex={93}\r\n              desc=\"Date of birth\"\r\n              errorString={errorStringData.dateOfBirth}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"gender\"\r\n              placeholderString=\"Select Gender\"\r\n              dropList={constants.gender}\r\n              size=\"medium\"\r\n              zIndex={92}\r\n              desc=\"Gender\"\r\n              errorString={errorStringData.gender}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"marital_status\"\r\n              placeholderString=\"Select Marital Status\"\r\n              dropList={constants.maritalStatus}\r\n              size=\"medium\"\r\n              zIndex={91}\r\n              desc=\"Marital Status\"\r\n              errorString={errorStringData.marital_status}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"race\"\r\n              placeholderString=\"Select Race\"\r\n              dropList={constants.race}\r\n              size=\"medium\"\r\n              zIndex={90}\r\n              desc=\"Race\"\r\n              errorString={errorStringData.race}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"occupation\"\r\n              placeholderString=\"Select Occupation\"\r\n              dropList={constants.occupations}\r\n              size=\"medium\"\r\n              zIndex={89}\r\n              desc=\"Occupation\"\r\n              errorString={errorStringData.occupation}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"contact\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={88}\r\n              desc=\"Mobile Number\"\r\n              errorString={errorStringData.contact}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <DropDownV2\r\n              form={form}\r\n              change={change}\r\n              name=\"smoker\"\r\n              placeholderString=\"Select Smoking Status\"\r\n              dropList={constants.smoker}\r\n              size=\"medium\"\r\n              zIndex={87}\r\n              desc=\"Smoking Status\"\r\n              errorString={errorStringData.smoker}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-seperator\" xs={12}>\r\n            <p>Address</p>\r\n          </Col>\r\n          <Col xs={12}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"address\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={86}\r\n              desc=\"Address\"\r\n              errorString={errorStringData.address}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-right-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"unit_no\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={85}\r\n              desc=\"Unit No\"\r\n              errorString={errorStringData.unit_no}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n            />\r\n          </Col>\r\n          <Col className=\"form-left-padding\" xs={12} sm={6}>\r\n            <TextInput\r\n              form={form}\r\n              change={change}\r\n              name=\"postal_code\"\r\n              placeholderString=\"\"\r\n              size=\"medium\"\r\n              zIndex={84}\r\n              desc=\"Postcode\"\r\n              errorString={errorStringData.postal_code}\r\n              validateForm={() => this.validateForm(storeForm)}\r\n              isPostCode\r\n              addressFields={{\r\n                address: 'address',\r\n                unitNo: 'unit_no',\r\n              }}\r\n            />\r\n          </Col>\r\n          {this.renderMessage()}\r\n          <Col className=\"submit-container\" xs={12}>\r\n            <Button\r\n              variant=\"medium-flat-green\"\r\n              width={200}\r\n              height={72}\r\n              type=\"submit\"\r\n            >\r\n              <p>Save</p>\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nProfileForm.defaultProps = {\r\n  storeForm: null,\r\n};\r\n\r\nProfileForm.propTypes = {\r\n  saveProfile: PropTypes.func.isRequired,\r\n  change: PropTypes.func.isRequired,\r\n  form: PropTypes.string.isRequired,\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  constants: PropTypes.object.isRequired,\r\n  userDetails: PropTypes.object.isRequired,\r\n  loading: PropTypes.func.isRequired,\r\n  loadingEnd: PropTypes.func.isRequired,\r\n  updateTabHeight: PropTypes.func.isRequired,\r\n  storeForm: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  storeForm: getFormValues(profileFormName)(state),\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  saveProfile: (token, profile) => (\r\n    dispatch(saveProfile(token, profile))\r\n  ),\r\n  loading: (callBack, errorMsg, time) => {\r\n    dispatch(setLoading(callBack, errorMsg, time));\r\n  },\r\n  loadingEnd: () => {\r\n    dispatch(clearLoading());\r\n  },\r\n});\r\n\r\nexport default reduxForm({\r\n  form: profileFormName,\r\n  destroyOnUnmount: false,\r\n})(connect(mapStateToProps, mapDispatchToProps)(ProfileForm));\r\n\r\n","/**\r\n * Profile.js\r\n * Profile view for logged in personnal\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getFormValues } from 'redux-form';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Row, Col } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Female from 'assets/images/Profile/Female.png';\r\nimport Male from 'assets/images/Profile/Male.png';\r\nimport CashbackLogo from 'assets/images/common/CashbackLogo.svg';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport CashbackBalance from '../Templates/CashbackBalance/CashbackBalance';\r\nimport TabView from '../Templates/TabView/TabView';\r\n\r\nimport FooterContainer from '../../containers/FooterContainer';\r\nimport ProfileCashback from './ProfileCashback';\r\nimport ProfileForm from './ProfileForm';\r\n\r\nimport './Profile.scss';\r\n\r\nimport {\r\n  onPageInsurance,\r\n  setStateInsurance,\r\n  onPageMore,\r\n  setStateMore,\r\n  onPageBusiness,\r\n  setStateBusiness,\r\n} from '../../actions/navActions';\r\n\r\nclass Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.renderLeftProfile = this.renderLeftProfile.bind(this);\r\n    this.renderCashbackbalance = this.renderCashbackbalance.bind(this);\r\n    this.renderCashbackInfo = this.renderCashbackInfo.bind(this);\r\n\r\n    // Set Insurance Page Indicator\r\n    const resetInsurance = onPageInsurance.NONE;\r\n    // Reset More Page Indicator\r\n    const resetMore = onPageMore.NONE;\r\n\r\n    // Reset Business Page Indicator\r\n    const resetBusiness = onPageBusiness.NONE;\r\n\r\n    const {\r\n      resetIndicatorInsurance,\r\n      resetIndicatorMore,\r\n      resetIndicatorBusiness,\r\n    } = this.props;\r\n    resetIndicatorInsurance(resetInsurance);\r\n    resetIndicatorMore(resetMore);\r\n    resetIndicatorBusiness(resetBusiness);\r\n  }\r\n\r\n  renderLeftProfile() {\r\n    const { logOut, userDetails, storeForm } = this.props;\r\n    const profilePic = storeForm &&\r\n      storeForm.gender &&\r\n      storeForm.gender.toUpperCase() === 'FEMALE' ? Female : Male;\r\n\r\n    return (\r\n      <div className=\"profile-pic-container\">\r\n        <div className=\"profile-pic\">\r\n          <img src={profilePic} alt=\"Profile Pic\" />\r\n        </div>\r\n        <p className=\"profile-name\">{userDetails.data.surname} {userDetails.data.firstName}</p>\r\n        <Button\r\n          variant=\"medium-outline\"\r\n          width={132}\r\n          height={36}\r\n          onClick={logOut}\r\n        >\r\n          <p>Logout</p>\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCashbackbalance() {\r\n    const { cashbackBalance } = this.props;\r\n\r\n    return (\r\n      <CashbackBalance cashbackBalance={cashbackBalance.toString()} />\r\n    );\r\n  }\r\n\r\n  renderCashbackInfo() {\r\n    const { validString } = this.props;\r\n\r\n    if (validString) {\r\n      return (\r\n        <div className=\"cashback-how\">\r\n          <p className=\"valid-text\">Valid till: {validString}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <a className=\"cashback-how\" href=\"/cashback\" target=\"_blank\">\r\n        <div className=\"cashback-how-inner\">\r\n          <p className=\"question\">?</p>\r\n          <p>How to earn</p>\r\n          <img src={CashbackLogo} alt=\"CashbackLogo.svg\" />\r\n          <p>Cashback?</p>\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      rewardData,\r\n      userDetails,\r\n      constants,\r\n      storeForm,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Row className=\"profile-container\" noGutters>\r\n          {this.renderLeftProfile()}\r\n          <div className=\"profile-detail-container\">\r\n            <Col xs={12}>\r\n              <p className=\"profile-header\">My Account</p>\r\n            </Col>\r\n            <Col className=\"cashback-top-container\" xs={12}>\r\n              <Row noGutters>\r\n                <Col xs={12} sm={6}>\r\n                  {this.renderCashbackbalance()}\r\n                </Col>\r\n                <Col xs={12} sm={6}>\r\n                  {this.renderCashbackInfo()}\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n            <Col xs={12}>\r\n              <TabView\r\n                maxTabWidthPx={128}\r\n                tabs={[\r\n                  'Overview',\r\n                  'Cashback',\r\n                ]}\r\n                isDisableDropdown\r\n                name=\"profile-tab\"\r\n              >\r\n                {[\r\n                  <ProfileForm\r\n                    key=\"profileForm\"\r\n                    userDetails={userDetails}\r\n                    constants={constants}\r\n                    storeForm={storeForm}\r\n                  />,\r\n                  <ProfileCashback\r\n                    key=\"profileCashback\"\r\n                    rewardData={rewardData}\r\n                  />,\r\n                ]}\r\n              </TabView>\r\n            </Col>\r\n          </div>\r\n        </Row>\r\n        <FooterContainer\r\n          marginTop={-50}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nProfile.defaultProps = {\r\n  rewardData: null,\r\n  validString: null,\r\n  cashbackBalance: 0,\r\n  storeForm: null,\r\n  resetIndicatorInsurance: null,\r\n  resetIndicatorMore: null,\r\n  resetIndicatorBusiness: null,\r\n};\r\n\r\nProfile.propTypes = {\r\n  rewardData: PropTypes.array,\r\n  validString: PropTypes.string,\r\n  cashbackBalance: PropTypes.number,\r\n  logOut: PropTypes.func.isRequired,\r\n  userDetails: PropTypes.object.isRequired,\r\n  constants: PropTypes.object.isRequired,\r\n  storeForm: PropTypes.object,\r\n  resetIndicatorInsurance: PropTypes.func,\r\n  resetIndicatorMore: PropTypes.func,\r\n  resetIndicatorBusiness: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  storeForm: getFormValues('profile')(state),\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  resetIndicatorInsurance: (resetInsurance) => {\r\n    dispatch(setStateInsurance(resetInsurance));\r\n  },\r\n  resetIndicatorMore: (resetMore) => {\r\n    dispatch(setStateMore(resetMore));\r\n  },\r\n  resetIndicatorBusiness: (resetBusiness) => {\r\n    dispatch(setStateBusiness(resetBusiness));\r\n  },\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Profile));\r\n","/**\r\n * ProfileContainer.js\r\n * Profile Container.\r\n *\r\n * Will get cashback details only here.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport Profile from '../../components/Profile/Profile';\r\n\r\nimport { getRewardDetails, clearLoginData } from '../../actions/userActions';\r\n\r\nclass ProfileContainer extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { userDetails, getRewards, history } = nextProps;\r\n\r\n    let result = null;\r\n    if (userDetails) {\r\n      if (userDetails.data !== prevState.userDetails.data) {\r\n        if (userDetails.data && userDetails.data.token) {\r\n          getRewards(userDetails.data.token);\r\n        } else {\r\n          history.push('/');\r\n        }\r\n\r\n        result = { userDetails };\r\n      }\r\n\r\n      if (userDetails.data && userDetails.rewardData !== prevState.userDetails.rewardData) {\r\n        result = { userDetails };\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { userDetails, getRewards } = this.props;\r\n    if (userDetails && userDetails.data && !userDetails.rewardData) {\r\n      getRewards(userDetails.data.token);\r\n    }\r\n\r\n    this.state = {\r\n      userDetails,\r\n    };\r\n\r\n    this.logOut = this.logOut.bind(this);\r\n  }\r\n\r\n  logOut() {\r\n    const { logout, history } = this.props;\r\n\r\n    logout();\r\n    history.push('/');\r\n  }\r\n\r\n  render() {\r\n    const { userDetails } = this.state;\r\n    const { constants } = this.props;\r\n    const { data, rewardData } = userDetails;\r\n\r\n    if (!userDetails.data || !constants) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Profile\r\n        userDetails={userDetails}\r\n        rewardData={rewardData}\r\n        validString={data.reward_points_expire_at}\r\n        cashbackBalance={data.reward_points}\r\n        logOut={this.logOut}\r\n        constants={constants}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nProfileContainer.defaultProps = {\r\n  constants: null,\r\n};\r\n\r\nProfileContainer.propTypes = {\r\n  userDetails: PropTypes.object.isRequired,\r\n  logout: PropTypes.func.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  constants: PropTypes.object,\r\n  getRewards: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  userDetails: state.userDetails,\r\n  constants: state.insurance.constants,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getRewards: token => (\r\n    dispatch(getRewardDetails(token))\r\n  ),\r\n  logout: () => (\r\n    dispatch(clearLoginData())\r\n  ),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ProfileContainer));\r\n","/**\r\n * DatePickerV2.js\r\n * Custom form dropdown menu with input\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ReactDOM from 'react-dom';\r\nimport { Field, getFormValues } from 'redux-form';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\n\r\nimport Arrow from 'assets/images/forms/arrow.svg';\r\nimport DateIn from 'assets/images/forms/dateIn.svg';\r\nimport DateOut from 'assets/images/forms/dateOut.svg';\r\n\r\nimport FormInputWrapper from '../FormInputWrapper/FormInputWrapper';\r\nimport { isDateEqual, storeStringToDate } from '../../../lib/dateFunctions';\r\n\r\nimport '../DropDown/DropDown.scss';\r\nimport './DatePickerV2.scss';\r\n\r\n/**\r\n * Constants\r\n */\r\n// Placeholder string when no input\r\nconst placeholderStringDefault = 'dd/mm/yyy';\r\n// Month text for display\r\nconst monthTextMapping = [\r\n  'January',\r\n  'Feburary',\r\n  'March',\r\n  'April',\r\n  'May',\r\n  'June',\r\n  'July',\r\n  'August',\r\n  'September',\r\n  'October',\r\n  'November',\r\n  'December',\r\n];\r\n\r\n// Height for medium dropdown\r\nconst mediumHeight = 60;\r\n// Height for big dropdown\r\nconst bigHeight = 72;\r\n// Default year range if not user defined\r\nconst deafultYearRange = 100;\r\n\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass DatePickerV2 extends Component {\r\n  /**\r\n   * Lifecycle Method - getDerivedStateFromProps\r\n   *\r\n   * Used to set sibling date range values for\r\n   * selected start and end date\r\n   *\r\n   * @param {object} nextProps Component props\r\n   */\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const result = {};\r\n\r\n    // Update selected Start End date state\r\n    function updateStartEndDate(dateName, date) {\r\n      const dateReformed = storeStringToDate(date);\r\n      if (dateReformed !== -1) {\r\n        result[dateName] = dateReformed;\r\n      }\r\n    }\r\n\r\n    // Only valid for date range picker\r\n    const { isRange, endDate } = nextProps;\r\n\r\n    if (isRange) {\r\n      const {\r\n        incomingStartDate,\r\n        incomingEndDate,\r\n      } = nextProps;\r\n      updateStartEndDate('selectedStartDate', incomingStartDate);\r\n      updateStartEndDate('selectedEndDate', incomingEndDate);\r\n    }\r\n\r\n    // Update end date from date range picker\r\n    if (endDate && !isDateEqual(endDate, prevState.dateRangeEnd)) {\r\n      result.dateRangeEnd = endDate;\r\n    }\r\n\r\n    return result === {} ? null : result;\r\n  }\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {object} props Component props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // size - Size of this control\r\n    // startDate - Start range of date\r\n    // endDate - End range of date\r\n    // currDate - Day to set current view in calender (Default to today)\r\n    const {\r\n      size,\r\n      startDate,\r\n      endDate,\r\n      currDate,\r\n      placeholderString,\r\n    } = this.props;\r\n\r\n    // Get the control height\r\n    const height = size === 'big' ? bigHeight : mediumHeight;\r\n\r\n    // Get current date\r\n    const date = currDate || new Date();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    // Get first and last day of the month to display\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    // Get the calender range\r\n    const dateRangeStart = startDate != null ? startDate : new Date(year - deafultYearRange, month);\r\n    const dateRangeEnd = endDate != null ? endDate : new Date(year + deafultYearRange, month);\r\n\r\n    // Get default placeholder string\r\n    const placeHolder = placeholderString != null ? placeholderString : placeholderStringDefault;\r\n\r\n    // isOpened - Whether dropdown is opened\r\n    // isError - Whether there is input error\r\n    // selectedString - The selected date string\r\n    // height - Control height\r\n    // currDate - Current selected date in view\r\n    // currFirstDay - Current first day of the month in view\r\n    // currLastDay - Current last day of the month in view\r\n    // monthDropdownOpen - Whether month selector is opened\r\n    // yearDropdownOpen - Whether year selector is opened\r\n    // selectedStartDate - Selected start date(If single select also use this)\r\n    // selectedEndDate - Selected end date for date range picker\r\n    // dateRangeStart - The actual calender start range\r\n    // dateRangeEnd - The actual calender end range\r\n    this.state = {\r\n      isOpened: false,\r\n      selectedString: placeHolder,\r\n      height,\r\n      currDate: date,\r\n      currFirstDay: firstDay,\r\n      currLastDay: lastDay,\r\n      selectedStartDate: null,\r\n      selectedEndDate: null,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n      placeHolder,\r\n    };\r\n\r\n    this.handleSelectClick = this.handleSelectClick.bind(this);\r\n    this.handleClickOutside = this.handleClickOutside.bind(this);\r\n    this.handleOnInputChange = this.handleOnInputChange.bind(this);\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    this.handleExit = this.handleExit.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.handleFocus = this.handleFocus.bind(this);\r\n\r\n    this.setSelectedDate = this.setSelectedDate.bind(this);\r\n    this.setNewDate = this.setNewDate.bind(this);\r\n    this.setCalender = this.setCalender.bind(this);\r\n    this.onMovement = this.onMovement.bind(this);\r\n\r\n    this.isFromFocus = false;\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidMount\r\n   */\r\n  componentDidMount() {\r\n    // Add Handler to handle click outside of screen\r\n    document.addEventListener('mousedown', this.handleClickOutside);\r\n    window.addEventListener('scroll', this.onMovement);\r\n    window.addEventListener('resize', this.onMovement);\r\n\r\n    const {\r\n      name,\r\n      formStore,\r\n      dateInner,\r\n    } = this.props;\r\n\r\n    // Update prefill dates\r\n    if (formStore && formStore[name]) {\r\n      this.setSelectedDate(storeStringToDate(formStore[name]));\r\n    }\r\n\r\n    this.setState({\r\n      dateInnerDOM: ReactDOM.findDOMNode(dateInner),\r\n      datePickerDOM: ReactDOM.findDOMNode(this.wrapperRef),\r\n    });\r\n\r\n    this.onMovement();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentDidUpdate\r\n   *\r\n   * Used to update dropdown position\r\n   * of month and year selector\r\n   */\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const {\r\n      currDate,\r\n      selectedStartDate,\r\n      selectedEndDate,\r\n      dateRangeEnd,\r\n    } = this.state;\r\n\r\n    const { isStart } = this.props;\r\n\r\n    // If end date is shorten because of start date and\r\n    // end date is beyond range, shift back date\r\n    if (!isDateEqual(prevState.dateRangeEnd, dateRangeEnd)) {\r\n      if (dateRangeEnd < selectedEndDate) {\r\n        this.setSelectedDate(dateRangeEnd);\r\n      }\r\n    }\r\n\r\n    // Set month of end date to be not lesser than start date\r\n    if (!isStart && selectedStartDate && currDate && currDate < selectedStartDate) {\r\n      this.setNewDate(selectedStartDate);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Lifecycle Method - componentWillUnmount\r\n   */\r\n  componentWillUnmount() {\r\n    const { dateInner } = this.props;\r\n    // Remove Handler to handle click outside of screen\r\n    document.removeEventListener('mousedown', this.handleClickOutside);\r\n    window.removeEventListener('scroll', this.onMovement);\r\n    window.removeEventListener('resize', this.onMovement);\r\n\r\n    if (dateInner) {\r\n      dateInner.toggleDateInner(false);\r\n    }\r\n  }\r\n\r\n  onMovement() {\r\n    const { dateInnerDOM, datePickerDOM, isOpened } = this.state;\r\n    const { dateInner } = this.props;\r\n\r\n    if (isOpened && dateInnerDOM && datePickerDOM) {\r\n      const isOverHeight = datePickerDOM.getBoundingClientRect().bottom + 540 > window.outerHeight;\r\n      dateInner.setArrowUp(!isOverHeight);\r\n      const top = isOverHeight ? datePickerDOM.getBoundingClientRect().top - 450 : datePickerDOM.getBoundingClientRect().bottom + 10;\r\n      dateInnerDOM.style.left = `${datePickerDOM.getBoundingClientRect().left}px`;\r\n      dateInnerDOM.style.top = `${top}px`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setNewDate\r\n   *\r\n   * Set new current date and\r\n   * start and end of calender\r\n   *\r\n   * @param {date} date\r\n   */\r\n  setNewDate(date, extraState = {}, selectedCallback) {\r\n    const { isOpened } = this.state;\r\n    const { dateInner } = this.props;\r\n    const newYear = date.getFullYear();\r\n    const newMonth = date.getMonth();\r\n\r\n    // Get first and last day of visible month\r\n    const firstDay = new Date(newYear, newMonth, 1);\r\n    const lastDay = new Date(newYear, newMonth + 1, 0);\r\n\r\n    // Set new calender values\r\n    this.setState({\r\n      currDate: date,\r\n      currFirstDay: firstDay,\r\n      currLastDay: lastDay,\r\n      ...extraState,\r\n    }, () => {\r\n      if (selectedCallback) {\r\n        selectedCallback({\r\n          currDate: date,\r\n          currFirstDay: firstDay,\r\n          currLastDay: lastDay,\r\n          selectedStartDate: extraState.selectedStartDate,\r\n          selectedEndDate: extraState.selectedEndDate,\r\n        });\r\n      } else if (isOpened) {\r\n        dateInner.setNewState({\r\n          currDate: date,\r\n          currFirstDay: firstDay,\r\n          currLastDay: lastDay,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setCalender\r\n   *\r\n   * Set visible calender\r\n   *\r\n   * @param {number} month\r\n   * @param {number} year\r\n   */\r\n  setCalender(month, year) {\r\n    const {\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n    } = this.state;\r\n\r\n    let date = new Date(year, month);\r\n\r\n    // Cap date range\r\n    if (date < dateRangeStart) {\r\n      date = dateRangeStart;\r\n    } else if (date > dateRangeEnd) {\r\n      date = dateRangeEnd;\r\n    }\r\n\r\n    this.setNewDate(date);\r\n    this.wrapperRef.focus();\r\n  }\r\n\r\n  /**\r\n   * setSelectedDate\r\n   *\r\n   * Updated selected date to store\r\n   *\r\n   * @param {date} date\r\n   */\r\n  setSelectedDate(date, selectedCallback = () => {}) {\r\n    const { selectedStartDate, selectedEndDate } = this.state;\r\n\r\n    const {\r\n      change,\r\n      name,\r\n      isStart,\r\n      isRange,\r\n      endRef,\r\n      // dateInner,\r\n    } = this.props;\r\n\r\n    try {\r\n      let storeString = null;\r\n      let dateString = null;\r\n      if (date) {\r\n        // Get date values in string\r\n        const currDay = (`0${date.getDate().toString()}`).slice(-2);\r\n        const currMonth = (`0${(date.getMonth() + 1).toString()}`).slice(-2);\r\n        const currYear = date.getFullYear().toString();\r\n\r\n        // Get date in string\r\n        dateString = `${currDay}/${currMonth}/${currYear}`;\r\n        // String to store in store\r\n        storeString = `${currDay} ${monthTextMapping[currMonth - 1].slice(0, 3)} ${currYear}`;\r\n      }\r\n      \r\n      // Update the date in the store for the form\r\n      change(name, storeString);\r\n\r\n      let newSelectedStartDate = selectedStartDate;\r\n      let newSelectedEndDate = selectedEndDate;\r\n\r\n      // Set end and start to selected date\r\n      // Default use selectedStartDate if not range\r\n      if (isRange && !isStart) {\r\n        newSelectedEndDate = date;\r\n      } else {\r\n        newSelectedStartDate = date;\r\n        if (newSelectedEndDate < newSelectedStartDate) {\r\n          newSelectedEndDate = newSelectedStartDate;\r\n          \r\n          if (endRef && endRef.wrappedInstance) {\r\n            endRef.wrappedInstance.setSelectedDate(newSelectedStartDate);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Set the new date\r\n      this.setNewDate(date, {\r\n        isOpened: false,\r\n        selectedString: dateString,\r\n        selectedEndDate: newSelectedEndDate,\r\n        selectedStartDate: newSelectedStartDate,\r\n      }, selectedCallback);\r\n\r\n      // Close the dropdown and update the selectedString\r\n      // Since is selection, there will be no error\r\n      // this.setState({\r\n      //   isOpened: false,\r\n      //   selectedString: dateString,\r\n      //   selectedEndDate: newSelectedEndDate,\r\n      //   selectedStartDate: newSelectedStartDate,\r\n      // });\r\n\r\n      this.isFromFocus = false;\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-empty\r\n    }\r\n  }\r\n\r\n  /**\r\n   * End selection if click on outside\r\n   *\r\n   * @param {object} event\r\n   */\r\n  handleClickOutside(event) {\r\n    const { isOpened, dateInnerDOM } = this.state;\r\n    const { isTargetWithinDateRangePicker, dateInner } = this.props;\r\n\r\n    // If clicked outside of daterpicekr Inner or wrapper, go to exit\r\n    if (\r\n      isOpened &&\r\n      this.wrapperRef &&\r\n      !this.wrapperRef.contains(event.target) &&\r\n      dateInnerDOM &&\r\n      !dateInnerDOM.contains(event.target)\r\n    ) {\r\n      this.setState({\r\n        isOpened: false,\r\n      });\r\n\r\n      // If outside of any datepicker controls\r\n      if (!isTargetWithinDateRangePicker || (isTargetWithinDateRangePicker && !isTargetWithinDateRangePicker(event.target))) {\r\n        dateInner.toggleDateInner(false);\r\n      }\r\n\r\n      this.handleExit();\r\n\r\n      this.isFromFocus = false;\r\n      // this.handleExit();\r\n      this.doNotBlur = false;\r\n      return;\r\n    }\r\n\r\n    this.doNotBlur = true;\r\n  }\r\n\r\n  /**\r\n   * handleKeyPress\r\n   *\r\n   * Handle on enter key\r\n   *\r\n   * @param {object} target\r\n   */\r\n  handleKeyPress(target) {\r\n    const { dateInner } = this.props;\r\n\r\n    // If pressed on enter, go to exit\r\n    if (target.charCode === 13) {\r\n      target.preventDefault();\r\n      this.handleExit();\r\n      dateInner.toggleDateInner(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handleSelectClick\r\n   *\r\n   * Handle toggling of datepicker\r\n   */\r\n  handleSelectClick() {\r\n    const {\r\n      isOpened,\r\n      placeHolder,\r\n      currDate,\r\n      currFirstDay,\r\n      currLastDay,\r\n      selectedStartDate,\r\n      selectedEndDate,\r\n      dateRangeStart,\r\n      dateRangeEnd,\r\n    } = this.state;\r\n\r\n    const {\r\n      change,\r\n      name,\r\n      dateInner,\r\n      isRange,\r\n      isStart,\r\n      formStore,\r\n    } = this.props;\r\n\r\n    let selectedStart = selectedStartDate || (formStore && storeStringToDate(formStore.start_date));\r\n    let selectedEnd = selectedEndDate || (formStore && storeStringToDate(formStore.end_date));\r\n    selectedStart = selectedStart === -1 ? null : selectedStart;\r\n    selectedEnd = selectedEnd === -1 ? null : selectedEnd;\r\n\r\n    const selectedCallback = (extraState = {}) => {\r\n      dateInner.toggleDateInner(!isOpened, {\r\n        setNewDate: this.setNewDate,\r\n        setSelectedDate: this.setSelectedDate,\r\n        currDate,\r\n        currFirstDay,\r\n        currLastDay,\r\n        selectedStartDate: selectedStart,\r\n        selectedEndDate: selectedEnd,\r\n        dateRangeStart,\r\n        dateRangeEnd,\r\n        isRange,\r\n        isStart,\r\n        ...extraState,\r\n      });\r\n\r\n      // ]if (!this.isFromFocus) {\r\n      this.setState({\r\n        isOpened: !isOpened,\r\n      }, () => {\r\n        if (!isOpened) {\r\n          this.onMovement();\r\n        }\r\n      });\r\n\r\n      const { selectedString } = this.state;\r\n      // Open if not opened and set the input string\r\n      // back to date form\r\n      if (!isOpened) {\r\n        if (selectedString !== placeHolder) {\r\n          change(name, selectedString);\r\n        }\r\n      } else {\r\n        this.handleExit();\r\n        if (this.inputField) {\r\n          const input = this.inputField.getRenderedComponent();\r\n          if (input) {\r\n            setTimeout(() => input.blur(), 2);\r\n          }\r\n        }\r\n      }\r\n      // }\r\n\r\n      this.isFromFocus = false;\r\n    };\r\n\r\n    if (isStart && selectedStart) {\r\n      this.setSelectedDate(selectedStart, selectedCallback);\r\n    } else if (selectedEnd) {\r\n      this.setSelectedDate(selectedEnd, selectedCallback);\r\n    } else {\r\n      selectedCallback();\r\n    }\r\n\r\n    // setTimeout(() => {\r\n    //   dateInner.toggleDateInner(!isOpened, {\r\n    //     setNewDate: this.setNewDate,\r\n    //     setSelectedDate: this.setSelectedDate,\r\n    //     currDate,\r\n    //     currFirstDay,\r\n    //     currLastDay,\r\n    //     selectedStartDate: selectedStart,\r\n    //     selectedEndDate: selectedEnd,\r\n    //     dateRangeStart,\r\n    //     dateRangeEnd,\r\n    //     isRange,\r\n    //     isStart,\r\n    //   });\r\n\r\n    //   // ]if (!this.isFromFocus) {\r\n    //   this.setState({\r\n    //     isOpened: !isOpened,\r\n    //   }, () => {\r\n    //     if (!isOpened) {\r\n    //       this.onMovement();\r\n    //     }\r\n    //   });\r\n\r\n    //   const { selectedString } = this.state;\r\n    //   // Open if not opened and set the input string\r\n    //   // back to date form\r\n    //   if (!isOpened) {\r\n    //     if (selectedString !== placeHolder) {\r\n    //       change(name, selectedString);\r\n    //     }\r\n    //   } else {\r\n    //     this.handleExit();\r\n    //     if (this.inputField) {\r\n    //       const input = this.inputField.getRenderedComponent();\r\n    //       if (input) {\r\n    //         setTimeout(() => input.blur(), 2);\r\n    //       }\r\n    //     }\r\n    //   }\r\n    //   // }\r\n\r\n    //   this.isFromFocus = false;\r\n    // }, 10);\r\n  }\r\n\r\n  /**\r\n   * Handles on input changes\r\n   *\r\n   * @param {object} event\r\n   */\r\n  async handleOnInputChange(event) {\r\n    // Wait for event to finish\r\n    await event;\r\n    // Get current input value\r\n    const value = event.target.defaultValue;\r\n\r\n    // Set new list items, height of dropdown list,\r\n    // Force open list on type, and set selected string to value\r\n    this.setState({\r\n      selectedString: value,\r\n    });\r\n  }\r\n\r\n  handleBlur(event) {\r\n    const isChildren = this.wrapperRef.contains(event.relatedTarget);\r\n    if (!isChildren && !this.doNotBlur) {\r\n      // Hackish, but to make sure this comes after setNewDate\r\n      setTimeout(() => {\r\n        this.handleExit();\r\n        this.isFromFocus = false;\r\n      }, 100);\r\n    }\r\n\r\n    this.doNotBlur = false;\r\n  }\r\n\r\n  handleFocus(event) {\r\n    const isChildren = this.wrapperRef.contains(event.relatedTarget);\r\n    if (event.relatedTarget && !isChildren && !this.isClicked) {\r\n      this.handleSelectClick();\r\n      this.isFromFocus = true;\r\n    }\r\n\r\n    this.isClicked = false;\r\n  }\r\n  /**\r\n   * handleExit\r\n   *\r\n   * Handle exit selection of entered input\r\n   */\r\n  handleExit() {\r\n    const {\r\n      selectedString,\r\n      dateRangeEnd,\r\n      dateRangeStart,\r\n      selectedStartDate,\r\n    } = this.state;\r\n\r\n    const {\r\n      change,\r\n      name,\r\n      isRange,\r\n      isStart,\r\n    } = this.props;\r\n\r\n    // Check if input string is valid date\r\n    let isError = !moment(selectedString, 'DD/MM/YYYY', true).isValid();\r\n    // The date in date form\r\n    let selectedDate = null;\r\n\r\n    // Check if date is within date range\r\n    if (!isError) {\r\n      const parts = selectedString.split('/');\r\n      selectedDate = new Date(parts[2], parts[1] - 1, parts[0]);\r\n      // isError = isStart && selectedEndDate ? selectedDate > selectedEndDate : isError;\r\n      isError = !isStart && selectedStartDate ? selectedStartDate > selectedDate : isError;\r\n      isError = selectedDate < dateRangeStart || dateRangeEnd < selectedDate ? true : isError;\r\n    }\r\n\r\n    // Close the dropdown and set any errors\r\n    this.setState({\r\n      isOpened: false,\r\n    });\r\n\r\n    // Set null to selected start or end date if error\r\n    if (isError) {\r\n      if (isRange && !isStart) {\r\n        this.setState({\r\n          selectedEndDate: null,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          selectedStartDate: null,\r\n        });\r\n      }\r\n\r\n      // Null strings and store value\r\n      this.setState({\r\n        selectedString: '',\r\n      });\r\n      change(name, null);\r\n\r\n      return;\r\n    }\r\n\r\n    this.setSelectedDate(selectedDate);\r\n  }\r\n\r\n  /**\r\n   * Render component\r\n   */\r\n  render() {\r\n    const {\r\n      isOpened,\r\n      height,\r\n      placeHolder,\r\n    } = this.state;\r\n\r\n    if (height) {\r\n      const {\r\n        name,\r\n        zIndex,\r\n        maxWidth,\r\n        isRange,\r\n        isStart,\r\n        desc,\r\n        extraInfo,\r\n        errorString,\r\n        formStore,\r\n        validateForm,\r\n      } = this.props;\r\n\r\n      const mainStyle = {\r\n        height,\r\n        zIndex,\r\n        maxWidth,\r\n      };\r\n\r\n      const dropDownOpenStyle = isOpened ? 'dropdown-container-opened' : 'dropdown-container-closed';\r\n      const isErrorStyle = errorString ? 'error' : '';\r\n      const rangeIcon = isStart ? DateIn : DateOut;\r\n      const rangIconStyle = isStart ? 'date-img-in' : 'date-img-out';\r\n\r\n      const refValue = formStore ? formStore[name] : null;\r\n\r\n      return (\r\n        <FormInputWrapper\r\n          desc={desc}\r\n          ref={node => (this.formParent = node)}\r\n          extraInfo={extraInfo}\r\n          errorString={errorString}\r\n          refValue={refValue}\r\n          validateForm={validateForm}\r\n        >\r\n          <div\r\n            className=\"dropdown datepicker\"\r\n            style={mainStyle}\r\n            ref={node => (this.wrapperRef = node)}\r\n            onBlur={event => this.handleBlur(event)}\r\n            onFocus={event => this.handleFocus(event)}\r\n          >\r\n            <div\r\n              className={`dropdown-container \r\n                          ${dropDownOpenStyle} \r\n                          ${isErrorStyle}\r\n                        `}\r\n              style={{ height }}\r\n              onKeyUp={() => {}}\r\n              role=\"button\"\r\n              tabIndex={-1}\r\n            >\r\n              <div\r\n                className=\"selected-container align-items-center\"\r\n                style={{ height }}\r\n              >\r\n                {\r\n                  isRange ?\r\n                    <img\r\n                      className={`date-img ${rangIconStyle}`}\r\n                      src={rangeIcon}\r\n                      alt=\"Date Range Icon\"\r\n                    />\r\n                  :\r\n                    null\r\n                }\r\n                <div className=\"selected-text text-style\">\r\n                  <Field\r\n                    name={name}\r\n                    ref={node => this.inputField = node}\r\n                    withRef\r\n                    component=\"input\"\r\n                    type=\"text\"\r\n                    placeholder={placeHolder}\r\n                    autoComplete=\"off\"\r\n                    onChange={event => this.handleOnInputChange(event)}\r\n                    onKeyPress={this.handleKeyPress}\r\n                    onMouseDown={(e) => {\r\n                      if (window.innerWidth <= 576) {\r\n                        e.preventDefault();\r\n                      }\r\n                      this.isClicked = true;\r\n                      this.handleSelectClick();\r\n                    }}\r\n                    tabIndex={0}\r\n                  />\r\n                </div>\r\n                {\r\n                  isRange ?\r\n                    null\r\n                  :\r\n                    <div\r\n                      role=\"button\"\r\n                      className=\"selected-arrow\"\r\n                      onMouseDown={() => { this.isClicked = true; this.handleSelectClick(); }}\r\n                      tabIndex={-1}\r\n                    >\r\n                      <img\r\n                        src={Arrow}\r\n                        alt=\"arrow.svg\"\r\n                        className={`selected-arrow-style ${isOpened ? 'angle-up' : 'angle-down'}`}\r\n                      />\r\n                    </div>\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </FormInputWrapper>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nDatePickerV2.defaultProps = {\r\n  maxWidth: '100%',\r\n  isStart: true,\r\n  isRange: false,\r\n  startDate: null,\r\n  endDate: null,\r\n  currDate: null,\r\n  placeholderString: placeholderStringDefault,\r\n  desc: null,\r\n  extraInfo: null,\r\n  errorString: null,\r\n  formStore: null,\r\n  validateForm: null,\r\n  isTargetWithinDateRangePicker: null,\r\n  endRef: null,\r\n};\r\n\r\nDatePickerV2.propTypes = {\r\n  formStore: PropTypes.object,\r\n  maxWidth: PropTypes.string,\r\n  size: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  zIndex: PropTypes.number.isRequired,\r\n  change: PropTypes.func.isRequired,\r\n  isStart: PropTypes.bool,\r\n  isRange: PropTypes.bool,\r\n  startDate: PropTypes.instanceOf(Date),\r\n  endDate: PropTypes.instanceOf(Date),\r\n  currDate: PropTypes.instanceOf(Date),\r\n  placeholderString: PropTypes.string,\r\n  desc: PropTypes.string,\r\n  extraInfo: PropTypes.object,\r\n  errorString: PropTypes.string,\r\n  validateForm: PropTypes.func,\r\n  dateInner: PropTypes.object.isRequired,\r\n  isTargetWithinDateRangePicker: PropTypes.func,\r\n  endRef: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  formStore: (getFormValues(ownProps.form)(state)),\r\n  dateInner: state.datepicker.datePickerInner,\r\n});\r\n\r\nexport default connect(mapStateToProps, null, null, { withRef: true })(DatePickerV2);\r\n","module.exports = __webpack_public_path__ + \"static/media/CashbackLogo.8368adf4.svg\";","module.exports = __webpack_public_path__ + \"static/media/dateIn.1b60a0c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/dateOut.98be354a.svg\";","/**\r\n * CashbackBalance.js\r\n * Component that displays the user's cashback balance\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CashbackLogo from 'assets/images/common/CashbackLogo.svg';\r\n\r\nimport './CashbackBalance.scss';\r\n\r\n/**\r\n * Custom Form Dropdown class\r\n */\r\nclass CashbackBalance extends Component {\r\n  render() {\r\n    const { cashbackBalance } = this.props;\r\n\r\n    return (\r\n      <div className=\"cashback-summary\">\r\n        <img src={CashbackLogo} alt=\"CashbackLogo.svg\" />\r\n        <p>${cashbackBalance}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCashbackBalance.defaultProps = {\r\n};\r\n\r\nCashbackBalance.propTypes = {\r\n  cashbackBalance: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CashbackBalance;\r\n"],"sourceRoot":""}