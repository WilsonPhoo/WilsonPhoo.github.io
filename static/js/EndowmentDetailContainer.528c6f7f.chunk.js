(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1073:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(28),o=n(29),l=n(31),i=n(30),c=n(32),s=n(1),u=n.n(s),m=n(52),d=n(184),p=n(193),h=n(196),f=n(26),b=n(7),g=n.n(b),v=n(221),E=n(84),O=n(377),y=n(261),S=n(218),j=n(246),k=n(262),w=n(12),F=n(70),C=n(69),D=n(67),P=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={sessionId:null,errorStringData:{},errorArray:[]},n.handleSubmit=n.handleSubmit.bind(Object(f.a)(Object(f.a)(n))),n.validateForm=n.validateForm.bind(Object(f.a)(Object(f.a)(n))),n}return Object(c.a)(t,e),Object(o.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.sessionId;return n!==t.sessionId?{sessionId:n}:null}}]),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state.sessionId,n=this.props.loadingEnd;t&&(n(),setTimeout(function(){e.checkoutComplete.openCheckoutComplete(),Object(D.a)("EndConfirmationS")},300))}},{key:"validateForm",value:function(e){var t=Object(F.b)(e,["email","name","birth_date","mobile_number"]);this.setState({errorStringData:t});var n=[];return g.a.isEmpty(t)||(n=[u.a.createElement("p",{className:"error-string",key:"error-1"},"Fields are not properly filled, please check again.")]),this.setState({errorArray:n}),t}},{key:"handleSubmit",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.props,r=a.checkOutOthers,o=a.loading,l=a.storeForm,i=this.validateForm(n?e:l),c=g.a.isEmpty(i);Object(F.a)(c,n,i,function(e){return t.setState({errorStringData:e,errorArray:null})},function(){return t.handleSubmit(l,!1)})||(c&&(Object(D.a)("EndConfirm1A"),Object(D.a)("EndNoticeS"),this.popup.openPopupWithJSX(Object(w.z)(),!0,function(){setTimeout(function(){o(),r(e),Object(D.b)("PPS2 - ButtonClick - Endowment - DetailForm_Checkout",{Product:"Endowment",Click_Text:"Checkout"}),Object(D.c)("Endowment - DetailForm - Checkout",{event_category:"Endowment",event_label:"Endowment - DetailForm - Checkout"}),Object(D.a)("EndConfirm2A")},350)})),window.scrollTo(0,document.body.scrollHeight))}},{key:"render",value:function(){var e=this,t=this.state,n=t.errorStringData,a=t.errorArray,r=this.props,o=r.form,l=r.change,i=r.planDetails,c=r.isLoggedIn,m=r.piggyCallback,d=r.changePlan,p=r.storeForm;return u.a.createElement(s.Fragment,null,u.a.createElement(O.a,{category:"endowment",changePlan:d,handleSubmit:this.props.handleSubmit,onSubmit:this.handleSubmit,change:l,form:o,planDetails:i,isLoggedIn:c,piggyCallback:m,errorArray:a,checkoutButtonDesc:"Confirm"},u.a.createElement(E.y,{className:"main-form",noGutters:!0},u.a.createElement(E.f,{xs:12},u.a.createElement(y.a,{form:o,change:l,name:"email",placeholderString:"",size:"medium",zIndex:99,desc:"Email Address",errorString:n.email,validateForm:function(){return e.validateForm(p)}})),u.a.createElement(E.f,{className:"right-padding",xs:12,sm:6},u.a.createElement(y.a,{form:o,change:l,name:"name",placeholderString:"",size:"medium",zIndex:98,desc:"Full Name",errorString:n.name,validateForm:function(){return e.validateForm(p)}})),u.a.createElement(E.f,{className:"left-padding",xs:12,sm:6},u.a.createElement(S.a,{form:o,change:l,name:"birth_date",size:"medium",zIndex:97,desc:"Date of Birth",errorString:n.birth_date,validateForm:function(){return e.validateForm(p)},endDate:new Date})),u.a.createElement(E.f,{className:"right-padding",xs:12,sm:6},u.a.createElement(y.a,{form:o,change:l,name:"mobile_number",placeholderString:"",size:"medium",zIndex:96,desc:"Mobile Number",errorString:n.mobile_number,validateForm:function(){return e.validateForm(p)}})))),u.a.createElement(k.a,{ref:function(t){return e.popup=t},showCancelButton:!0}),u.a.createElement(j.a,{isQuoteOnly:!0,isSellLeads:!0,wrappedComponentRef:function(t){return e.checkoutComplete=t}}))}}]),t}(s.Component);P.defaultProps={storeForm:null};var x=Object(v.a)({form:"endowment-detail",destroyOnUnmount:!1})(Object(m.b)(function(e){return{storeForm:Object(p.a)("endowment-detail")(e),constants:e.insurance.constants}},function(e){return{loading:function(t,n,a){e(Object(C.d)(t,n,a))},loadingEnd:function(){e(Object(C.c)())}}})(P)),N=n(41),T=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setFormState)(w.b.DETAILFORM.index),Object(D.b)("PPS2 - Pageview - Endowment - DetailForm",{Product:"Endowment"}),Object(D.d)({page_title:"Endowment - Detail Form",page_path:"/endowment/detailform"}),Object(D.a)("EndDetailsS")}},{key:"render",value:function(){var e=this.props,t=e.plansData,n=e.isLoggedIn,a=e.profileValues,r=e.piggyCallback,o=e.endowmentFields,l=e.sessionId,i=e.checkOutOthers,c=e.history;if(!t)return null;var s=t,m={logo:h.a.others,logoDesc:"",planName:"",planTotal:null};try{var d=s.policyInfo[s.planType].net_price;d=d?"$".concat(d.toFixed(2)):"",m={logo:h.a[s.info.insurer_slug],logoDesc:"".concat(s.info.insurer_name,".svg"),planName:s.info.product_name,planTotal:d}}catch(p){console.log("Get plan details failed")}return u.a.createElement(x,{endowmentFields:o,selectedData:s,planDetails:m,isLoggedIn:n,sessionId:l,piggyCallback:r,checkOutOthers:i,changePlan:function(){c.goBack(),Object(D.b)("PPS2 - ButtonClick - Endowment - DetailForm_ChangePlan",{Product:"Endowment",Click_Text:"ChangePlan"}),Object(D.c)("Endowment - DetailForm - ChangePlan",{event_category:"Endowment",event_label:"Endowment - DetailForm - ChangePlan"})},profileValues:a})}}]),t}(s.Component);T.defaultProps={sessionId:null,plansData:null};t.default=Object(d.a)(Object(m.b)(function(e){return{endowmentForm:Object(p.a)("endowment")(e),endowmentFields:e.endowment.endowmentFields,profileValues:e.userDetails,plansData:e.endowment.selectedPlanData,sessionId:e.insurance.sessionId}},function(e){return{getAnonymousSession:function(t){e(Object(w.s)(t,!0))},setFormState:function(t){e(Object(w.H)(t))}}},function(e,t,n){return Object(a.a)({},n,e,t,{checkOutOthers:function(n){t.getAnonymousSession(Object(N.j)(e.endowmentForm,n,e.plansData),!0)}})})(T))},189:function(e,t,n){e.exports=n.p+"static/media/arrow.bf1f0d90.svg"},190:function(e,t,n){"use strict";var a=n(28),r=n(31),o=n(30),l=n(29),i=n(32),c=n(26),s=n(1),u=n.n(s),m=(n(259),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={errorString:null},n.setErrorString=n.setErrorString.bind(Object(c.a)(Object(c.a)(n))),n.clearErrorString=n.clearErrorString.bind(Object(c.a)(Object(c.a)(n))),n}return Object(i.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.errorString!==e.errorString?{errorString:e.errorString,refValue:e.refValue}:e.validateForm&&t.errorString&&t.refValue!==e.refValue?(e.validateForm(),{errorString:null}):null}}]),Object(l.a)(t,[{key:"setErrorString",value:function(e){this.setState({errorString:e})}},{key:"clearErrorString",value:function(){this.setState({errorString:null})}},{key:"render",value:function(){var e=this.state.errorString,t=this.props,n=t.desc,a=t.extraInfo;return u.a.createElement("div",{className:"input-wrapper-main input-wrapper-error"},null!==n?u.a.createElement("p",{className:"input-wrapper-desc"},n):null,this.props.children,null!==a?u.a.createElement("div",{className:"extra-info-container"},a):null,null!==e?u.a.createElement("p",{className:"input-wrapper-error-text"},e):null)}}]),t}(s.Component));m.defaultProps={desc:null,extraInfo:null},t.a=m},199:function(e,t,n){e.exports=n.p+"static/media/magnifyGlass.eedb8132.svg"},217:function(e,t,n){},246:function(e,t,n){"use strict";var a=n(28),r=n(29),o=n(31),l=n(30),i=n(32),c=n(26),s=n(1),u=n.n(s),m=n(184),d=n(250),p=n.n(d),h=n(187),f=n(86),b=(n(217),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={animateStyle:""},n.openCheckoutComplete=n.openCheckoutComplete.bind(Object(c.a)(Object(c.a)(n))),n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"openCheckoutComplete",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({animateStyle:"bounce-in",userName:t}),setTimeout(function(){e.popupRef.openPopup()},10)}},{key:"renderUpperText",value:function(){var e=this.state.userName,t=this.props,n=t.isQuoteOnly,a=t.upperText;return n?u.a.createElement("p",null,a||"Success"):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"Thank you for your"),u.a.createElement("p",null,u.a.createElement("span",null,"purchase, "),u.a.createElement("span",{className:"focus-text"},e)))}},{key:"renderMidText",value:function(){var e=this.props,t=e.isQuoteOnly,n=e.midText;return t?null!==n?u.a.createElement(s.Fragment,null,u.a.createElement("p",null,n)):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"Thanks for submitting your request."),u.a.createElement("p",null,"The insurer\u2019s representative will contact you within 2 business days to share with you more about the selected product.")):u.a.createElement(s.Fragment,null,u.a.createElement("p",null,"A copy of the receipt has been sent to"),u.a.createElement("p",null,"your inbox."),u.a.createElement("p",null,"The policy will be reflected in PolicyPal's APP once approved."))}},{key:"renderButton",value:function(){var e=this,t=this.props,n=t.history,a=t.isQuoteOnly,r=t.buttonText,o=t.callback;return a?u.a.createElement(h.a,{className:"checkout-button",variant:"medium-flat-green",width:166,height:72,onClick:function(){if(o)return o(),void e.popupRef.togglePopup(!1);n.push("/")}},u.a.createElement("p",null,r||"OK")):u.a.createElement(s.Fragment,null,u.a.createElement(h.a,{className:"checkout-button",variant:"medium-flat",width:166,height:72,onClick:function(){return n.push("/gotoappstore")}},u.a.createElement("p",null,"Download APP")),u.a.createElement(h.a,{className:"checkout-button",variant:"medium-flat-green",width:166,height:72,onClick:function(){return e.popupRef.closePopup()}},u.a.createElement("p",null,"Details")))}},{key:"render",value:function(){var e=this,t=this.state.animateStyle,n=this.props,a=n.isSellLeads,r=n.className,o=a?"In the event that you purchase a plan through our partner, PolicyPal receives a referral fee.":"";return u.a.createElement(f.a,{className:r,hideCloseButton:!0,ref:function(t){e.popupRef=t}},u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"check-out-popup"},u.a.createElement("img",{className:t,src:p.a,alt:"CheckoutComplete.svg"}),u.a.createElement("div",{className:"upper-container upper-margin-up"},this.renderUpperText()),u.a.createElement("div",{className:"mid-container"},this.renderMidText()),u.a.createElement("div",{className:"button-container"},this.renderButton()),u.a.createElement("div",{className:"extra-text"},u.a.createElement("p",null,o)))))}}]),t}(s.Component));b.defaultProps={isQuoteOnly:!1,isSellLeads:!1,upperText:null,midText:null,buttonText:null,callback:null,className:""},t.a=Object(m.a)(b,{withRef:!0})},249:function(e,t,n){},250:function(e,t,n){e.exports=n.p+"static/media/CheckoutComplete.7a48570a.svg"},259:function(e,t,n){}}]);
//# sourceMappingURL=EndowmentDetailContainer.528c6f7f.chunk.js.map