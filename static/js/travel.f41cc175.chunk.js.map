{"version":3,"sources":["containers/Travel/TravelRouteContainer.js","components/Page/Page.js","assets/logo.png","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/Templates/ModalPopup/ModalPopup.js","components/Templates/PopupWithText/PopupWithText.js","components/Templates/RefreshTimer/RefreshTimer.js","components/Templates/LoadingScreenV2/LogoSlider.js","components/Templates/LoadingScreenV2/LoadingScreenV2.js","components/Templates/APILoader/APILoader.js"],"names":["StepProgressBar","Loadable","loader","Promise","all","__webpack_require__","e","then","bind","loading","modules","TravelMainContainer","TravelChoosePlanContainer","TravelDetailContainer","TravelCheckoutContainer","TravelRouteContainer","props","_this","Object","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","this","_this$props","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","match","isXploraJapan","history","params","insurer","product","newValues","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__","defaultValues","countries","type","value","display_name","region","state","formIndex","selectedArray","selectionButtonIndex","planType","bypassParams","values","errors","detailValues","detailErrors","plansData","selectedPlanData","charged","apiLoader","isInitialLoad","renderStepProgress","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_10__","renderTravelForms","setCharged","setSelectedArray","setSelectionButtonIndex","setPlanType","setPlansData","setSelectedPlanData","changeUserDetails","handleProductPage","onChangeValue","onChangeDetailValue","onUpdateValues","validateForm","validateDetailsForm","nextProps","prevState","isMounted","formState","routeResult","routeHandler","_this$props2","setFormState","travelPromoGiveAway","doGetPromoGiveaways","setState","APILoader","FORMSTATES","CHOOSEPLAN","index","push","concat","path","undefined","window","scrollTo","prevProps","userDetails","_","isEqual","name","fields","error","newError","validateFormValue","resolve","_this2","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","detailName","_this3","_this4","array","_this5","newPlansData","insurances_all","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","insurances","insurances_prex","each","plansArray","plan","info","insurer_slug","product_slug","insurer_product_slug","callback","specialFields","newErrors","_this6","isEmpty","formName","_this7","_this$state5","adult_0","email","given_name","firstName","family_name","surname","id_type","nric","nationality","birth_date","moment","dateOfBirth","toDate","gender","marital_status","race","occupation","mobile_number","contact","address","unit_no","postal","postal_code","insurerSlug","productSlug","_this$state6","react__WEBPACK_IMPORTED_MODULE_13___default","a","createElement","inputList","form","stateList","DETAILFORM","CHECKOUT","stateDescriptions","main","_this$state7","mainFields","isLoggedIn","assign","handleAPI","piggyCallback","SUBMITTED","_this8","_this$state8","constants","checkoutStyle","isProduction","components_Page_Page__WEBPACK_IMPORTED_MODULE_18__","id","className","react__WEBPACK_IMPORTED_MODULE_13__","_components_Templates_RefreshTimer_RefreshTimer__WEBPACK_IMPORTED_MODULE_20__","ref","node","refresher","invokeNewTimer","components_Templates_APILoader_APILoader__WEBPACK_IMPORTED_MODULE_25__","Component","defaultProps","withRouter","connect","insurance","promoGiveaways","travel","data","login","dispatch","setInsuranceFormState","getPromoGiveaways","SITE_URL","defaultImage","logo","Page","pathname","title","_ref","description","image","contentType","twitter","noCrawl","published","updated","category","tags","theTitle","substring","theDescription","theImage","metaTags","itemprop","content","property","children","rest","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_6___default","react_helmet__WEBPACK_IMPORTED_MODULE_8___default","htmlAttributes","lang","itemscope","itemtype","schema","link","rel","href","location","meta","getMetaTags","module","exports","p","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","keys","length","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","d","__webpack_exports__","ModalPopup","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","showModal","setHiddenAuto","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","clearInterval","setHiddenInterval","setInterval","includes","document","body","style","overflow","closeModal","header","footer","backdropClassName","zIndex","react__WEBPACK_IMPORTED_MODULE_8___default","reactstrap__WEBPACK_IMPORTED_MODULE_9__","isOpen","size","tag","toggle","PopupWithText","onConfirm","text","jsx","useConfirm","openPopupWithText","arguments","setTimeout","popupRef","openPopup","_this$state","showCancelButton","hideCloseButton","_Popup_Popup__WEBPACK_IMPORTED_MODULE_8__","r","react__WEBPACK_IMPORTED_MODULE_6__","components_FormsV3_Button_Button__WEBPACK_IMPORTED_MODULE_7__","variant","width","height","onClick","closePopup","RefreshTimer","oldTime","Date","timeout","setTimer","interval","addEventListener","clearTimeout","removeEventListener","popupTimer","refreshTimer","confirmResult","confirm","timeDiff","react__WEBPACK_IMPORTED_MODULE_7___default","react__WEBPACK_IMPORTED_MODULE_7__","_PopupWithText_PopupWithText__WEBPACK_IMPORTED_MODULE_8__","popup","LogoSlider","classCallCheck","possibleConstructorReturn","getPrototypeOf","logos","map","Logos","small","keyFrameLogo","keyframes","_templateObject","AnimatedContainer","styled","div","_templateObject2","renderLogos","assertThisInitialized","react_default","src","alt","LoadingScreenV2","overwriteShowWarning","closeLoading","handleChange","isLoading","timer","showLoadingError","showLoading","errorCallback","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","isLoadingError","message","noLogos","loadingStyle","react","SpinnerAnimation","LoadingScreenV2_LogoSlider","Button","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","errorMsg","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","show","apiCallback","overwriteWarning","showLoadigInterval","result","showError","console","log","_context3","t0","react__WEBPACK_IMPORTED_MODULE_8__","components_Templates_LoadingScreenV2_LoadingScreenV2__WEBPACK_IMPORTED_MODULE_9__"],"mappings":"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","file":"static/js/travel.f41cc175.chunk.js","sourcesContent":["/**\r\n * TravelRouteContainer.js\r\n * The wrapper container for travel\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport Page from 'components/Page/Page';\r\nimport PropTypes from 'prop-types';\r\nimport Loadable from 'react-loadable';\r\n\r\n// import StepProgressBar from '../../components/Templates/StepProgressBar/StepProgressBarNew';\r\nimport RefreshTimer from '../../components/Templates/RefreshTimer/RefreshTimer';\r\n\r\n// import TravelMainContainer from './TravelMainContainer';\r\n// import TravelChoosePlanContainer from './TravelChoosePlanContainer';\r\n// import TravelDetailContainer from './TravelDetailContainer';\r\n// import TravelCheckoutContainer from './TravelCheckoutContainer';\r\nimport { getPromoGiveaways, setInsuranceFormState, FORMSTATES } from 'actions/insuranceActions';\r\nimport { isProduction } from 'lib/tagFunctions';\r\nimport { routeHandler } from 'lib/helperFunctions';\r\nimport { validateForm, validateFormValue } from 'lib/validatorsV2';\r\n\r\nimport APILoader from 'components/Templates/APILoader/APILoader';\r\n// import TravelMainContainer from './TravelMainContainer';\r\n// import TravelChoosePlanContainer from './TravelChoosePlanContainer';\r\n// import TravelDetailContainer from './TravelDetailContainer';\r\n// import TravelCheckoutContainer from './TravelCheckoutContainer';\r\n\r\n// Default values\r\nimport { defaultValues } from './Travel.constants';\r\n\r\nconst StepProgressBar = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"StepProgressBarNew\" */ '../../components/Templates/StepProgressBar/StepProgressBarNew'),\r\n  loading: () => null,\r\n  modules: ['StepProgressBarNew']\r\n});\r\n\r\nconst TravelMainContainer = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"TravelMainContainer\" */ './TravelMainContainer'),\r\n  loading: () => null,\r\n  modules: ['TravelMainContainer']\r\n});\r\n\r\nconst TravelChoosePlanContainer = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"TravelChoosePlanContainer\" */ './TravelChoosePlanContainer'),\r\n  loading: () => null,\r\n  modules: ['TravelChoosePlanContainer']\r\n});\r\n\r\nconst TravelDetailContainer = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"TravelDetailContainer\" */ './TravelDetailContainer'),\r\n  loading: () => null,\r\n  modules: ['TravelDetailContainer']\r\n});\r\n\r\nconst TravelCheckoutContainer = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"TravelCheckoutContainer\" */ './TravelCheckoutContainer'),\r\n  loading: () => null,\r\n  modules: ['TravelCheckoutContainer']\r\n});\r\n\r\nclass TravelRouteContainer extends Component {\r\n  // Route handler\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { formIndex, isMounted } = prevState;\r\n    const { formState, match, history } = nextProps;\r\n\r\n    if (isMounted) {\r\n      const routeResult = routeHandler('travel', formState, formIndex, match, history);\r\n      if (routeResult && routeResult.formIndex !== null) {\r\n        return ({\r\n          formIndex: routeResult.formIndex,\r\n        });\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      match,\r\n      history,\r\n    } = this.props;\r\n\r\n    // Check if first load is product page\r\n    const isProductPage = match && match.params && match.params.insurer && match.params.product;\r\n    // Check if first load if from TM Japan\r\n    const isXploraJapan = isProductPage && match.params.insurer === 'tokio_marine' && match.params.product === 'xplora_japan';\r\n\r\n    // Set default values\r\n    const newValues = { ...defaultValues };\r\n    if (isXploraJapan) {\r\n      newValues.countries = { type: 'multi_select', value: [{ display_name: 'Japan', value: 'Japan' }] };\r\n      newValues.region = { type: 'select', value: { display_name: 'Asia', value: 'Asia' } };\r\n    }\r\n\r\n    this.state = {\r\n      formIndex: 0,\r\n      selectedArray: [null, null, null],\r\n      selectionButtonIndex: 0,\r\n      planType: 'essential',\r\n      bypassParams: { ...match.params },\r\n      values: newValues,\r\n      errors: {},\r\n      detailValues: {},\r\n      detailErrors: {},\r\n      plansData: null,\r\n      selectedPlanData: null,\r\n      charged: false,\r\n      apiLoader: null,\r\n      isInitialLoad: true,\r\n    };\r\n\r\n    // Reset route\r\n    // history.replace(`/travel${history.location.search}`);\r\n\r\n    this.renderStepProgress = this.renderStepProgress.bind(this);\r\n    this.renderTravelForms = this.renderTravelForms.bind(this);\r\n\r\n    this.setCharged = this.setCharged.bind(this);\r\n    this.setSelectedArray = this.setSelectedArray.bind(this);\r\n    this.setSelectionButtonIndex = this.setSelectionButtonIndex.bind(this);\r\n    this.setPlanType = this.setPlanType.bind(this);\r\n    this.setPlansData = this.setPlansData.bind(this);\r\n    this.setSelectedPlanData = this.setSelectedPlanData.bind(this);\r\n\r\n    this.changeUserDetails = this.changeUserDetails.bind(this);\r\n    this.handleProductPage = this.handleProductPage.bind(this);\r\n\r\n    this.onChangeValue = this.onChangeValue.bind(this);\r\n    this.onChangeDetailValue = this.onChangeDetailValue.bind(this);\r\n    this.onUpdateValues = this.onUpdateValues.bind(this);\r\n    this.validateForm = this.validateForm.bind(this);\r\n    this.validateDetailsForm = this.validateDetailsForm.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { bypassParams } = this.state;\r\n    const {\r\n      history,\r\n      setFormState,\r\n      travelPromoGiveAway,\r\n      doGetPromoGiveaways,\r\n    } = this.props;\r\n\r\n    // Prefill login details\r\n    this.changeUserDetails();\r\n    // Set to mounted\r\n    this.setState({\r\n      isMounted: true,\r\n      apiLoader: this.APILoader,\r\n    });\r\n\r\n    // If is product page, straight away go to choose plan\r\n    const isProductPage = bypassParams && bypassParams.insurer && bypassParams.product;\r\n    if (isProductPage) {\r\n      setFormState(FORMSTATES.CHOOSEPLAN.index);\r\n      history.push(`/travel${FORMSTATES.CHOOSEPLAN.path}/${bypassParams.insurer}/${bypassParams.product}`);\r\n    }\r\n\r\n    // Get promo giveaway\r\n    if (travelPromoGiveAway === undefined && this.APILoader) {\r\n      doGetPromoGiveaways();\r\n    }\r\n\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { isInitialLoad } = this.state;\r\n    const { userDetails } = this.props;\r\n\r\n    if (isInitialLoad && _.isEqual(userDetails, prevProps.userDetails)) {\r\n      this.changeUserDetails();\r\n    }\r\n  }\r\n\r\n  // Update form values on change\r\n  async onChangeValue(type, name, value, fields) {\r\n    const {\r\n      values,\r\n      errors,\r\n    } = this.state;\r\n\r\n    try {\r\n      const error = errors && errors[name];\r\n      let newError = {};\r\n\r\n      if (error) {\r\n        newError = { [name]: await validateFormValue(name, { type, value }, values, fields) };\r\n      }\r\n\r\n      return new Promise((resolve) => {\r\n        this.setState({\r\n          values: {\r\n            ...values,\r\n            [name]: { type, value },\r\n          },\r\n          errors: { ...errors, ...newError },\r\n        }, resolve);\r\n      });\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  async onChangeDetailValue(type, name, value, detailName, fields) {\r\n    const {\r\n      detailValues,\r\n      detailErrors,\r\n    } = this.state;\r\n\r\n    try {\r\n      const error = detailErrors && detailErrors[detailName] && detailErrors[detailName][name];\r\n      let newError = {};\r\n\r\n      if (error) {\r\n        newError = { [name]: await validateFormValue(name, { type, value }, detailValues[detailName], fields) };\r\n      }\r\n\r\n      return new Promise((resolve) => {\r\n        this.setState({\r\n          detailValues: {\r\n            ...detailValues,\r\n            [detailName]: {\r\n              ...detailValues[detailName],\r\n              [name]: { type, value },\r\n            },\r\n          },\r\n          detailErrors: {\r\n            ...detailErrors,\r\n            [detailName]: {\r\n              ...detailErrors[detailName],\r\n              ...newError,\r\n            },\r\n          },\r\n        }, resolve);\r\n      });\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  async onUpdateValues(values) {\r\n    await new Promise((resolve) => {\r\n      this.setState({\r\n        values,\r\n      }, resolve);\r\n    });\r\n  }\r\n\r\n  setSelectedPlanData(selectedPlanData) {\r\n    this.setState({ selectedPlanData });\r\n  }\r\n\r\n  setSelectedArray(array) {\r\n    this.setState({ selectedArray: array });\r\n  }\r\n\r\n  setSelectionButtonIndex(index) {\r\n    this.setState({ selectionButtonIndex: index });\r\n  }\r\n\r\n  setPlanType(planType) {\r\n    this.setState({ planType });\r\n  }\r\n\r\n  async setCharged(charged) {\r\n    await new Promise(resolve => this.setState({ charged }, resolve));\r\n  }\r\n\r\n  setPlansData(plansData) {\r\n    if (!plansData) {\r\n      this.setState({\r\n        plansData: null,\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    const newPlansData = { ...plansData };\r\n\r\n    try {\r\n      newPlansData.insurances_all = [...plansData.insurances, ...(plansData.insurances_prex || {})];\r\n\r\n      _.each(newPlansData, (plansArray) => {\r\n        _.each(plansArray, (plan) => {\r\n          if (plan && plan.info && plan.info.insurer_slug && plan.info.product_slug) {\r\n            // eslint-disable-next-line\r\n            plan.info.insurer_product_slug = `${plan.info.insurer_slug}_${plan.info.product_slug}`;\r\n          }\r\n        });\r\n      });\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    this.setState({\r\n      plansData: newPlansData,\r\n    });\r\n  }\r\n\r\n  async validateForm(callback = null, fields = null, specialFields = null) {\r\n    const {\r\n      values,\r\n      errors,\r\n    } = this.state;\r\n\r\n    let newErrors = { ...errors };\r\n    try {\r\n      newErrors = await validateForm(values, null, fields, specialFields);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.setState({\r\n        errors: newErrors,\r\n      }, () => {\r\n        if (_.isEmpty(newErrors)) {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n          resolve(true);\r\n        }\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  async validateDetailsForm(formName, callback = null, fields = null, specialFields = null) {\r\n    const {\r\n      detailValues,\r\n      detailErrors,\r\n    } = this.state;\r\n\r\n    let newErrors = { ...detailErrors[formName] };\r\n    try {\r\n      newErrors = await validateForm(detailValues[formName], null, fields, specialFields);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.setState({\r\n        detailErrors: {\r\n          ...detailErrors,\r\n          [formName]: newErrors,\r\n        },\r\n      }, () => {\r\n        if (_.isEmpty(newErrors)) {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n          resolve(true);\r\n        }\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  changeUserDetails() {\r\n    const { detailValues, isInitialLoad } = this.state;\r\n    const { userDetails } = this.props;\r\n\r\n    if (userDetails) {\r\n      this.setState({\r\n        detailValues: {\r\n          ...detailValues,\r\n          adult_0: {\r\n            email: { type: 'email', value: userDetails.email },\r\n            given_name: { type: 'text', value: userDetails.firstName },\r\n            family_name: { type: 'text', value: userDetails.surname },\r\n            id_type: { type: 'select', value: { display_name: userDetails.id_type, value: userDetails.id_type } },\r\n            nric: { type: 'text', value: userDetails.nric },\r\n            nationality: { type: 'select', value: { display_name: userDetails.nationality, value: userDetails.nationality } },\r\n            birth_date: { type: 'date', value: moment(userDetails.dateOfBirth).toDate() },\r\n            gender: { type: 'select', value: { display_name: userDetails.gender, value: userDetails.gender } },\r\n            marital_status: { type: 'select', value: { display_name: userDetails.marital_status, value: userDetails.marital_status } },\r\n            race: { type: 'select', value: { display_name: userDetails.race, value: userDetails.race } },\r\n            occupation: { type: 'select', value: { display_name: userDetails.occupation, value: userDetails.occupation } },\r\n            mobile_number: { type: 'number', value: userDetails.contact },\r\n            address: { type: 'text', value: userDetails.address },\r\n            unit_no: { type: 'text', value: userDetails.unit_no },\r\n            postal: { type: 'text', value: userDetails.postal_code },\r\n          },\r\n        },\r\n        isInitialLoad: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleProductPage(insurerSlug, productSlug) {\r\n    const { history } = this.props;\r\n\r\n    if (insurerSlug && productSlug) {\r\n      history.push(`/travel${FORMSTATES.CHOOSEPLAN.path}/${insurerSlug}/${productSlug}`);\r\n    }\r\n  }\r\n\r\n  renderStepProgress() {\r\n    const { formIndex, charged } = this.state;\r\n\r\n    return (\r\n      <StepProgressBar\r\n        formState={formIndex}\r\n        inputList={[\r\n          'Choose Plan',\r\n          'Details',\r\n          'Checkout',\r\n        ]}\r\n        form=\"travel\"\r\n        stateList={[\r\n          FORMSTATES.CHOOSEPLAN,\r\n          FORMSTATES.DETAILFORM,\r\n          FORMSTATES.CHECKOUT,\r\n        ]}\r\n        stateDescriptions={[\r\n          { main: '' /* 'Choose your Plan', sub: 'Compare price plans from multiple companies' */ },\r\n          { main: 'Details' },\r\n          { main: 'Checkout -  Please check your details' },\r\n        ]}\r\n        charged={charged}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderTravelForms() {\r\n    const {\r\n      formIndex,\r\n      selectedArray,\r\n      selectionButtonIndex,\r\n      planType,\r\n      values,\r\n      errors,\r\n      detailValues,\r\n      detailErrors,\r\n      mainFields,\r\n      plansData,\r\n      selectedPlanData,\r\n      charged,\r\n      apiLoader,\r\n    } = this.state;\r\n\r\n    const { userDetails } = this.props;\r\n    const isLoggedIn = !_.isEmpty(userDetails);\r\n\r\n    const props = {\r\n      values,\r\n      errors,\r\n    };\r\n\r\n    switch (formIndex) {\r\n      case FORMSTATES.CHOOSEPLAN.index:\r\n        return (\r\n          <TravelChoosePlanContainer\r\n            {...props}\r\n            isLoggedIn={isLoggedIn}\r\n            setSelectedArray={this.setSelectedArray}\r\n            setSelectionButtonIndex={this.setSelectionButtonIndex}\r\n            selectedArray={selectedArray}\r\n            selectionButtonIndex={selectionButtonIndex}\r\n            planType={planType}\r\n            setPlanType={this.setPlanType}\r\n            handleProductPage={this.handleProductPage}\r\n            setSelectedPlanData={this.setSelectedPlanData}\r\n            onChangeValue={this.onChangeValue}\r\n            onUpdateValues={this.onUpdateValues}\r\n            mainFields={mainFields}\r\n            plansData={plansData}\r\n            selectedPlanData={selectedPlanData}\r\n            setPlansData={this.setPlansData}\r\n            handleAPI={apiLoader ? apiLoader.handleAPI : () => {}}\r\n            validateForm={this.validateForm}\r\n          />\r\n        );\r\n      case FORMSTATES.DETAILFORM.index:\r\n        return (\r\n          <TravelDetailContainer\r\n            isLoggedIn={isLoggedIn}\r\n            planType={planType}\r\n            piggyCallback={this.changeUserDetails}\r\n            values={values}\r\n            errors={errors}\r\n            onChangeValue={this.onChangeValue}\r\n            detailValues={detailValues}\r\n            detailErrors={detailErrors}\r\n            onChangeDetailValue={this.onChangeDetailValue}\r\n            plansData={plansData}\r\n            selectedPlanData={selectedPlanData}\r\n            handleAPI={apiLoader ? apiLoader.handleAPI : () => {}}\r\n            validateForm={this.validateDetailsForm}\r\n          />\r\n        );\r\n      case FORMSTATES.CHECKOUT.index:\r\n      case FORMSTATES.SUBMITTED.index:\r\n        return (\r\n          <TravelCheckoutContainer\r\n            values={values}\r\n            detailValues={detailValues}\r\n            planType={planType}\r\n            isLoggedIn={isLoggedIn}\r\n            charged={charged}\r\n            plansData={plansData}\r\n            selectedPlanData={selectedPlanData}\r\n            handleAPI={apiLoader ? apiLoader.handleAPI : () => {}}\r\n            setCharged={this.setCharged}\r\n          />\r\n        );\r\n      default:\r\n        return (\r\n          <TravelMainContainer\r\n            isLoggedIn={isLoggedIn}\r\n            values={values}\r\n            errors={errors}\r\n            onChangeValue={this.onChangeValue}\r\n            handleAPI={apiLoader ? apiLoader.handleAPI : () => {}}\r\n            validateForm={this.validateForm}\r\n            setPlansData={this.setPlansData}\r\n          />\r\n        );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { formIndex, apiLoader } = this.state;\r\n    const { constants } = this.props;\r\n\r\n    const checkoutStyle = formIndex === FORMSTATES.CHECKOUT.index ? 'travel-checkout-container' : '';\r\n    const meta = isProduction ? 'travel insurance, travel insurance \bsingapore, travel insurance discount, travel insurance promotion,  singapore travel insurance, buy travel insurance, buy travel insurance online, singapore travel insurance promotion, travel insurance singapore comparison, best travel insurance singapore, travel insurance comparison singapore, best travel insurance, travel insurance compare, compare travel insurance singapore, travel insurance comparison, travel insurance online, compare travel insurance, Annual travel insurance promotion, travel insurance direct, single trip travel insurance, policypal travel insurance' : '';\r\n\r\n    return (\r\n      <Page id=\"travel\">\r\n        <div className={checkoutStyle}>\r\n          {/* <Helmet>\r\n            <meta name=\"keywords\" content={meta} />\r\n            <title>PolicyPal 2.0 - Travel Insurance</title>\r\n            <meta name=\"title\" content=\"PolicyPal 2.0 - Travel Insurance\" />\r\n            <meta name=\"description\" content=\"Browse products for travel insurance.\" />\r\n          </Helmet> */}\r\n          {\r\n            constants && apiLoader &&\r\n            <Fragment>\r\n              {this.renderStepProgress()}\r\n              {this.renderTravelForms()}\r\n            </Fragment>\r\n          }\r\n          <RefreshTimer ref={(node) => {\r\n              if (!this.refresher) {\r\n                node.invokeNewTimer();\r\n              }\r\n              this.refresher = node;\r\n            }}\r\n          />\r\n          <APILoader ref={(node) => { this.APILoader = node; }} />\r\n        </div>\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nTravelRouteContainer.defaultProps = {\r\n  userDetails: null,\r\n  travelPromoGiveAway: undefined,\r\n  constants: null,\r\n};\r\n\r\nTravelRouteContainer.propTypes = {\r\n  userDetails: PropTypes.object,\r\n  travelPromoGiveAway: PropTypes.object,\r\n  constants: PropTypes.object,\r\n  history: PropTypes.object.isRequired,\r\n  setFormState: PropTypes.func.isRequired,\r\n  match: PropTypes.object.isRequired,\r\n  doGetPromoGiveaways: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  formState: state.insurance.formState,\r\n  travelPromoGiveAway: state.insurance.promoGiveaways.travel,\r\n  userDetails: state.userDetails.data,\r\n  constants: state.insurance.constants,\r\n  login: state.login,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setFormState: (state) => {\r\n    dispatch(setInsuranceFormState(state));\r\n  },\r\n  doGetPromoGiveaways: () => dispatch(getPromoGiveaways('travel')),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(TravelRouteContainer));\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport Helmet from 'react-helmet';\r\nimport logo from '../../assets/logo.png';\r\n\r\nconst SITE_URL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:3000'\r\n    : 'https://web.policypal.com';\r\n\r\nconst FACEBOOK_APP_ID = 'XXXXXXXXX';\r\n\r\nconst defaultTitle = 'My Website';\r\nconst defaultDescription =\r\n  'This is a really awesome website where we can render on the server. Supa cool.';\r\nconst defaultImage = `${SITE_URL}${logo}`;\r\nconst defaultTwitter = '@cereallarceny';\r\nconst defaultSep = ' | ';\r\n\r\nclass Page extends Component {\r\n  getMetaTags(\r\n    {\r\n      title,\r\n      description,\r\n      image,\r\n      contentType,\r\n      twitter,\r\n      noCrawl,\r\n      published,\r\n      updated,\r\n      category,\r\n      tags\r\n    },\r\n    pathname\r\n  ) {\r\n    const theTitle = title\r\n      ? (title + defaultSep + defaultTitle).substring(0, 60)\r\n      : defaultTitle;\r\n    const theDescription = description\r\n      ? description.substring(0, 155)\r\n      : defaultDescription;\r\n    const theImage = image ? `${SITE_URL}${image}` : defaultImage;\r\n\r\n    const metaTags = [\r\n      { itemprop: 'name', content: theTitle },\r\n      { itemprop: 'description', content: theDescription },\r\n      { itemprop: 'image', content: theImage },\r\n      { name: 'description', content: theDescription },\r\n      { name: 'twitter:card', content: 'summary_large_image' },\r\n      { name: 'twitter:site', content: defaultTwitter },\r\n      { name: 'twitter:title', content: theTitle },\r\n      { name: 'twitter:description', content: theDescription },\r\n      { name: 'twitter:creator', content: twitter || defaultTwitter },\r\n      { name: 'twitter:image:src', content: theImage },\r\n      { property: 'og:title', content: theTitle },\r\n      { property: 'og:type', content: contentType || 'website' },\r\n      { property: 'og:url', content: SITE_URL + pathname },\r\n      { property: 'og:image', content: theImage },\r\n      { property: 'og:description', content: theDescription },\r\n      { property: 'og:site_name', content: defaultTitle },\r\n      { property: 'fb:app_id', content: FACEBOOK_APP_ID }\r\n    ];\r\n\r\n    if (noCrawl) {\r\n      metaTags.push({ name: 'robots', content: 'noindex, nofollow' });\r\n    }\r\n\r\n    if (published) {\r\n      metaTags.push({ name: 'article:published_time', content: published });\r\n    }\r\n    if (updated) {\r\n      metaTags.push({ name: 'article:modified_time', content: updated });\r\n    }\r\n    if (category) {\r\n      metaTags.push({ name: 'article:section', content: category });\r\n    }\r\n    if (tags) {\r\n      metaTags.push({ name: 'article:tag', content: tags });\r\n    }\r\n\r\n    return metaTags;\r\n  }\r\n\r\n  render() {\r\n    const { children, id, className, ...rest } = this.props;\r\n\r\n    return (\r\n      <div id={id} className={className}>\r\n        <Helmet\r\n          htmlAttributes={{\r\n            lang: 'en',\r\n            itemscope: undefined,\r\n            itemtype: `http://schema.org/${rest.schema || 'WebPage'}`\r\n          }}\r\n          title={\r\n            rest.title ? rest.title + defaultSep + defaultTitle : defaultTitle\r\n          }\r\n          link={[\r\n            {\r\n              rel: 'canonical',\r\n              href: SITE_URL + this.props.location.pathname\r\n            }\r\n          ]}\r\n          meta={this.getMetaTags(rest, this.props.location.pathname)}\r\n        />\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Page);\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.f0988bd7.png\";","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/**\r\n * ChangeInitialFormData.js\r\n * This is the green pencil button that appears mainly on\r\n * the compare view which will render the Edit Detail forms\r\n * of each category.\r\n *\r\n * Users will be able to change that form through this component\r\n * and will do a callback to update any changes, eg for compare view.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport document from 'global/document';\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport {\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter,\r\n} from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './ModalPopup.scss';\r\n\r\nclass ModalPopup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showModal: props.showModal,\r\n    };\r\n\r\n    this.setHiddenAuto = this.setHiddenAuto.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { showModal } = this.props;\r\n\r\n    if (!showModal) {\r\n      this.setHiddenAuto();\r\n    }\r\n  }\r\n\r\n  // Toggle modal\r\n  componentWillReceiveProps(nextProps) {\r\n    const { showModal } = this.props;\r\n    if (nextProps.showModal !== showModal) {\r\n      this.setState({ showModal: nextProps.showModal });\r\n\r\n      if (!nextProps.showModal) {\r\n        this.setHiddenAuto();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.setHiddenInterval);\r\n  }\r\n\r\n\r\n  setHiddenAuto() {\r\n    clearInterval(this.setHiddenInterval);\r\n    this.setHiddenInterval = setInterval(() => {\r\n      if (!this.props.showModal && !_.includes(document.body.style.overflow, 'auto')) {\r\n        document.body.style.overflow = 'hidden auto';\r\n        clearInterval(this.setHiddenInterval);\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  render() {\r\n    const { showModal } = this.state;\r\n    const {\r\n      closeModal,\r\n      header,\r\n      body,\r\n      footer,\r\n      className,\r\n      backdropClassName,\r\n      zIndex,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Modal\r\n        isOpen={showModal}\r\n        size=\"lg\"\r\n        className={`modal-popup-custom ${className}`}\r\n        backdropClassName={backdropClassName}\r\n        zIndex={zIndex}\r\n      >\r\n        {\r\n          header &&\r\n          <ModalHeader\r\n            tag=\"h3\"\r\n            toggle={closeModal}\r\n          >\r\n            {header}\r\n          </ModalHeader>\r\n        }\r\n        {\r\n          body &&\r\n          <ModalBody>\r\n            {body}\r\n          </ModalBody>\r\n        }\r\n        {\r\n          footer &&\r\n          <ModalFooter>\r\n            {footer}\r\n          </ModalFooter>\r\n        }\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nModalPopup.defaultProps = {\r\n  showModal: false,\r\n  header: null,\r\n  body: null,\r\n  footer: null,\r\n  className: null,\r\n  backdropClassName: null,\r\n  zIndex: 1050,\r\n};\r\n\r\nModalPopup.propTypes = {\r\n  showModal: PropTypes.bool,\r\n  closeModal: PropTypes.func.isRequired,\r\n  header: PropTypes.object,\r\n  body: PropTypes.object,\r\n  footer: PropTypes.object,\r\n  className: PropTypes.string,\r\n  backdropClassName: PropTypes.string,\r\n  zIndex: PropTypes.number,\r\n};\r\n\r\nexport default ModalPopup;\r\n","/**\r\n * PopupWithText.js\r\n * Popup with custom text\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport Popup from '../Popup/Popup';\r\n\r\n\r\nimport './PopupWithText.scss';\r\n\r\nclass PopupWithText extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { onConfirm } = this.props;\r\n\r\n    this.state = {\r\n      text: '',\r\n      jsx: null,\r\n      useConfirm: true,\r\n      onConfirm,\r\n    };\r\n    this.openPopupWithText = this.openPopupWithText.bind(this);\r\n  }\r\n\r\n  openPopupWithText(text, useConfirm = true, onConfirm = null) {\r\n    this.setState({\r\n      text,\r\n      useConfirm,\r\n    });\r\n\r\n    if (onConfirm) {\r\n      this.setState({\r\n        onConfirm,\r\n      });\r\n    }\r\n    setTimeout(this.popupRef.openPopup, 10);\r\n  }\r\n\r\n  openPopupWithJSX(jsx, useConfirm = true, onConfirm = null) {\r\n    this.setState({\r\n      jsx,\r\n      useConfirm,\r\n    });\r\n\r\n    if (onConfirm) {\r\n      this.setState({\r\n        onConfirm,\r\n      });\r\n    }\r\n    setTimeout(this.popupRef.openPopup, 10);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      text, jsx, useConfirm, onConfirm,\r\n    } = this.state;\r\n    const { showCancelButton, hideCloseButton } = this.props;\r\n    return (\r\n      <div className=\"popup-with-text\">\r\n        <Popup\r\n          hideCloseButton={hideCloseButton}\r\n          ref={(r) => { this.popupRef = r; }}\r\n        >\r\n          <Fragment>\r\n            <div className=\"check-out-popup\">\r\n              <div className=\"upper-container upper-margin-down\">\r\n                {\r\n                  jsx || (\r\n                    <p>\r\n                      <span className=\"focus-text\">{text}</span>\r\n                    </p>\r\n                  )\r\n                }\r\n              </div>\r\n              <div className=\"button-container\">\r\n                {\r\n                  showCancelButton ?\r\n                    <Button\r\n                      className=\"checkout-button\"\r\n                      variant=\"medium-flat\"\r\n                      width={166}\r\n                      height={72}\r\n                      onClick={() => {\r\n                        this.popupRef.closePopup();\r\n                      }}\r\n                    >\r\n                      <p>Cancel</p>\r\n                    </Button>\r\n                  :\r\n                    null\r\n                }\r\n                <Button\r\n                  className=\"checkout-button\"\r\n                  variant=\"medium-flat-green\"\r\n                  width={166}\r\n                  height={72}\r\n                  onClick={() => {\r\n                    if (useConfirm) {\r\n                      onConfirm();\r\n                    }\r\n                    this.popupRef.closePopup();\r\n                  }}\r\n                >\r\n                  <p>Confirm</p>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Fragment>\r\n        </Popup>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPopupWithText.defaultProps = {\r\n  onConfirm: () => {},\r\n  showCancelButton: false,\r\n  hideCloseButton: false,\r\n};\r\n\r\nPopupWithText.propTypes = {\r\n  onConfirm: PropTypes.func,\r\n  showCancelButton: PropTypes.bool,\r\n  hideCloseButton: PropTypes.bool,\r\n};\r\n\r\nexport default PopupWithText;\r\n","/**\r\n * PopupWithText.js\r\n * Popup with custom text\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport PopupWithText from '../PopupWithText/PopupWithText';\r\n\r\n\r\nclass RefreshTimer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.oldTime = new Date();\r\n    this.timeout = null;\r\n    this.invokeNewTimer = this.invokeNewTimer.bind(this);\r\n    this.setTimer = this.setTimer.bind(this);\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.interval = window.setInterval(() => {\r\n      if (window.addEventListener) {\r\n        window.addEventListener('mousemove', this.invokeNewTimer);\r\n        window.addEventListener('keypress', this.invokeNewTimer);\r\n        clearInterval(this.interval);\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n\r\n  componentWillUnmount() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n\r\n    window.removeEventListener('mousemove', this.invokeNewTimer);\r\n    window.removeEventListener('keypress', this.invokeNewTimer);\r\n  }\r\n\r\n  setTimer() {\r\n    const { popupTimer, refreshTimer } = this.props;\r\n    this.timeout = setTimeout(() => {\r\n      const confirmResult = window.confirm(`Your session will expire due inactivity. Please click OK within ${refreshTimer / 1000 / 60} mins to continue, or Cancel, if you wish to leave the page.`);\r\n      const timeDiff = new Date() - this.oldTime;\r\n\r\n      if (confirmResult && timeDiff < popupTimer + refreshTimer) {\r\n        this.invokeNewTimer();\r\n      } else {\r\n        window.location.assign('/');\r\n      }\r\n    }, popupTimer);\r\n    this.oldTime = new Date();\r\n  }\r\n\r\n  invokeNewTimer() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n\r\n    this.setTimer();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <PopupWithText\r\n          hideCloseButton\r\n          ref={node => this.popup = node}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nRefreshTimer.defaultProps = {\r\n  popupTimer: 600000,\r\n  refreshTimer: 120000,\r\n};\r\n\r\nRefreshTimer.propTypes = {\r\n  popupTimer: PropTypes.number,\r\n  refreshTimer: PropTypes.number,\r\n};\r\n\r\nexport default RefreshTimer;\r\n","/**\r\n * LoadingScreen.js\r\n * Loading screen for anywhere use\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport styled, { keyframes } from 'styled-components';\r\n\r\nimport Logos from 'assets/images/InsurerLogos';\r\nimport './LoadingScreenV2.scss';\r\n\r\nclass LogoSlider extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const logos = _.map(Logos.small, logo => logo);\r\n    const keyFrameLogo = keyframes`\r\n      0%    { transform: translateX(0); }\r\n      100%  { transform: translateX(calc(-84px * ${logos.length})); }\r\n    `;\r\n\r\n    const AnimatedContainer = styled.div`\r\n      animation: ${keyFrameLogo} 5s linear infinite;\r\n    `;\r\n\r\n    this.state = {\r\n      logos: _.map(Logos.small, logo => logo),\r\n      AnimatedContainer,\r\n    };\r\n\r\n    this.renderLogos = this.renderLogos.bind(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  renderLogos(key) {\r\n    const { logos } = this.state;\r\n    return _.map(logos, (logo, index) => (\r\n      <img key={`loading-icon-${key}-${index}`} src={logo} alt={`loading-icon-${index}.svg`} />\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const { AnimatedContainer } = this.state;\r\n\r\n    return (\r\n      <AnimatedContainer\r\n        className=\"logo-container\"\r\n      >\r\n        {this.renderLogos(0)}\r\n        {this.renderLogos(1)}\r\n      </AnimatedContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LogoSlider;\r\n","/**\r\n * LoadingScreen.js\r\n * Loading screen for anywhere use\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ModalPopup from 'components/Templates/ModalPopup/ModalPopup';\r\nimport SpinnerAnimation from 'components/Templates/SpinnerAnimation/SpinnerAnimation';\r\nimport Button from 'components/FormsV3/Button/Button';\r\n\r\nimport LogoSlider from './LogoSlider';\r\n\r\nimport './LoadingScreenV2.scss';\r\n\r\nconst timeOutTimer = 30000;\r\n\r\nclass LoadingScreenV2 extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      overwriteShowWarning: false,\r\n    };\r\n\r\n    this.closeLoading = this.closeLoading.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handleChange();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { isLoading } = this.props;\r\n\r\n    if (isLoading !== prevProps.isLoading) {\r\n      this.handleChange();\r\n    }\r\n  }\r\n\r\n  handleChange() {\r\n    const { isLoading } = this.props;\r\n    if (isLoading) {\r\n      this.timer = setTimeout(() => this.setState({ overwriteShowWarning: true }), timeOutTimer);\r\n    }\r\n\r\n    if (!isLoading) {\r\n      clearTimeout(this.timer);\r\n      this.setState({ overwriteShowWarning: false });\r\n    }\r\n  }\r\n\r\n  async closeLoading() {\r\n    const {\r\n      showLoadingError,\r\n      showLoading,\r\n      errorCallback,\r\n    } = this.props;\r\n\r\n    this.setState({ overwriteShowWarning: false }, async () => {\r\n      await showLoadingError(false);\r\n      showLoading(false);\r\n\r\n      if (errorCallback) {\r\n        errorCallback();\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { overwriteShowWarning } = this.state;\r\n    const {\r\n      isLoading,\r\n      isLoadingError,\r\n      message,\r\n      noLogos,\r\n    } = this.props;\r\n\r\n    const loadingStyle = isLoading ? 'loading-screen-active' : '';\r\n\r\n    return (\r\n      <Fragment>\r\n        <div\r\n          className={`loading-screen-v2 ${loadingStyle}`}\r\n        >\r\n          {\r\n            isLoading ?\r\n              <Fragment>\r\n                <SpinnerAnimation />\r\n                {\r\n                  !noLogos &&\r\n                  <div className=\"bottom-container\">\r\n                    <p>Searching from esteemed partners...</p>\r\n                    <LogoSlider />\r\n                  </div>\r\n                }\r\n              </Fragment>\r\n            : null\r\n          }\r\n        </div>\r\n        <ModalPopup\r\n          showModal={overwriteShowWarning || isLoadingError}\r\n          closeModal={this.closeLoading}\r\n          className=\"loading-modal\"\r\n          backdropClassName=\"blue-modal-backdrop\"\r\n          header={<p>An error has occured</p>}\r\n          body={message}\r\n          zIndex={1052}\r\n          footer={\r\n            <Button\r\n              variant=\"medium-flat-green\"\r\n              height={48}\r\n              width={162}\r\n              onClick={this.closeLoading}\r\n            >\r\n              <p>Close</p>\r\n            </Button>\r\n          }\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nLoadingScreenV2.defaultProps = {\r\n  noLogos: false,\r\n  errorCallback: null,\r\n};\r\n\r\nLoadingScreenV2.propTypes = {\r\n  isLoading: PropTypes.bool.isRequired,\r\n  isLoadingError: PropTypes.bool.isRequired,\r\n  message: PropTypes.object.isRequired,\r\n  showLoading: PropTypes.func.isRequired,\r\n  showLoadingError: PropTypes.func.isRequired,\r\n  noLogos: PropTypes.bool,\r\n  errorCallback: PropTypes.func,\r\n};\r\n\r\nexport default LoadingScreenV2;\r\n","/**\r\n * Checkout.js\r\n * This is the checkout view that will render the summary\r\n * of details and handle all the promo, cashback and stripe\r\n * APIs.\r\n *\r\n * There is 2 state to this view. Checkout or receipt. It will\r\n * toggle accordingly if charged/ahHocCharged.\r\n *\r\n * Upon successful payment, it will update the user data again\r\n * to check if any cashback is used.\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\n// import PropTypes from 'prop-types';\r\n\r\nimport LoadingScreenV2 from 'components/Templates/LoadingScreenV2/LoadingScreenV2';\r\n\r\nconst defaultMsg = 'Please try again.';\r\n\r\nclass APILoader extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showLoading: false,\r\n      showLoadingError: false,\r\n      errorMsg: null,\r\n      errorCallback: null,\r\n    };\r\n\r\n    this.handleAPI = this.handleAPI.bind(this);\r\n    this.showLoading = this.showLoading.bind(this);\r\n    this.showLoadingError = this.showLoadingError.bind(this);\r\n  }\r\n\r\n  async showLoading(show) {\r\n    await new Promise((resolve) => { this.setState({ showLoading: show }, resolve); });\r\n  }\r\n\r\n  async showLoadingError(show) {\r\n    await new Promise((resolve) => { this.setState({ showLoadingError: show }, resolve); });\r\n  }\r\n\r\n  async handleAPI(apiCallback, overwriteWarning = false, errorMsg = null, errorCallback = null) {\r\n    try {\r\n      clearInterval(this.showLoadigInterval);\r\n      this.showLoadigInterval = setInterval(() => this.setState({\r\n        showLoading: true,\r\n      }), 300);\r\n\r\n      const result = await apiCallback();\r\n\r\n      clearInterval(this.showLoadigInterval);\r\n\r\n      const showError = overwriteWarning ? false : !result;\r\n\r\n      this.setState({\r\n        showLoadingError: showError,\r\n        showLoading: showError,\r\n        errorMsg,\r\n        errorCallback,\r\n      });\r\n      return result;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n      console.log(error);\r\n    }\r\n\r\n    this.setState({\r\n      showLoadingError: true,\r\n      showLoading: true,\r\n      errorMsg,\r\n      errorCallback,\r\n    });\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      showLoading,\r\n      showLoadingError,\r\n      errorMsg,\r\n      errorCallback,\r\n    } = this.state;\r\n\r\n    return (\r\n      <Fragment>\r\n        <LoadingScreenV2\r\n          isLoading={showLoading}\r\n          isLoadingError={showLoadingError}\r\n          message={<h5>{errorMsg || defaultMsg}</h5>}\r\n          showLoading={this.showLoading}\r\n          showLoadingError={this.showLoadingError}\r\n          errorCallback={errorCallback}\r\n          noLogos\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nAPILoader.defaultProps = {\r\n};\r\n\r\nAPILoader.propTypes = {\r\n};\r\n\r\nexport default APILoader;\r\n"],"sourceRoot":""}