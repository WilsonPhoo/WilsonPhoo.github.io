{"version":3,"sources":["containers/Business/BusinessRouteContainer.js","components/Page/Page.js","assets/logo.png","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","components/Templates/PopupWithText/PopupWithText.js","components/Templates/RefreshTimer/RefreshTimer.js","assets/images/Business/Flow/Flow.svg"],"names":["StepProgressBar","Loadable","loader","Promise","all","__webpack_require__","e","then","bind","loading","modules","BusinessLanding","BusinessForm","BusinessCheckout","LoadingScreenV2","emailField","slug","placeholderString","type","is_required","size","checkoutFields","title","forms","readOnly","placeholder","min_date","moment","startOf","add","toDate","STATUSLIST","BusinessRouteContainer","props","_this","Object","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","this","_this$props","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","history","doSetQuoteData","state","formIndex","values","errors","pageForms","currPage","allFields","transitionClass","showLoading","showLoadingError","token","paymentIntent","quoteData","promoCode","isFromSession","location","pathname","partialFlowStatus","formStatesToUse","FORMSTATES","renderStepProgress","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_10__","renderFlow","onChangeValue","onInitalSetup","validateForm","setFormIndex","handleTransition","getCurrentFormIndex","getNewQuote","handleAPI","checkOtp","quoteButtonCallback","nextProps","prevState","isMounted","formState","match","doSetCategoryNavBar","routeResult","routeHandler","index","PARTIALFORMSTATES","setFormState","doSetGetQuoteNavbar","MAIN","setState","_this2","_this$props3","searchParams","splitParams","search","split","_","each","param","splitParam","error","session","getSession","initialSessionStatus","status","getForm","pages","concat","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","getFieldsFromForms","page","find","form","isPushMore","resolve","_this3","payment_intent","CUSTOMIZE","push","path","REVIEW","CHECKOUT","input_data","inputData","reduce","result","value","key","newValues","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","field","f","valueToUse","Date","getSummary","summaryResult","quote","r","info","isBalance","outstanding_premium","amount_paid","isEmpty","name","newError","validateFormValue","_this4","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default","a","mark","_callee3","wrap","_context3","prev","next","age_group","no_of_employees","stop","_this$props5","productID","requestData","generateRequestData","newQuote","postQuote","_this5","isDeposit","_this$state2","currPageIndex","findIndex","retryCount","isSuceed","mutex","_this6","checkOtpInterval","setInterval","_callee6","_context6","verifyOTP","sent","clearInterval","abrupt","optResult","apiCallback","overwriteWarning","showLoadigInterval","_this7","show","_this8","_this9","callback","_callee11","_context11","setTimeout","_this10","failScrollUp","_callee13","newToken","_context13","postSession","_this11","putSessions","window","scrollTo","validateResult","top","left","behavior","subset","overwriteFields","fieldsToUse","newErrors","_this12","_this$state6","inputList","stateList","stateDescriptions","main","react__WEBPACK_IMPORTED_MODULE_14___default","createElement","className","maxWidth","formStates","charged","v3Slider","_this13","_this$state7","_this$props6","userDetails","quoteDataFromState","isLoggedIn","stickyInfo","headerImage","FlowHeaderImg","onNext","_callee16","newCurrPageIndex","isInCustomize","newPage","newState","_context16","length","onBack","_callee17","_context17","SUBMITTED","setStateToSubmitted","postComeBackLater","_ref7","_callee18","params","_context18","_x14","apply","arguments","postBankTransfer","_ref8","_callee19","_context19","_x15","_callee20","_context20","postCheckout","_callee21","promo","isPut","data","newQuoteData","_args21","_context21","undefined","payment_template_links","isCheckout","_callee22","newFormIndex","_context22","_callee23","_context23","_this14","_this$state8","components_Page_Page__WEBPACK_IMPORTED_MODULE_18__","id","react_helmet__WEBPACK_IMPORTED_MODULE_15__","content","components_Templates_RefreshTimer_RefreshTimer__WEBPACK_IMPORTED_MODULE_24__","ref","node","refresher","invokeNewTimer","isLoading","isLoadingError","message","noLogos","Component","defaultProps","withRouter","connect","insurance","constants","business","dispatch","setInsuranceFormState","isCategory","isBusiness","setCategoryNavBar","setGetQuoteNavbar","setQuoteData","SITE_URL","defaultImage","logo","Page","_ref","description","image","contentType","twitter","noCrawl","published","updated","category","tags","theTitle","substring","theDescription","theImage","metaTags","itemprop","property","children","rest","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_6___default","react_helmet__WEBPACK_IMPORTED_MODULE_8___default","htmlAttributes","lang","itemscope","itemtype","schema","link","rel","href","meta","getMetaTags","module","exports","p","_objectWithoutProperties","source","excluded","i","target","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","d","__webpack_exports__","PopupWithText","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","onConfirm","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","text","jsx","useConfirm","openPopupWithText","C_Users_Kaiser_Desktop_policypal_web_reactjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","popupRef","openPopup","_this$state","showCancelButton","hideCloseButton","_Popup_Popup__WEBPACK_IMPORTED_MODULE_8__","react__WEBPACK_IMPORTED_MODULE_6__","components_FormsV3_Button_Button__WEBPACK_IMPORTED_MODULE_7__","variant","width","height","onClick","closePopup","RefreshTimer","oldTime","timeout","setTimer","interval","addEventListener","clearTimeout","removeEventListener","popupTimer","refreshTimer","confirmResult","confirm","timeDiff","assign","react__WEBPACK_IMPORTED_MODULE_7___default","react__WEBPACK_IMPORTED_MODULE_7__","_PopupWithText_PopupWithText__WEBPACK_IMPORTED_MODULE_8__","popup"],"mappings":"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","file":"static/js/business.58d4e9ab.chunk.js","sourcesContent":["/**\r\n * EndowmentRouteContainer.js\r\n * The wrapper container for endowment\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport React, { Component, Fragment } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { connect } from 'react-redux';\r\nimport { /* Prompt, */ withRouter } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport Page from 'components/Page/Page';\r\nimport Loadable from 'react-loadable';\r\n\r\nimport { setInsuranceFormState } from 'actions/insuranceActions';\r\nimport {\r\n  FORMSTATES,\r\n  PARTIALFORMSTATES,\r\n  getForm,\r\n  getSession,\r\n  postSession,\r\n  putSessions,\r\n  postQuote,\r\n  getSummary,\r\n  postCheckout,\r\n  postBankTransfer,\r\n  setGetQuoteNavbar,\r\n  verifyOTP,\r\n  setQuoteData,\r\n  postComeBackLater,\r\n} from 'actions/businessAction';\r\nimport { setCategoryNavBar } from 'actions/navActions';\r\n\r\nimport FlowHeaderImg from 'assets/images/Business/Flow/Flow.svg';\r\n\r\n// import StepProgressBar from 'components/Templates/StepProgressBar/StepProgressBarNew';\r\nimport RefreshTimer from 'components/Templates/RefreshTimer/RefreshTimer';\r\n// import LoadingScreenV2 from 'components/Templates/LoadingScreenV2/LoadingScreenV2';\r\n\r\n// import BusinessLanding from 'components/Business/BusinessLanding/BusinessLanding';\r\n// import BusinessForm from 'components/Business/BusinessForm/BusinessForm';\r\n// import BusinessCheckout from 'components/Business/BusinessCheckout/BusinessCheckout';\r\n\r\nimport { routeHandler, getFieldsFromForms, generateRequestData } from 'lib/helperFunctions';\r\nimport { validateFormValue, validateForm } from 'lib/validatorsV2';\r\n\r\n\r\nconst StepProgressBar = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"StepProgressBarNew\" */ 'components/Templates/StepProgressBar/StepProgressBarNew'),\r\n  loading: () => null,\r\n  modules: ['StepProgressBarNew']\r\n});\r\n\r\nconst BusinessLanding = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"BusinessLanding\" */ 'components/Business/BusinessLanding/BusinessLanding'),\r\n  loading: () => null,\r\n  modules: ['BusinessLanding']\r\n});\r\n\r\nconst BusinessForm = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"BusinessForm\" */ 'components/Business/BusinessForm/BusinessForm'),\r\n  loading: () => null,\r\n  modules: ['BusinessForm']\r\n});\r\n\r\nconst BusinessCheckout = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"BusinessCheckout\" */ 'components/Business/BusinessCheckout/BusinessCheckout'),\r\n  loading: () => null,\r\n  modules: ['BusinessCheckout']\r\n});\r\n\r\nconst LoadingScreenV2 = Loadable({\r\n  loader: () => import(/* webpackChunkName: \"LoadingScreenV2\" */ 'components/Templates/LoadingScreenV2/LoadingScreenV2'),\r\n  loading: () => null,\r\n  modules: ['LoadingScreenV2']\r\n});\r\n\r\nconst routeName = 'business';\r\n\r\nconst emailField = {\r\n  slug: 'email',\r\n  placeholderString: 'Enter company email address',\r\n  type: 'email',\r\n  is_required: true,\r\n  size: 12,\r\n};\r\n\r\nconst checkoutFields = [{\r\n  title: 'Contact Details',\r\n  forms: [{\r\n    size: 12,\r\n    title: 'Email',\r\n    slug: 'email',\r\n    placeholderString: 'Enter company email address',\r\n    type: 'email',\r\n    readOnly: true,\r\n    is_required: true,\r\n  }, {\r\n    size: 12,\r\n    title: 'Company',\r\n    slug: 'company',\r\n    placeholder: 'E.g Singtel',\r\n    type: 'text',\r\n    is_required: true,\r\n  }, {\r\n    size: 12,\r\n    title: 'First name',\r\n    slug: 'first_name',\r\n    placeholder: 'E.g John',\r\n    type: 'text',\r\n    is_required: true,\r\n  }, {\r\n    size: 12,\r\n    title: 'Last name',\r\n    slug: 'last_name',\r\n    placeholder: 'E.g Doe',\r\n    type: 'text',\r\n    is_required: true,\r\n  }, {\r\n    size: 12,\r\n    title: 'Mobile no',\r\n    slug: 'mobile_number',\r\n    placeholder: 'E.g 8888 8888',\r\n    type: 'number',\r\n    is_required: true,\r\n  }],\r\n}, {\r\n  title: 'Plan Details',\r\n  forms: [{\r\n    size: 12,\r\n    title: 'No of employees',\r\n    slug: 'no_of_employees',\r\n    placeholder: 'No of employees',\r\n    type: 'text',\r\n    readOnly: true,\r\n  }, {\r\n    size: 12,\r\n    title: 'Expected start date',\r\n    slug: 'start_date',\r\n    placeholder: 'DD/MM/YYYY',\r\n    type: 'date',\r\n    min_date: moment().startOf('day').add(1, 'days').toDate(),\r\n    is_required: true,\r\n  }],\r\n}];\r\n\r\nconst STATUSLIST = {\r\n  CUSTOMIZE: 'customize',\r\n  REVIEW: 'review',\r\n  CHECKOUT: 'checkout',\r\n  PAYMENTPENDING: 'pending_payment',\r\n  DEPOSITED: 'deposited',\r\n  PAID: 'paid',\r\n};\r\n\r\nclass BusinessRouteContainer extends Component {\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { formIndex, isMounted } = prevState;\r\n    const {\r\n      formState,\r\n      match,\r\n      history,\r\n      doSetCategoryNavBar,\r\n      partialFlowStatus,\r\n    } = nextProps;\r\n\r\n    if (isMounted) {\r\n      const routeResult = routeHandler(routeName, formState.index, formIndex, match, history, partialFlowStatus ? PARTIALFORMSTATES : FORMSTATES);\r\n      if (routeResult && routeResult.formIndex !== null) {\r\n        // Set category or main nav bar depending on page\r\n        doSetCategoryNavBar(routeResult.formIndex !== 0, true);\r\n        return ({\r\n          formIndex: routeResult.formIndex,\r\n        });\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {\r\n      history,\r\n      doSetQuoteData,\r\n    } = this.props;\r\n\r\n    this.state = {\r\n      formIndex: 0,\r\n      values: {},\r\n      errors: {},\r\n\r\n      pageForms: null, // All the forms for this flow\r\n      currPage: null, // Current page slug\r\n      allFields: null, // All the fields for this flow\r\n\r\n      transitionClass: 'flow-visible',\r\n\r\n      showLoading: false,\r\n      showLoadingError: false,\r\n\r\n      token: null,\r\n      paymentIntent: null,\r\n      quoteData: null,\r\n\r\n      promoCode: null,\r\n\r\n      isFromSession: history && history.location && history.location.pathname === '/business/review',\r\n\r\n      partialFlowStatus: null, // What is the status when it is deposited or paid\r\n      formStatesToUse: FORMSTATES, // Partial flow or full flow\r\n    };\r\n\r\n    doSetQuoteData(null);\r\n\r\n    // Reset route\r\n    // history.replace(`/business${history.location.search}`);\r\n\r\n    this.renderStepProgress = this.renderStepProgress.bind(this);\r\n    this.renderFlow = this.renderFlow.bind(this);\r\n    this.onChangeValue = this.onChangeValue.bind(this);\r\n    this.onInitalSetup = this.onInitalSetup.bind(this);\r\n    this.validateForm = this.validateForm.bind(this);\r\n    this.setFormIndex = this.setFormIndex.bind(this);\r\n\r\n    this.showLoading = this.showLoading.bind(this);\r\n    this.showLoadingError = this.showLoadingError.bind(this);\r\n    this.handleTransition = this.handleTransition.bind(this);\r\n\r\n    this.getCurrentFormIndex = this.getCurrentFormIndex.bind(this);\r\n\r\n    this.getNewQuote = this.getNewQuote.bind(this);\r\n    this.handleAPI = this.handleAPI.bind(this);\r\n\r\n    this.checkOtp = this.checkOtp.bind(this);\r\n\r\n    this.quoteButtonCallback = this.quoteButtonCallback.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const {\r\n      doSetCategoryNavBar,\r\n      setFormState,\r\n      doSetGetQuoteNavbar,\r\n    } = this.props;\r\n\r\n    // Set to main first\r\n    setFormState(FORMSTATES.MAIN);\r\n\r\n    this.setState({\r\n      isMounted: true,\r\n    });\r\n\r\n    // Set nav bar to product flow\r\n    doSetCategoryNavBar(false, true);\r\n    // For the nav bar to go from landing page to purchase flow\r\n    doSetGetQuoteNavbar(() => this.quoteButtonCallback(true));\r\n\r\n    // Do initial setup\r\n    this.onInitalSetup();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { doSetCategoryNavBar, doSetQuoteData } = this.props;\r\n    // Clear any redux state\r\n    doSetCategoryNavBar(false, false);\r\n    doSetQuoteData(null);\r\n  }\r\n\r\n  // Init the flow with previous session if needed\r\n  async onInitalSetup() {\r\n    const { isFromSession } = this.state;\r\n    const {\r\n      history,\r\n      setFormState,\r\n      doSetQuoteData,\r\n    } = this.props;\r\n\r\n    // Try to parse search params from url if from special link\r\n    const searchParams = {};\r\n    try {\r\n      if (isFromSession) {\r\n        const splitParams = history.location.search.split('?')[1].split('&');\r\n        _.each(splitParams, (param) => {\r\n          try {\r\n            const splitParam = param.split('=');\r\n\r\n            // eslint-disable-next-line\r\n            searchParams[splitParam[0]] = splitParam[1];\r\n          } catch (error) {\r\n            // eslint-disable-next-line\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    let pageForms = null;\r\n    let currPage = null;\r\n    let allFields = null;\r\n    let values = {};\r\n    let partialFlowStatus = false;\r\n    let formStatesToUse = FORMSTATES;\r\n\r\n    try {\r\n      // Get session for this flow\r\n      const session = searchParams.session ? await this.handleAPI(() => getSession(searchParams.session)) : null;\r\n      // Session status\r\n      const initialSessionStatus = session && session.status;\r\n      // Get status for partial flow\r\n      partialFlowStatus = initialSessionStatus === 'deposited' || initialSessionStatus === 'paid' ? initialSessionStatus : null;\r\n      // Which flow to use\r\n      formStatesToUse = partialFlowStatus ? PARTIALFORMSTATES : FORMSTATES;\r\n\r\n      // Get all the forms for this flow\r\n      const pages = await this.handleAPI(getForm);\r\n\r\n      if (pages) {\r\n        // All the field options for this flow\r\n        allFields = [\r\n          ...getFieldsFromForms(pages),\r\n          emailField,\r\n          ...getFieldsFromForms(checkoutFields),\r\n        ];\r\n\r\n        // All the pages\r\n        pageForms = pages;\r\n        if (pageForms) {\r\n          // Set to first page first\r\n          currPage = pageForms[0].slug;\r\n          // If session got latest page, make sure its valid and set to currPage\r\n          if (session && session.page) {\r\n            const isValidPage = _.find(pageForms, form => form.slug === session.page);\r\n            if (isValidPage) {\r\n              currPage = session.page;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Set the flow to the previous stage\r\n        if (session && session.status) {\r\n          // Whether need to continue push states\r\n          let isPushMore = true;\r\n\r\n          // Set token and payment intent from OTP if necessary\r\n          await new Promise(resolve => this.setState({\r\n            token: searchParams.session,\r\n            paymentIntent: searchParams.payment_intent,\r\n          }, resolve));\r\n\r\n          setFormState(formStatesToUse.CUSTOMIZE);\r\n          history.push(`/business${formStatesToUse.CUSTOMIZE.path}${history.location.search}`);\r\n          if (session.status === STATUSLIST.CUSTOMIZE) {\r\n            isPushMore = false;\r\n          }\r\n\r\n          if (isPushMore) {\r\n            setFormState(formStatesToUse.REVIEW);\r\n            history.push(`/business${formStatesToUse.REVIEW.path}${history.location.search}`);\r\n            if (session.status === STATUSLIST.REVIEW) {\r\n              isPushMore = false;\r\n            }\r\n          }\r\n\r\n          // Only go back to checkout view if there is a payment intent\r\n          if (searchParams.payment_intent) {\r\n            setFormState(formStatesToUse.CHECKOUT);\r\n            history.push(`/business${formStatesToUse.CHECKOUT.path}${history.location.search}`);\r\n          }\r\n        }\r\n\r\n        // Restore all inputs or manually add email to values\r\n        // if redirect from PPS landing page\r\n        if (session && session.input_data) {\r\n          const inputData = session.input_data;\r\n          values = _.reduce(inputData, (result, value, key) => {\r\n            const newValues = { ...result };\r\n\r\n            // Find this field first\r\n            const field = _.find(allFields, f => f.slug === key);\r\n            if (field) {\r\n              let valueToUse = value;\r\n              // Set back the type\r\n              if (field.type === 'date' || field.type === 'end_date') {\r\n                valueToUse = new Date(value);\r\n              }\r\n              newValues[key] = { type: field.type, value: valueToUse };\r\n            }\r\n\r\n            return newValues;\r\n          }, {});\r\n\r\n          // Get summary if is partial flow, else get quote WITHOUT promocode\r\n          // Since we do not hold the code for them\r\n          if (partialFlowStatus && searchParams.session) {\r\n            const summaryResult = await getSummary(searchParams.session);\r\n            if (summaryResult && summaryResult.quote) {\r\n              await new Promise((r) => { this.setState({ quoteData: summaryResult.quote }, r); });\r\n              doSetQuoteData({\r\n                quote: { info: summaryResult.info, quote: summaryResult.quote },\r\n                isBalance: summaryResult.quote && summaryResult.quote.outstanding_premium && summaryResult.quote.amount_paid,\r\n              });\r\n            }\r\n          } else if (!_.isEmpty(values)) {\r\n            await this.getNewQuote(allFields, values, searchParams.session, 1);\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    // Set all the necessary stats\r\n    this.setState({\r\n      pageForms,\r\n      currPage,\r\n      values,\r\n      allFields,\r\n      partialFlowStatus,\r\n      formStatesToUse,\r\n      isFromSession: false,\r\n    });\r\n  }\r\n\r\n  // Update form values on change\r\n  async onChangeValue(type, name, value) {\r\n    const {\r\n      values,\r\n      errors,\r\n      allFields,\r\n      token,\r\n      formIndex,\r\n      promoCode,\r\n      formStatesToUse,\r\n    } = this.state;\r\n\r\n    try {\r\n      const error = errors && errors[name];\r\n      let newError = {};\r\n\r\n      if (error) {\r\n        newError = { [name]: await validateFormValue(name, { type, value }, values, allFields) };\r\n      }\r\n\r\n      return new Promise((resolve) => {\r\n        this.setState({\r\n          values: {\r\n            ...values,\r\n            [name]: { type, value },\r\n          },\r\n          errors: { ...errors, ...newError },\r\n        }, async () => {\r\n          const { values: newValues } = this.state;\r\n          // console.log(newValues, this.state.errors);\r\n          if (formIndex === formStatesToUse.CUSTOMIZE.index) {\r\n            if (_.isEmpty(newError)) {\r\n              if (name !== 'age_group') {\r\n                const ageGroup = newValues && newValues.age_group && newValues.age_group.value;\r\n                if (ageGroup) {\r\n                  const employeeCount = newValues && newValues.no_of_employees && newValues.no_of_employees.value >= 0;\r\n                  if (employeeCount) {\r\n                    // Get quote only when there is valid age group\r\n                    await this.getNewQuote(allFields, newValues, token, 1, promoCode);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            // this.onChangeAgeGroup();\r\n          }\r\n          resolve();\r\n        });\r\n      });\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  setFormIndex(formState) {\r\n    if (formState) {\r\n      const { doSetCategoryNavBar, history, setFormState } = this.props;\r\n      doSetCategoryNavBar(formState.index !== 0, true);\r\n      setFormState(formState);\r\n      history.push(`/${routeName}${formState.path}`);\r\n    }\r\n  }\r\n\r\n  async getNewQuote(allFields, values, token, productID, promoCode) {\r\n    try {\r\n      const { doSetQuoteData } = this.props;\r\n      const requestData = generateRequestData(allFields, values);\r\n\r\n      let newQuote = null;\r\n      if (requestData.no_of_employees && requestData.no_of_employees > 0) {\r\n        newQuote = await postQuote(requestData, token, productID, promoCode);\r\n      }\r\n\r\n      await new Promise((r) => { this.setState({ quoteData: newQuote }, r); });\r\n      doSetQuoteData({ quote: newQuote, isDeposit: false });\r\n\r\n      return newQuote;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  getCurrentFormIndex() {\r\n    const { pageForms, currPage } = this.state;\r\n\r\n    let currPageIndex = -1;\r\n    try {\r\n      currPageIndex = _.findIndex(pageForms, form => form.slug === currPage);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return currPageIndex;\r\n  }\r\n\r\n  async checkOtp() {\r\n    const { paymentIntent, token } = this.state;\r\n\r\n    try {\r\n      const optResult = await this.handleAPI(() => (\r\n        new Promise((resolve) => {\r\n          let retryCount = 5;\r\n          let isSuceed = false;\r\n          let mutex = false;\r\n\r\n          this.checkOtpInterval = setInterval(async () => {\r\n            if (!mutex) {\r\n              mutex = true;\r\n\r\n              const result = await verifyOTP(token, paymentIntent);\r\n              retryCount -= 1;\r\n\r\n              isSuceed = result && result.status === 'succeeded';\r\n              if (retryCount === 0 || isSuceed) {\r\n                clearInterval(this.checkOtpInterval);\r\n                resolve(isSuceed);\r\n                return;\r\n              }\r\n\r\n              mutex = false;\r\n            }\r\n          }, 1000);\r\n        })\r\n      ));\r\n\r\n      this.setState({\r\n        paymentIntent: null,\r\n      });\r\n\r\n      return optResult;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  async handleAPI(apiCallback, overwriteWarning = false) {\r\n    const { isFromSession } = this.state;\r\n\r\n    try {\r\n      clearInterval(this.showLoadigInterval);\r\n      if (!isFromSession) {\r\n        this.showLoadigInterval = setInterval(() => this.setState({ showLoading: true }), 300);\r\n      }\r\n\r\n      const result = await apiCallback();\r\n\r\n      clearInterval(this.showLoadigInterval);\r\n      this.setState({\r\n        showLoadingError: overwriteWarning ? false : !result,\r\n        showLoading: overwriteWarning ? false : !result,\r\n      });\r\n      return result;\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  async showLoading(show) {\r\n    await new Promise((resolve) => { this.setState({ showLoading: show }, resolve); });\r\n  }\r\n\r\n  async showLoadingError(show) {\r\n    await new Promise((resolve) => { this.setState({ showLoadingError: show }, resolve); });\r\n  }\r\n\r\n  async handleTransition(callback) {\r\n    await this.setState({\r\n      transitionClass: 'flow-invisible',\r\n    }, async () => {\r\n      await new Promise((resolve) => { setTimeout(() => { resolve(); }, 200); });\r\n      callback();\r\n      await new Promise((resolve) => { setTimeout(() => { resolve(); }, 100); });\r\n      this.setState({\r\n        transitionClass: 'flow-visible',\r\n      });\r\n    });\r\n  }\r\n\r\n  async quoteButtonCallback(failScrollUp) {\r\n    const { values, pageForms, formStatesToUse } = this.state;\r\n\r\n    try {\r\n      const validateResult = await this.validateForm([emailField.slug], async () => {\r\n        const newToken = await postSession(generateRequestData([emailField], values));\r\n        if (await this.handleAPI(() => putSessions(generateRequestData([emailField], values), newToken, STATUSLIST.CUSTOMIZE, pageForms[0].slug))) {\r\n          this.setState({\r\n            token: newToken,\r\n          }, () => {\r\n            this.handleTransition(() => {\r\n              window.scrollTo(0, 0);\r\n              this.setFormIndex(formStatesToUse.CUSTOMIZE);\r\n            });\r\n          });\r\n        }\r\n      });\r\n      // const data = {};\r\n      // const newToken = await postSession(data);\r\n      // if (await this.handleAPI(() => putSessions(data, newToken, STATUSLIST.CUSTOMIZE, pageForms[0].slug))) {\r\n      //   this.setState({\r\n      //     token: newToken,\r\n      //   }, () => {\r\n      //     this.handleTransition(() => {\r\n      //       window.scrollTo(0, 0);\r\n      //       this.setFormIndex(formStatesToUse.CUSTOMIZE);\r\n      //     });\r\n      //   });\r\n      // }\r\n\r\n      if (failScrollUp && !validateResult) {\r\n        window.scrollTo({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: 'smooth',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n  }\r\n\r\n  async validateForm(subset = null, callback = null, overwriteFields = null) {\r\n    const {\r\n      values,\r\n      errors,\r\n      allFields,\r\n    } = this.state;\r\n\r\n    const fieldsToUse = overwriteFields || allFields;\r\n\r\n    let newErrors = { ...errors };\r\n    try {\r\n      newErrors = await validateForm(values, subset, fieldsToUse);\r\n    } catch (error) {\r\n      // eslint-disable-next-line\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n      this.setState({\r\n        errors: newErrors,\r\n      }, () => {\r\n        if (_.isEmpty(newErrors)) {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n          resolve(true);\r\n        }\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  renderStepProgress() {\r\n    const { formIndex, partialFlowStatus, formStatesToUse } = this.state;\r\n\r\n    const inputList = partialFlowStatus ? [\r\n      'Review',\r\n      'Checkout',\r\n    ] : [\r\n      'Customize',\r\n      'Review',\r\n      'Checkout',\r\n    ];\r\n\r\n    const stateList = partialFlowStatus ? [\r\n      formStatesToUse.REVIEW,\r\n      formStatesToUse.CHECKOUT,\r\n    ] : [\r\n      formStatesToUse.CUSTOMIZE,\r\n      formStatesToUse.REVIEW,\r\n      formStatesToUse.CHECKOUT,\r\n    ];\r\n    const stateDescriptions = partialFlowStatus ? [\r\n      { main: '' },\r\n      { main: '' },\r\n    ] : [\r\n      { main: '' },\r\n      { main: '' },\r\n      { main: '' },\r\n    ];\r\n\r\n    return (\r\n      <StepProgressBar\r\n        className=\"business-step-progress\"\r\n        maxWidth=\"244px\"\r\n        formState={formIndex > formStatesToUse.CHECKOUT.index ? formStatesToUse.CHECKOUT.index : formIndex}\r\n        inputList={inputList}\r\n        formStates={formStatesToUse}\r\n        stateList={stateList}\r\n        stateDescriptions={stateDescriptions}\r\n        charged={false}\r\n        v3Slider\r\n      />\r\n    );\r\n  }\r\n\r\n  renderFlow() {\r\n    const {\r\n      formIndex,\r\n      values,\r\n      errors,\r\n      pageForms,\r\n      currPage,\r\n      transitionClass,\r\n      allFields,\r\n      token,\r\n      promoCode,\r\n      paymentIntent,\r\n      isFromSession,\r\n      partialFlowStatus,\r\n      formStatesToUse,\r\n    } = this.state;\r\n\r\n    const {\r\n      userDetails,\r\n      doSetQuoteData,\r\n      quoteDataFromState,\r\n      setFormState,\r\n      history,\r\n    } = this.props;\r\n\r\n    const isLoggedIn = !_.isEmpty(userDetails);\r\n    const currPageIndex = this.getCurrentFormIndex();\r\n\r\n    switch (formIndex) {\r\n      case formStatesToUse.CUSTOMIZE.index:\r\n        return (\r\n          <BusinessForm\r\n            handleAPI={this.handleAPI}\r\n            isFromSession={isFromSession}\r\n            stickyInfo={quoteDataFromState}\r\n            values={values}\r\n            errors={errors}\r\n            onChangeValue={this.onChangeValue}\r\n            validateForm={this.validateForm}\r\n            pageForms={pageForms}\r\n            currPage={currPage}\r\n            isLoggedIn={isLoggedIn}\r\n            headerImage={currPageIndex === 0 ? FlowHeaderImg : null}\r\n            onNext={async () => {\r\n              const newCurrPageIndex = this.getCurrentFormIndex();\r\n              const isInCustomize = newCurrPageIndex + 1 < pageForms.length;\r\n              const newPage = isInCustomize ? pageForms[newCurrPageIndex + 1].slug : currPage;\r\n              const newState = isInCustomize ? STATUSLIST.CUSTOMIZE : STATUSLIST.REVIEW;\r\n\r\n              const isFormUpdated = await this.handleAPI(() => putSessions(generateRequestData(allFields, values), token, newState, newPage, 1, partialFlowStatus));\r\n              if (isFormUpdated) {\r\n                this.handleTransition(() => {\r\n                  window.scrollTo(0, 0);\r\n                  try {\r\n                    if (isInCustomize) {\r\n                      this.setState({\r\n                        currPage: newPage,\r\n                      });\r\n                    } else {\r\n                      this.setFormIndex(formStatesToUse.REVIEW);\r\n                    }\r\n                  } catch (error) {\r\n                    // eslint-disable-next-line\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n            onBack={async () => {\r\n              const newCurrPageIndex = this.getCurrentFormIndex();\r\n              const newPage = pageForms[newCurrPageIndex - 1].slug;\r\n              const isFormUpdated = await this.handleAPI(() => putSessions(generateRequestData(allFields, values), token, STATUSLIST.CUSTOMIZE, newPage, 1, partialFlowStatus));\r\n\r\n              if (isFormUpdated) {\r\n                this.handleTransition(() => {\r\n                  window.scrollTo(0, 0);\r\n                  try {\r\n                    if (newCurrPageIndex - 1 >= 0) {\r\n                      this.setState({\r\n                        currPage: newPage,\r\n                      });\r\n                    }\r\n                  } catch (error) {\r\n                    // eslint-disable-next-line\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n            transitionClass={transitionClass}\r\n          />\r\n        );\r\n      case formStatesToUse.REVIEW.index:\r\n      case formStatesToUse.CHECKOUT.index:\r\n      case formStatesToUse.SUBMITTED.index:\r\n        return (\r\n          <BusinessCheckout\r\n            setStateToSubmitted={() => {\r\n              setFormState(formStatesToUse.SUBMITTED);\r\n              history.push(`/business${formStatesToUse.SUBMITTED.path}${history.location.search}`);\r\n            }}\r\n            partialFlowStatus={partialFlowStatus}\r\n            postComeBackLater={async params => this.handleAPI(() => postComeBackLater(params, token))}\r\n            doSetQuoteData={doSetQuoteData}\r\n            stickyInfo={quoteDataFromState}\r\n            isFromSession={isFromSession}\r\n            checkOtp={this.checkOtp}\r\n            paymentIntent={paymentIntent}\r\n            handleAPI={this.handleAPI}\r\n            promoCode={promoCode}\r\n            token={token}\r\n            postBankTransfer={async params => this.handleAPI(() => postBankTransfer(params, token))}\r\n            getSummary={async () => this.handleAPI(() => getSummary(token))}\r\n            postCheckout={async (promo = null, isPut = false) => {\r\n              const data = await this.handleAPI(() => postCheckout(token, promo), !isPut);\r\n              if (data) {\r\n                const newQuoteData = data.quote ? {\r\n                  quoteData: {\r\n                    ...(this.state.quoteData || {}),\r\n                    quote: {\r\n                      ...data.quote,\r\n                    },\r\n                  },\r\n                } : {};\r\n                await new Promise((r) => {\r\n                  this.setState({\r\n                    promoCode: promo,\r\n                    ...newQuoteData,\r\n                  }, r);\r\n                });\r\n              }\r\n\r\n              if (!isPut) {\r\n                return data;\r\n              }\r\n\r\n              if (isPut) {\r\n                await this.handleAPI(() => putSessions(generateRequestData(allFields, values), token, STATUSLIST.PAYMENTPENDING, currPage, 1, partialFlowStatus));\r\n                if (data && data.payment_template_links) {\r\n                  return data;\r\n                }\r\n              }\r\n\r\n              return null;\r\n            }}\r\n            checkoutFields={checkoutFields}\r\n            isCheckout={formIndex === formStatesToUse.CHECKOUT.index}\r\n            values={values}\r\n            errors={errors}\r\n            onChangeValue={this.onChangeValue}\r\n            validateForm={this.validateForm}\r\n            isLoggedIn={isLoggedIn}\r\n            onBack={async () => {\r\n              const status = formIndex === formStatesToUse.REVIEW.index ? STATUSLIST.CUSTOMIZE : STATUSLIST.REVIEW;\r\n              const newFormIndex = formIndex === formStatesToUse.REVIEW.index ? formStatesToUse.CUSTOMIZE : formStatesToUse.REVIEW;\r\n\r\n              const isFormUpdated = await this.handleAPI(() => putSessions(generateRequestData(allFields, values), token, status, currPage, 1, partialFlowStatus));\r\n              if (isFormUpdated) {\r\n                this.handleTransition(() => {\r\n                  window.scrollTo(0, 0);\r\n                  this.setFormIndex(newFormIndex);\r\n                });\r\n              }\r\n            }}\r\n            onNext={formIndex === formStatesToUse.REVIEW.index ? async () => {\r\n              const isFormUpdated = await this.handleAPI(() => putSessions(generateRequestData(allFields, values), token, STATUSLIST.CHECKOUT, currPage, 1, partialFlowStatus));\r\n                if (isFormUpdated) {\r\n                this.handleTransition(() => {\r\n                  window.scrollTo(0, 0);\r\n                  this.setFormIndex(formStatesToUse.CHECKOUT);\r\n                });\r\n              }\r\n            } : null}\r\n            transitionClass={transitionClass}\r\n            handleTransition={this.handleTransition}\r\n          />\r\n        );\r\n      default:\r\n        return (\r\n          <BusinessLanding\r\n            isFromSession={isFromSession}\r\n            emailField={emailField}\r\n            values={values}\r\n            errors={errors}\r\n            onChangeValue={this.onChangeValue}\r\n            isLoggedIn={isLoggedIn}\r\n            quoteButtonCallback={this.quoteButtonCallback}\r\n            transitionClass={transitionClass}\r\n            handleAPI={this.handleAPI}\r\n          />\r\n        );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { formIndex, showLoading, showLoadingError } = this.state;\r\n\r\n    // const meta = isProduction ? 'PolicyPal, insurance, insurance broker, endowment, endowment plan, savings plan singapore, best endowment plan singapore, 5 years saving plan singapore, endowment fund, endowment insurance, what is endowment plan, best insurance savings plan singapore, endowment policy, ntuc endowment, short term endowment plan singapore, short term endowment plan, best endowment plan, ntuc income endowment, endowment plan comparison, singapore endowment insurance, savings insurance, savings insurance singapore, compare insurance' : '';\r\n\r\n    return (\r\n      <Page id=\"business\">\r\n        <Helmet>\r\n          {/* <meta name=\"keywords\" content={meta} /> */}\r\n          <title>PolicyPal 2.0 - Business Insurance</title>\r\n          <meta name=\"title\" content=\"PolicyPal 2.0 - Business Insurance\" />\r\n          <meta name=\"description\" content=\"PolicyPal Business can offer tailored quotations to protect your business. From corporate companies, to SMEs, startups, weve got just the best benefits and coverage for you so you can gain full protection.\" />\r\n        </Helmet>\r\n        {/* Render step progress only when in flow */}\r\n        { formIndex !== 0 && this.renderStepProgress()}\r\n        {this.renderFlow()}\r\n        <RefreshTimer ref={(node) => {\r\n            if (!this.refresher) {\r\n              node.invokeNewTimer();\r\n            }\r\n            this.refresher = node;\r\n          }}\r\n        />\r\n        <LoadingScreenV2\r\n          isLoading={showLoading}\r\n          isLoadingError={showLoadingError}\r\n          message={<h5>Please try again.</h5>}\r\n          showLoading={this.showLoading}\r\n          showLoadingError={this.showLoadingError}\r\n          noLogos\r\n        />\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nBusinessRouteContainer.defaultProps = {\r\n  userDetails: null,\r\n  quoteDataFromState: null,\r\n};\r\n\r\nBusinessRouteContainer.propTypes = {\r\n  userDetails: PropTypes.object,\r\n  // constants: PropTypes.object,\r\n  history: PropTypes.object.isRequired,\r\n  doSetCategoryNavBar: PropTypes.func.isRequired,\r\n  setFormState: PropTypes.func.isRequired,\r\n  doSetGetQuoteNavbar: PropTypes.func.isRequired,\r\n  doSetQuoteData: PropTypes.func.isRequired,\r\n  quoteDataFromState: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  formState: state.insurance.formState,\r\n  constants: state.insurance.constants,\r\n  userDetails: state.userDetails.data,\r\n  quoteDataFromState: state.business.quoteData,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setFormState: (state) => {\r\n    dispatch(setInsuranceFormState(state));\r\n  },\r\n  doSetCategoryNavBar: (isCategory, isBusiness) => {\r\n    dispatch(setCategoryNavBar(isCategory, false, isBusiness));\r\n  },\r\n  doSetGetQuoteNavbar: (callback) => {\r\n    dispatch(setGetQuoteNavbar(callback));\r\n  },\r\n  doSetQuoteData: (data) => {\r\n    dispatch(setQuoteData(data));\r\n  },\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(BusinessRouteContainer));\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport Helmet from 'react-helmet';\r\nimport logo from '../../assets/logo.png';\r\n\r\nconst SITE_URL =\r\n  process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:3000'\r\n    : 'https://web.policypal.com';\r\n\r\nconst FACEBOOK_APP_ID = 'XXXXXXXXX';\r\n\r\nconst defaultTitle = 'My Website';\r\nconst defaultDescription =\r\n  'This is a really awesome website where we can render on the server. Supa cool.';\r\nconst defaultImage = `${SITE_URL}${logo}`;\r\nconst defaultTwitter = '@cereallarceny';\r\nconst defaultSep = ' | ';\r\n\r\nclass Page extends Component {\r\n  getMetaTags(\r\n    {\r\n      title,\r\n      description,\r\n      image,\r\n      contentType,\r\n      twitter,\r\n      noCrawl,\r\n      published,\r\n      updated,\r\n      category,\r\n      tags\r\n    },\r\n    pathname\r\n  ) {\r\n    const theTitle = title\r\n      ? (title + defaultSep + defaultTitle).substring(0, 60)\r\n      : defaultTitle;\r\n    const theDescription = description\r\n      ? description.substring(0, 155)\r\n      : defaultDescription;\r\n    const theImage = image ? `${SITE_URL}${image}` : defaultImage;\r\n\r\n    const metaTags = [\r\n      { itemprop: 'name', content: theTitle },\r\n      { itemprop: 'description', content: theDescription },\r\n      { itemprop: 'image', content: theImage },\r\n      { name: 'description', content: theDescription },\r\n      { name: 'twitter:card', content: 'summary_large_image' },\r\n      { name: 'twitter:site', content: defaultTwitter },\r\n      { name: 'twitter:title', content: theTitle },\r\n      { name: 'twitter:description', content: theDescription },\r\n      { name: 'twitter:creator', content: twitter || defaultTwitter },\r\n      { name: 'twitter:image:src', content: theImage },\r\n      { property: 'og:title', content: theTitle },\r\n      { property: 'og:type', content: contentType || 'website' },\r\n      { property: 'og:url', content: SITE_URL + pathname },\r\n      { property: 'og:image', content: theImage },\r\n      { property: 'og:description', content: theDescription },\r\n      { property: 'og:site_name', content: defaultTitle },\r\n      { property: 'fb:app_id', content: FACEBOOK_APP_ID }\r\n    ];\r\n\r\n    if (noCrawl) {\r\n      metaTags.push({ name: 'robots', content: 'noindex, nofollow' });\r\n    }\r\n\r\n    if (published) {\r\n      metaTags.push({ name: 'article:published_time', content: published });\r\n    }\r\n    if (updated) {\r\n      metaTags.push({ name: 'article:modified_time', content: updated });\r\n    }\r\n    if (category) {\r\n      metaTags.push({ name: 'article:section', content: category });\r\n    }\r\n    if (tags) {\r\n      metaTags.push({ name: 'article:tag', content: tags });\r\n    }\r\n\r\n    return metaTags;\r\n  }\r\n\r\n  render() {\r\n    const { children, id, className, ...rest } = this.props;\r\n\r\n    return (\r\n      <div id={id} className={className}>\r\n        <Helmet\r\n          htmlAttributes={{\r\n            lang: 'en',\r\n            itemscope: undefined,\r\n            itemtype: `http://schema.org/${rest.schema || 'WebPage'}`\r\n          }}\r\n          title={\r\n            rest.title ? rest.title + defaultSep + defaultTitle : defaultTitle\r\n          }\r\n          link={[\r\n            {\r\n              rel: 'canonical',\r\n              href: SITE_URL + this.props.location.pathname\r\n            }\r\n          ]}\r\n          meta={this.getMetaTags(rest, this.props.location.pathname)}\r\n        />\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Page);\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.f0988bd7.png\";","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/**\r\n * PopupWithText.js\r\n * Popup with custom text\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Button from 'components/FormsV3/Button/Button';\r\nimport Popup from '../Popup/Popup';\r\n\r\n\r\nimport './PopupWithText.scss';\r\n\r\nclass PopupWithText extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { onConfirm } = this.props;\r\n\r\n    this.state = {\r\n      text: '',\r\n      jsx: null,\r\n      useConfirm: true,\r\n      onConfirm,\r\n    };\r\n    this.openPopupWithText = this.openPopupWithText.bind(this);\r\n  }\r\n\r\n  openPopupWithText(text, useConfirm = true, onConfirm = null) {\r\n    this.setState({\r\n      text,\r\n      useConfirm,\r\n    });\r\n\r\n    if (onConfirm) {\r\n      this.setState({\r\n        onConfirm,\r\n      });\r\n    }\r\n    setTimeout(this.popupRef.openPopup, 10);\r\n  }\r\n\r\n  openPopupWithJSX(jsx, useConfirm = true, onConfirm = null) {\r\n    this.setState({\r\n      jsx,\r\n      useConfirm,\r\n    });\r\n\r\n    if (onConfirm) {\r\n      this.setState({\r\n        onConfirm,\r\n      });\r\n    }\r\n    setTimeout(this.popupRef.openPopup, 10);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      text, jsx, useConfirm, onConfirm,\r\n    } = this.state;\r\n    const { showCancelButton, hideCloseButton } = this.props;\r\n    return (\r\n      <div className=\"popup-with-text\">\r\n        <Popup\r\n          hideCloseButton={hideCloseButton}\r\n          ref={(r) => { this.popupRef = r; }}\r\n        >\r\n          <Fragment>\r\n            <div className=\"check-out-popup\">\r\n              <div className=\"upper-container upper-margin-down\">\r\n                {\r\n                  jsx || (\r\n                    <p>\r\n                      <span className=\"focus-text\">{text}</span>\r\n                    </p>\r\n                  )\r\n                }\r\n              </div>\r\n              <div className=\"button-container\">\r\n                {\r\n                  showCancelButton ?\r\n                    <Button\r\n                      className=\"checkout-button\"\r\n                      variant=\"medium-flat\"\r\n                      width={166}\r\n                      height={72}\r\n                      onClick={() => {\r\n                        this.popupRef.closePopup();\r\n                      }}\r\n                    >\r\n                      <p>Cancel</p>\r\n                    </Button>\r\n                  :\r\n                    null\r\n                }\r\n                <Button\r\n                  className=\"checkout-button\"\r\n                  variant=\"medium-flat-green\"\r\n                  width={166}\r\n                  height={72}\r\n                  onClick={() => {\r\n                    if (useConfirm) {\r\n                      onConfirm();\r\n                    }\r\n                    this.popupRef.closePopup();\r\n                  }}\r\n                >\r\n                  <p>Confirm</p>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Fragment>\r\n        </Popup>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPopupWithText.defaultProps = {\r\n  onConfirm: () => {},\r\n  showCancelButton: false,\r\n  hideCloseButton: false,\r\n};\r\n\r\nPopupWithText.propTypes = {\r\n  onConfirm: PropTypes.func,\r\n  showCancelButton: PropTypes.bool,\r\n  hideCloseButton: PropTypes.bool,\r\n};\r\n\r\nexport default PopupWithText;\r\n","/**\r\n * PopupWithText.js\r\n * Popup with custom text\r\n *\r\n * @version 0.0.1\r\n * @author [Wilson Phoo](wilson@policypal.com)\r\n */\r\nimport window from 'global/window';\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport PopupWithText from '../PopupWithText/PopupWithText';\r\n\r\n\r\nclass RefreshTimer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.oldTime = new Date();\r\n    this.timeout = null;\r\n    this.invokeNewTimer = this.invokeNewTimer.bind(this);\r\n    this.setTimer = this.setTimer.bind(this);\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.interval = window.setInterval(() => {\r\n      if (window.addEventListener) {\r\n        window.addEventListener('mousemove', this.invokeNewTimer);\r\n        window.addEventListener('keypress', this.invokeNewTimer);\r\n        clearInterval(this.interval);\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n\r\n  componentWillUnmount() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n\r\n    window.removeEventListener('mousemove', this.invokeNewTimer);\r\n    window.removeEventListener('keypress', this.invokeNewTimer);\r\n  }\r\n\r\n  setTimer() {\r\n    const { popupTimer, refreshTimer } = this.props;\r\n    this.timeout = setTimeout(() => {\r\n      const confirmResult = window.confirm(`Your session will expire due inactivity. Please click OK within ${refreshTimer / 1000 / 60} mins to continue, or Cancel, if you wish to leave the page.`);\r\n      const timeDiff = new Date() - this.oldTime;\r\n\r\n      if (confirmResult && timeDiff < popupTimer + refreshTimer) {\r\n        this.invokeNewTimer();\r\n      } else {\r\n        window.location.assign('/');\r\n      }\r\n    }, popupTimer);\r\n    this.oldTime = new Date();\r\n  }\r\n\r\n  invokeNewTimer() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n\r\n    this.setTimer();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <PopupWithText\r\n          hideCloseButton\r\n          ref={node => this.popup = node}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nRefreshTimer.defaultProps = {\r\n  popupTimer: 600000,\r\n  refreshTimer: 120000,\r\n};\r\n\r\nRefreshTimer.propTypes = {\r\n  popupTimer: PropTypes.number,\r\n  refreshTimer: PropTypes.number,\r\n};\r\n\r\nexport default RefreshTimer;\r\n","module.exports = __webpack_public_path__ + \"static/media/Flow.d0c4989e.svg\";"],"sourceRoot":""}